<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>灰灰爱吃小云朵 - 云层小卖铺</title><meta name="author" content="xiaofan"><meta name="copyright" content="xiaofan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="灰灰爱吃小云朵">
<meta property="og:url" content="http://200928.github.io/index.html">
<meta property="og:site_name" content="灰灰爱吃小云朵">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://200928.github.io/img/%E5%A4%B4%E5%83%8F.gif">
<meta property="article:author" content="xiaofan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://200928.github.io/img/%E5%A4%B4%E5%83%8F.gif"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://200928.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="yandex-verification" content="{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":500,"languages":{"author":"作者: xiaofan","link":"链接: ","source":"来源: 灰灰爱吃小云朵","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#ffc0cb","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: true,
  isToc: false,
  postUpdate: '2022-10-11 15:16:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/css/mycss/background.css"><link rel="stylesheet" href="/css/mycss/footer.css"><link rel="stylesheet" href="/css/mycss/scroll_bar.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/css/hideCategory.min.css"><link rel="stylesheet" href="/css/mycss/read.css"><link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">82</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('http://p1.qhimg.com/bdr/__85/t01013525c6b73d2c2f.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">灰灰爱吃小云朵</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">灰灰爱吃小云朵</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/755400668" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:755400668@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/09/28/%E8%80%83%E7%A0%94%E6%94%BF%E6%B2%BB%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" title="考研政治知识点总结">考研政治知识点总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-28T02:28:58.000Z" title="发表于 2022-09-28 10:28:58">2022-09-28</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-10T15:32:01.619Z" title="更新于 2022-10-10 23:32:01">2022-10-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%80%83%E7%A0%94/">考研</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%94%BF%E6%B2%BB/">政治</a></span></div><div class="content">
马原第一、二章
马克思主义理论区别于其他理论的根本特征：实践性
实践的观点是马克思主义的基本观点
马克思主义鲜明特征：科学性和革命性的统一
马克思主义当代价值：认识工具、行动指南、科学真理
根本原因多是社会、规律类。个人原因一般不是根本原因
客观唯心主义：道、理念、理、上帝、绝对观念、宇宙精神、造物主等
共性与个性 = 一般与个别 = 普通与特殊 = 抽象与具体 即 类与单个的关系 != 整体与部分
比如：人与我、水果与苹果


整体与部分 = 系统与要素 即 集合与单个
比如：清华与我（我属于清华，是清华的一个元素）、牛和牛腿


意识是人脑的机能和属性，是客观世界（客观精神）的主观映像
意识的内容是客观的，形式是主观的
人的认识是理性因素和非理性因素协同起作用的结果
现象可以通过感官感知，本质只能靠人的理性思维才能把握
认识是一个反复循环和发展的过程
实践是人所特有的对象化活动。机器人已经可以从事某些实践活动（生活和政治没有区分开，实践是人所特有的）
静止是运动的衡量尺度
物质的共同特性（唯一特性）：客观实在性
人类认识世界和改造世界的根本目标：认识必然和争取自由
人的本质是一切社会关系的总和（是变化发展的）
意识对物质反作用表现在（意识的能动作用）：
意识活动具有目的性、计划性
意识活动具有创造性
意识活动具有指导实践改造客观世界的作用
意识活动具有调控人的行为和生理活动的作用


物质的根本属性或存在方式是运动
运动的存在方式是时空
运动着的物质的基本存在形式是时空
物质的唯一属性是客观实在性
几个批判
脱离运动谈物质：形而上学
脱离物质谈运动；唯心主义
夸大静止否定运动：形而上学
夸大运动否定静止：诡辩论


物质是运动的基础和承担者
物质运动时间和空间的客观实在性是绝对的
物质运动时间和空间的具体特性是相对的（比如光速下测量的时间是有区别的）
相对静止，绝对运动
否定是事物联系和发展的环节
认识（无论正确与否）都能指导实践，只是效果不同
只有正确的认识才能指导实践（错）。错误的认识也能指导实践


矛盾双方既对立（无条件，绝对）又同一（有条件，相对），两方面共同推动事物的发展
矛盾双方相互转换推动事物的发展（错）


国家是一个历史范畴，在共产主义社会，阶级、国家都会消亡
实践是认识的目的
发展的实质：新事物的产生和旧事物的灭亡
新事物：只合乎历史前进方向、具有远大前途的东西
旧事物：丧失了历史的必然性、日趋灭亡的东西
新事物是不可战胜的


事物的发展呈现出波浪式前进或螺旋式上升的总趋势
质变体现了事物发展渐近过程和连续性的中断
实践是马克思哲学独有的特征
普世价值违背了”具体问题具体分析”
辩证的同一是以差别、对立为前提的同一
矛盾的解决形式是多种多样的
矛盾一方克服另外一方
矛盾双方同归于尽
矛盾双方形成协同运动的新形势
矛盾双方融合成一个新事物


新事物与旧事物的融合推动社会发展（错）因为新事物必将战胜旧事物，不会融合
矛盾普遍性即共性，矛盾特殊性即个性，共性寓于个性之中
真理的内容是客观的，形式是主观的（客观内容，主观形式）
量变是质变的必要准备
必然存在于偶然之中，通过大量的偶然表现出来，并为自己开辟道路
度是保持事物的稳定性的数量界限
辩证否定是事物的自我否定
事物的辩证发展（辩证否定）要经历事物自我发展的两次否定三个阶段：肯定-否定-否定之否定
辩证否定的实质是：扬弃，扬弃是新事物对旧事物既批判又继承，即克服其消极因素，又保留其积极因素
辩证否定是事物内部矛盾运动的结果
新旧事物是通过否定环节联系起来的
真理具有客观性，是绝对和相对性的辩证统一
内容是事物的存在基础
内容是易变的，形式是稳定的
本质决定现象，现象表现本质，不存在不表现本质的现象
真象是从正面直接表现本质的现象
假象是从反面歪曲表现本质的现象
错觉不表现事物的本质


本质深藏事物内部，而现象则是表面的、外显的
真象深藏于事物内部，假象外漏于事物内部（错）


因果联系的两个必要条件：前后相继 + 引起与被引起
不可能无法转化为可能（即可能与不可能无法相互转化），二者区别在于现实有无根据和条件
现实可能性与抽象可能性的区别是现实中的根据和条件是否充分
对人是否有利是区分：好的可能性与坏的可能性
一个事物只要合乎发展的必然性迟早会变为现实
唯物辩证法：主观辩证法与客观辩证法的统一
主观辩证法是客观辩证法在人的思维中的反映，二者本质统一但表现形式不同
事物的性质是由主要矛盾的主要方面确定的
形而上学唯物主义：混淆自然科学物质结构同哲学物质范畴区别，不能说明社会生活的物质性
形而上学唯物主义把某种特殊的物质形态误认为物质的一般


马克思主义物质观所体现的唯物辩证法是：从个性中看到共性、从相对中找到绝对、从暂时中找到永恒
意识可以（通过实践）转化为物质
物质决定意识，意识反作用于物质，这种反作用就是意识的能动作用
主观能动性是人区别于动物的特征
精神（意识）对物质具有相对独立性
实践是物质活动，不是精神活动
人类有意识的实践是主体自我实现的精神活动（主干：实践是精神活动，错）


人类的任何实践形式都离不开意识活动
精神的力量可以（通过实践）变成物质的力量，但不能代替
具体物质形态的时空是有限的，而整个物质世界的时空是无限的
具体物质形态的时间和空间既是无限的也是有限的（错）


实践
实践是自然存在与社会存在区分和统一的基础
实践是客观规律性与主观能动性统一的基础
实践是认识世界和改造世界的统一基础
实践是真理与价值统一的基础


规律具有客观性，不以人的意志为转移，客观性是其根本特点
合理改造自然规律是人与自然和谐相处的关键（错，不能改造规律，只能发现规律和利用规律）


社会发展的根本动力：社会基本矛盾（矛盾的同一性与斗争性的相互作用）
任何规律都是在一定条件下起作用的
规律既不能人为创造也不能人为消灭（对）
在历史上发生作用的规律现实中也必然起作用（错，规律起作用需要条件）
规律的必然性要通过具体的条件才能发生作用（对）


人的自然语言是思维的物质外壳和意识的现实形式
人类社会统一于物质表现在以下方面
人类社会的自然基础是物质的
人类获取生活资料的生产活动是物质性的活动
物质资料的生产方式是人类社会存在和发展的基础


人是社会历史活动的主体，社会发展过程是客观规律与人的自觉活动的辩证统一
事物之间有其固有的客观联系
实践是认识发展的动力
实践的需要推动着认识的产生和发展
实践为认识发展提供手段与条件
实践锻炼和提高了主体的认知能力


认识的正确与否在于其是否能反映事物及其发展规律的真实情况
认识具有相对独立性，其表现之一为：具体的认识过程与一定的实践不完全同步
世界的普遍联系是通过“中介”来实现的
唯物辩证法就其本质来说是批判的、革命的
唯物辩证法认为凡是现存的都是应当灭亡的
不包含内部差别的事物就不能存在和发展
同一性是事物存在和发展的前提
任何一般都是个别（一部分，或一方面，或本质），任何个别都是一般
谬误在一定条件下能够向真理转化
事物的内部都存在否定和肯定，肯定因素占据主导则会保持原有性质，否定因素占主导否定自己，改变自己原有性质
事物内部否定的方面始终处于支配的地位（错）


质变不仅可以完成量变，而且可以为新的量变开辟道路
质是一事物区别于其他事物的内在规定性
质和事物的存在是直接同一的
考察量是认识质的前提，区分质是认识量的深化（错）
区分质是认识量的前提，考察量是认识质的深化


扬弃是连续性和非连续性的统一
发展是前进、上升的运动，发展的实质是新事物的产生和旧事物的灭亡，发展是前进性和曲折性的统一
源与流的关系（比如直接经验与间接经验）
真理具有客观性，是绝对和相对性的统一

第三章-认识论
实践具有直接现实性
人的能动的意识活动具有直接现实性（错）


非理性因素对理性因素起推动和调控的作用，同时受到理性因素决定与制约
理性认识是认识的高级阶段，具有抽象性和间接性的特点，它反映事物的本质，具有抽象性、间接性、深刻性
感性认识是认识的初级阶段，具有直接性和具体性
理性认识以感性认识为基础，通过感性认识来说明
实践是认识的来源，一切真知都是从直接经验发源的，但人大多数知识来自间接经验（从直接经验得来）
真理的根本特征：主观与客观相符合，对客体的认识于客体的实际相符合
实践不仅是认识发展的源泉，而且是认识发展的动力
实践是认识的起点，也是认识的归宿，是全部认识的基础
人的本质属性是社会属性，表现在各种社会关系中（一切社会关系的总和）
实践的主体和客体相互作用的关系：实践关系、认识关系、价值关系，其中实践关系是最根本的关系
唯理论与经验论：前者夸大理性认识，后者夸大感性认识
感性认识反映事物的现象，理性认识反映事物的本质
感性认识来源于实践，理性认识也来源于实践（因为实践是认识的来源）
非理性因素对于人的认知能力和认识活动具有激活、驱动和控制作用
反映和创造是人类认识同一本质的两个不同的方面
客观真理具有不可推翻的性质
只有实践才能把人脑中观念存在


规律是内在的、本质的、必然的联系
社会规律具有难以预测的不稳定性（错，规律是客观的）


主观与客观、认识与实践的统一是具体的历史的
在真理标准问题上坚持辩证法就是坚持：实践标准的确定性与不确定性的统一
真理标准是确定性和不确定性的统一（错，是实践标准）


真理是人们对于客观事物及其规律的正确反映
逻辑证明是对实践标准的一个重要补充
实践是认识的目的
真理是具体的，任何真理都是在一定范围一定条件下才能成立的
真理是一个发展过程，既是绝对的，又是相对的，这是真理问题的辩证法
谬误也是对客体的反映，不过是错误歪曲的反映
不能因为真理具有客观性而把真理等同于客观实在
真理是客观的（或者说客观性的），一元的，不断发展的，具体的，全面的，有用的
真理是有用的
有用的不一定是真理


价值是多元的（多维性）、主体性、客观性、社会历史性
物质生产实践是人类最基本的实践活动
人的认识是反映性或者摹写性与创造性的统一（没有反复性、规律性）
直接经验与间接经验即为源与流的关系，流是源的分支
人的认识是从具体到抽象再到具体的过程
真理永远处于相对向绝对的转化过程中，是发展的
事物的性质是由主要矛盾的主要方面所规定的
世界上只有尚未认识之物，没有不可认识之物
物质生产方式是社会历史发展的决定性力量
科学技术已经成为社会历史发展的决定力量（错）


社会基本矛盾是社会历史发展的根本动力
真理的内容是客观的，形式是主观的
真理的绝对性和相对性是对同一客观真理的两种属性
必须把人的全部实践一一作为真理的标准
价值尺度必须以真理为前提
只有正确反映了价值关系的评价才是正确的评价
知识性认识以求真为认识目的
价值评价以善和美为认识目的
必然是自由的根据和限度
理论创新建立在实践创新的基础之上，所以理论创新以实践创新为基础
实践创新为理论创新提供不竭的动力源泉（类比实践不仅是认识发展的源泉，而且是认识发展的动力）

第四章-唯物史观
社会意识与社会存在发展具有不完全同步性和不平衡性

社会存在决定社会意识，社会意识反作用于社会存在，既依赖于社会存在，又具有相对独立性

理解相对独立性，比如A决定B，B反作用与A，但是B又有自己的发展的独立性


社会意识变化和发展的根源总是深藏于经济事实中（社会意识源与社会存在，社会存在又主要是物质生产方式决定，物质生产方式又深藏与经济基础）

劳动资料（生产工具是区分社会经济时代的客观依据）

注意：社会经济结构性质的客观依据是：生产资料所有制关系


社会存在是社会意识内容的客观来源
社会意识是社会物质生活过程及其条件的主观反映

社会意识是具体的、历史的、根源于经济事物之中

生产关系是人们在物质生产过程中发生的“物质的社会关系”

生产力是人类改造自然的物质力量

生产关系是人们在物质生产过程中形成的不以人的意识为转移的经济关系

物质资料的生产方式构成了人类社会存在和发展的基础，集中体现了人类社会的物质性

物质生产活动及物质生产方式是人类社会赖以存在和发展的基础，是人类其他一切活动的首要前提

生产关系中，生产资料所有制关系是最基本的，区分不同生产方式，判定社会经济结构性质的客观依据

经济基础是社会的“骨骼系统”，上层建筑是社会的“血肉系统”

经济基础是与一定生产力相适应的生产关系的总和（即经济基础是生产关系）

在整个上层建筑中，政治上层建筑居主导地位，而国家政权又是政治上层建筑的核心

文化对社会发展的作用：

为社会发展提供精神动力
～智力支持
～思想保证
～凝聚力量


普遍交往是世界历史的基本特征

社会形态更替归根到底是社会基本矛盾运动（生产力与生产关系，经济基础与上层建筑）的结果，其中生产力的发展具有最终的决定意义

社会形态的更替是社会发展的客观必然性和人们的历史选择性的统一，是合规律性和合目的性的统一，人们的历史选择性，归根到底是人民群众的选择性

科学技术是生产中重要因素，是先进生产力的集中体现和主要标志，是第一生产力

生产方式是社会历史发展的决定力量（社会存在和发展的基础及决定力量是物质资料的生产方式）

历史是人民创造的，人们群众是社会形态变革的决定力量（社会形态的变革的决定力量是人民群众）

劳动者是生产力中最活跃的因素

实践是人的认识生产和发展的基础，也是真理与价值统一的基础

历史是无数个追求着自己目的的人的活动的合力

历史人物的出现体现了必然性与偶然性的统一

英雄的出现是合规律性与合目的性的统一（错）


自然地理环境不能脱离社会生产发生作用

社会历史发展的决定力量是生产方式（“高级词汇”）

社会历史存在和发展的前提是现实的人及其活动

科技

在社会历史发展：不决定
生产劳动中：决定


实践内容包括：物质生产实践、社会政治实践、科学文化实践，其中物质生产实践是人类最基本的实践活动

有什么样的生产力，就会形成什么样的生产关系（因为生产力决定生产关系）

两大规律：（可以联想到社会基本矛盾）

生产关系一定要适应生产力发展状况的规律
上层建筑一定要适应经济基础发展状况的规律


生产力是衡量社会进步的根本尺度

经济基础的性质由所支配地位的生产关系的性质决定

社会存在的核心是国家政权

生产力和生产关系的统一体是生产方式

社会发展是一个自觉的过程

阶级是一个经济实体，根源是经济（阶级是历史范畴也是经济范畴）

人的本质包含两方面内容

人与人区别：社会关系
人与动物区别：劳动


现实的人不是生物学意义的人

人民群众和历史的创造者只代表推动社会历史前进的力量的人（反动派不是两者）

只有代表推动社会发展的人才属于历史创造者，人人创造历史说法错误，但是人人创造属于自己的历史是正确的

不管什么历史人物都不能改变或决定历史发展总进程和总方向


第五章-资本主义的本质及规律
自然经济特征：自给自足，以使用价值为生产目的
商品经济特征：以交换为目的
商品经济产生的两个历史条件
社会分工的存在
生产资料和劳动产品属于不同的所有者


价值是交换价值的基础，交换价值是价值的表现形式，使用价值是交换价值的物质承担者
劳动是使用价值的源泉之一，不是唯一源泉（比如空气有使用价值，并非劳动所得）
商品一定是劳动产品，劳动产品不一定是商品（因为生产的东西不一定有用，虽然消费了脑力体力；或者是自给自足，不交换那也不是商品）
商品是劳动产品的基础之上进行交换
使用价值具有自然属性，而具体劳动形成使用价值，所以具体劳动也具有自然属性
同理抽象劳动形成价值，价值具有社会属性，那么抽象劳动也具有社会属性
使用价值是永恒的范畴，价值是一个历史范畴（有商品才有价值，无商品就无价值）
抽象劳动创造价值，具体劳动保存或转移价值
劳动力自身价值是由抽象劳动新创造的，劳动力新创造的价值大于劳动力自身的价值（理解：比如我去给别人打工，我创造的价值肯定会多于我的工资，也就是后半句的通俗解释，而我自身得到的工资，也就是劳动力（我的劳动力）自身价值，我得到的工资是我抽象劳动创造的）
具体劳动新创造劳动力自身的价值（错，是抽象劳动）
具体劳动转移劳动力自身的价值（错，是抽象劳动新创造劳动力自身的价值）


具体劳动创造商品的使用价值，转移生产资料的价值（比如用面粉，水，鸡蛋做面包，面包具有了使用价值）
私人劳动和社会劳动的矛盾（即私有制商品经济的基本矛盾）是其他商品经济一切矛盾的基础
具体劳动能否还原为抽象劳动取决于私人劳动和社会劳动能否实现统一（意思就是需要使用价值转化为价值才能被衡量，才能在商品交换中买卖）


商品交换是解决私人劳动和社会劳动之间矛盾的唯一途径
商品的价格围绕价值自发波动
价格是价值的货币表现
价值是商品的特有社会属性
资本是可以带来剩余价值的价值
货币并没有也不可能解决商品经济的基本矛盾（即私人劳动与社会劳动之间的矛盾），反而加深了矛盾
商品内在使用价值与价值的矛盾外在表现为商品与货币之间的对立
资本主义的基本矛盾：生产社会化和生产资料资本主义私人占有之间的矛盾
劳动力成为商品：标志着简单商品生产发展到资本主义商品生产的新阶段
劳动力不是劳动者
劳动力的使用即劳动
劳动力是指人的劳动能力，是人的脑力和体力的总和
资本是可以带来剩余价值的价值，这是资本的本质
奴隶社会：完全人身占有
封建社会：人身依附
资本主义：基于劳动者的完全的人身自由


雇佣工人的劳动时间：
必要劳动时间：再生产劳动力的价值
剩余劳动时间：无偿为资本家生产剩余价值


绝对剩余价值：直接延长剩余劳动时间
相对剩余价值：缩短必要劳动时间，以延长剩余劳动时间
源泉总结：
抽象劳动是价值的唯一源泉，具体劳动是使用价值的源泉（不唯一）
劳动力商品的使用价值即劳动 ，是价值的源泉
剩余劳动是剩余价值生产的唯一源泉
资本积累是资本主义扩大再生产的源泉
剩余价值是资本积累的源泉


剩余价值率=剩余价值/可变资本
利润率=剩余价值/（不变资本+可变资本）
利润率总是小于剩余价值率，掩盖了剥削
购买劳动力，获得剩余价值，货币也就转化为了资本
资本主义生产过程是劳动过程和价值增值过程的统一
资本不同部分在剩余价值生产过程中的不同作用：不变资本（V）、可变资本（C）
资本不同部分在价值流通和周转中的不同方式：固定资本和流动资本
固定资本：不变资本中的劳动资料（厂房、机器等）
流动资本：可变资本+不变资本中的原材料、燃料等


资本在循环中的不同职能：货币资本、生产资本、商品资本
在资本主义生产过程中 ，资本有机构成呈现不断提高的趋势，这是由资本无限追逐剩余价值的本性决定的
资本主义简单再生产的实质：物质资料再生产与资本主义生产关系再生产的统一
资本主义生产过程的特征：劳动过程和价值增殖过程的统一
生产资料的价值是通过工人的具体劳动转移到新产品中，劳动力价值是通过工人的劳动再生产出来的
马克思在哲学史上的两大贡献：
创立了唯物史观
形成了辩证唯物主义


马克思在理论上的两大历史贡献：
创立了唯物史观
创立了剩余价值学说


剩余价值是利润的本质，利润是剩余价值的转化形式
资本主义工资表现为劳动的价值或者价格，这是假象
资本主义工资本质上是劳动力的价值或价格
马克思经济学说核心内容与基石：剩余价值理论
理解政治经济学的枢纽：劳动二重性理论
唯物史观和剩余价值理论的发现、社会主义由空想变为科学
私有制商品经济的基本矛盾：私人劳动和社会劳动的矛盾
资本主义的基本矛盾：生产资料资本主义私人占有和生产社会化之间的矛盾
资本主义国家职能：对内实行政治统治和社会管理，对外进行国际交往和维护国家安全及利益
资本主义国家的本质上是资产阶级进行资本统治的工具
资本主义国家的对外职能是对内政治统治的延伸

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/07/10/nvim%E9%94%AE%E4%BD%8D/" title="nvim键位">nvim键位</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-10T02:28:58.000Z" title="发表于 2022-07-10 10:28:58">2022-07-10</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:42:10.712Z" title="更新于 2022-10-05 14:42:10">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">1. 文件目录


快捷键
功能



&lt;space&gt; + e
开关目录树


o
打开文件/打开文件目录


h
折叠一个层级目录


d
删除文件


a
新建文件/新建文件夹


r
重命名文件


x
剪切文件


p
粘贴


gy
拷贝文件绝对路径


Y
拷贝文件相对路径


y
拷贝文件名


更多快捷键见 nvim-tree.lua 顶部注释
2. 常规动作


快捷键
功能



&lt;space&gt; + o
打开大纲


&lt;space&gt; + f
搜索文件


&lt;space&gt; + F
搜索字符(依赖rg，可传入rg的各类参数，实现忽略大小写、正则表达式搜索等)


&lt;space&gt; + p
切换项目


&lt;space&gt; + P
切换会话


&lt;space&gt; + r
最近文件


&lt;space&gt; + R
打开替换窗口


STAB
打开左边标签页


TAB
打开右边标签页


&lt;ctrl&gt; + h/j/k/l
进入左边/下边/上边/右边窗口


&lt;ctrl&gt; + \
打开/关闭终端


&lt;leader&gt; + q
关闭窗口


&lt;leader&gt; + D
关闭buffer


&lt;leader&gt; + q
预览替换位置


&lt;leader&gt; + c
显示替换命令


&lt;leader&gt; + o
查看菜单（忽略大小写、忽略隐藏文件）


&lt;leader&gt; + rc
替换当前行


&lt;leader&gt; + R
替换全部


ti
大小写忽略切换


th
是否搜索隐藏文件


cs&quot;&#39;
“Hello world!”  –&gt; ‘Hello world!’


cs&#39;&#123;/&#125;
‘Hello world!’  –&gt; { Hello world! } / {Hello world!} ，即 { 有空格，}无空格，其他符号同理


ds&quot;
完全删除”


&lt;leader&gt;&lt;leader&gt;+hh
高亮选中行


&lt;leader&gt;&lt;leader&gt;+hr
取消高亮行


&lt;leader&gt; + D
关闭buffer


3. 代码导航


快捷键
功能



&lt;leader&gt; + t
在声明/定义间来回跳转 (c和cpp项目，需要导出compile_commands.json文件)


&lt;leader&gt; + u
查看代码引用


&lt;leader&gt;+ in
函数调用链


]]
跳转到下一个函数头


][
跳转到下一个函数尾


[[
跳转到上一个函数头


[]
跳转到上一个函数尾


gh
查看函数签名+注释文档


gl
查看代码诊断


&lt;leader&gt; + rn
重命名符号


&lt;space&gt; + s
搜索当前窗口下的符号 (类似vscode的 @)


&lt;space&gt; + S
搜索项目下的符号 (类似vscode #)


4. 代码诊断


快捷键
功能



&lt;leader&gt; + dj
下一个错误


&lt;leader&gt;+ dk
上一个错误


&lt;space&gt; + Td
错误窗口 （类似vscode problem pane)


5. Git操作


快捷键
功能



&lt;leader&gt; + j
下一个hunk


&lt;leader&gt; + k
上一个hunk


&lt;leader&gt; + hs
stage hunk


&lt;leader&gt; + hu
unstage hunk


&lt;leader&gt; + hr
reset hunk


&lt;leader&gt; + hp
preview hunk


&lt;space&gt; + gd
diff file


&lt;space&gt; + gf
file history


&lt;space&gt; + gg
打开lazygit


6. Debug


快捷键
功能



&lt;leader&gt; + db
开关断点


&lt;leader&gt; + dc
条件断点


&lt;F5&gt;/&lt;F10&gt;
开始调试/continue


&lt;F4&gt;
结束调试会话


&lt;F6&gt;
stepover


&lt;F7&gt;
stepinto


&lt;F8&gt;
stepout


&lt;shift&gt; + k
变量悬浮窗（查看cursor下变量的值, 按两次&lt;shift&gt;+k使cursor聚焦到悬浮窗)


7. 可视操作


快捷键
功能



v[i/a]s
选中结构体


v[i/a]f
选中函数


&lt;F5&gt;/&lt;F10&gt;
开始调试/continue


&lt;F4&gt;
结束调试会话


&lt;F6&gt;
stepover


&lt;F7&gt;
stepinto


&lt;F8&gt;
stepout


&lt;shift&gt; + k
变量悬浮窗（查看cursor下变量的值, 按两次&lt;shift&gt;+k使cursor聚焦到悬浮窗)


8. 其他
cmake： &lt;space&gt; + c后，查看which key的提示
ultest: 单元测试插件， &lt;space&gt; + t
TodoList:  无快捷键，执行 :TodoTrouble查看
LocalHistory： 无快捷键， 执行 :LocalHistoryToggle查看
Lsp svr： &lt;space&gt;+li（小l和小i), 查看当前lsp状态， &lt;space&gt; + lI(小L和大I)安装lsp svr

vim-surround用例子来解释是最容易的。按cs&quot;&#39;里面
1&quot;Hello world!&quot;
将其更改为
1&#39;Hello world!&#39;
现在按cs&#39;&lt;q&gt;将其更改为
1&lt;q&gt;Hello world!&lt;&#x2F;q&gt;
要转一圈，请按cst&quot;获取
1&quot;Hello world!&quot;
要完全删除分隔符，请按ds&quot;。
1Hello world!
现在将光标放在“Hello”上，按ysiw](iw是一个文本对象)。
1[Hello] world!
让我们制作大括号并添加一些空格（使用&#125;而不是&#123;没有空格）：cs]&#123;
1&#123; Hello &#125; world!
yssb现在用or将整行括在括号中yss)。
1(&#123; Hello &#125; world!)
还原为原文：ds&#123;ds)
1Hello world!
强调你好：ysiw&lt;em&gt;
1&lt;em&gt;Hello&lt;&#x2F;em&gt; world!
最后，让我们试试视觉模式。按大写 V（用于线性视觉模式），然后按S&lt;p class=&quot;important&quot;&gt;。
123&lt;p class&#x3D;&quot;important&quot;&gt;  &lt;em&gt;Hello&lt;&#x2F;em&gt; world!&lt;&#x2F;p&gt;

这个插件对于 HTML 和 XML 编辑来说非常强大，目前在 Vim 领域似乎还没有填补这个利基市场。（与 HTML/XML 插入相反，有许多插件可用）。同时添加、更改和删除标签对是一件轻而易举的事。

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/06/18/Git%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8/" title="Git在项目中的使用">Git在项目中的使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-18T01:19:37.000Z" title="发表于 2022-06-18 09:19:37">2022-06-18</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:41:32.236Z" title="更新于 2022-10-05 14:41:32">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/tools/">tools</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Git/">Git</a></span></div><div class="content">
Git 常用命令level intro4
level rampup3
level mixed1
1234567891011121314151617181920212223242526- git add .- git commit -m 说明- git push- git pull- git rm -r –cached filePath : 清除缓存-指定路径- git rm -r –cached . ：清除缓存-清除全部缓存- git clone- git remote add origin SSH地址：链接远程仓库地址- git remote remove origin：移除远程仓库地址- git remote -v：查看远程仓库地址$ git commit$ git branch &lt;branch_name&gt;$ git checkout &lt;branch_name&gt;$ git checkout -b &lt;branch_name&gt;$ git merge &lt;branch_name&gt;	# 把 branch_name 分支合并到当前所处分支$ git rebase &lt;branch_name&gt;$ git checkout &lt;has&gt;$ git ./git/HEAD # 查看 HEAD 指向$ git symbolic-ref HEAD	# 查看 HEAD 指向$ git branch -f main HEAD~3	 # 将 main 分支强制指向 HEAD 的第 3 级父提交$ git reset HEAD^	# 本地分支撤回$ git revert HEAD 	# 远程分支撤回$ git cherry-pick &lt;name&gt; [&lt;name&gt; ...]$ git rebase -i HEAD^




二、操作方面
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/06/10/ArchLinux%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8/" title="ArchLinux外接显示器">ArchLinux外接显示器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-10T02:28:58.000Z" title="发表于 2022-06-10 10:28:58">2022-06-10</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:51:55.818Z" title="更新于 2022-10-05 14:51:55">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
为什么会有这一篇博客？
我用的是 ArchLinux+DWM，我尝试连接HDMI无法输出到外接显示器上，下面记录了解决问题的过程，由于这个问题牵涉到了显卡，所以以前遇到的显卡切换问题在这里一并解决了，于此同时画面撕裂的问题也得以解决！

前言我尝试通过HDMI连接外接显示器，然后我通过xrandr命令查看输出如下，似乎没有检测到HDMI接口的输出设备
1234567891011121314151617181920212223➜  ~ xrandrScreen 0: minimum 8 x 8, current 1920 x 1080, maximum 32767 x 32767eDP1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 340mm x 190mm   1920x1080     60.00*+  59.93   1680x1050     59.88   1400x1050     59.98   1600x900      60.00    59.95    59.82   1280x1024     60.02   1400x900      59.96    59.88   1280x960      60.00   1368x768      60.00    59.88    59.85   1280x800      59.81    59.91   1280x720      59.86    60.00    59.74   1024x768      60.00   1024x576      60.00    59.90    59.82   960x540       60.00    59.63    59.82   800x600       60.32    56.25   864x486       60.00    59.92    59.57   640x480       59.94   720x405       59.51    60.00    58.99   640x360       59.84    59.32    60.00DP1 disconnected (normal left inverted right x axis y axis)VIRTUAL1 disconnected (normal left inverted right x axis y axis)
于是通过上网冲浪，在一个社区看到了一个帖子，这里我截取部分内容(文章链接见最下)

英伟达显卡闭源驱动我已经安装了，也知道独显似乎没起作用，以前也尝试切换独显，但是切换失败了，这个问题就一直没有得到解决，这次要把这个问题给解决掉！
通过nvidia-settings查看显卡信息

根据ArchWiki的描述，切换显卡的方案如下：
使用可切换显卡使用 PRIME 渲染卸换（render offload）这是英伟达为支持可切换显卡提供的官方方法。
详情请参见 PRIME#PRIME render offload。
使用 nouveau要了解显卡切换相关内容，请参见 PRIME；要了解开源英伟达驱动相关内容，请参见 nouveau。
使用大黄蜂（Bumblebee）请参见 Bumblebee。
使用 nvidia-xrun请参见 nvidia-xrun。
使用 optimus-manager请参见 Optimus-manager 上游文档。其中包含了在 Arch Linux 系统上的安装和配置方法。


我选择用optimus-manager工具（原因还是以前用这个显卡切换没成功，打算继续尝试）

ptimus-manager
切换独显
12345678➜  ~ optimus-manager --switch nvidiaERROR: a GPU setup was initiated but Xorg post-start hook did not run.Log at /var/log/optimus-manager/switch/switch-20220610T152810.logIf your login manager is GDM, make sure to follow those instructions:https://github.com/Askannz/optimus-manager#important--gnome-and-gdm-usersIf your display manager is neither GDM, SDDM nor LightDM, or if you don&#x27;t use one, read the wiki:https://github.com/Askannz/optimus-manager/wiki/FAQ,-common-issues,-troubleshootingCannot execute command because of previous errors.
解决方案，根据解决方案的描述，运行prime-offload命令
123456789101112➜  ~ prime-offload[8] INFO: # Xorg post-start hook[1946] INFO: Running /etc/optimus-manager/xsetup-integrated.sh[1987] INFO: Writing state &#123;&#x27;type&#x27;: &#x27;done&#x27;, &#x27;switch_id&#x27;: &#x27;20220610T152810&#x27;, &#x27;current_mode&#x27;: &#x27;integrated&#x27;&#125;[1988] INFO: Xorg post-start hook completed successfully.➜  ~ optimus-manager --statusOptimus Manager (Client) version 1.4Current GPU mode : integratedGPU mode requested for next login : no changeGPU at startup : integratedTemporary config path: no


再次切换独显
12345678➜  ~ optimus-manager --switch nvidiaWARNING : no power management option is currently enabled (this is the default since v1.2). Switching between GPUs will work but you will likely experience poor battery life.Follow instructions at https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options to enable power management.You are about to switch GPUs. This will forcibly close all graphical sessions and all your applications WILL CLOSE.(you can pass the --no-confirm option to disable this warning)Continue ? (y/N)&gt;






xrandr
设置主屏：xrandr --output eDP-1 --auto --primary
调整副屏在主屏左边：xrandr --output HDMI-1-0 --left-of eDP-1
副屏同步主屏：xrandr --output HDMI-1-0 --same-as eDP-1
自动调整分辨率和位置：xrandr --output HDMI-1-0 --auto
关闭显示器：xrandr --output HDMI-1-0 --off
打开关闭的显示器：xrandr --output HDMI-1-0 --auto
设置分辨率：xrandr --output HDMI-1-0 --mode 1920x1080

配置文件12345678910111213141516171819202122232425262728293031➜  optimus-manager cat optimus-manager.conf[amd]DRI=3driver=modesettingtearfree=[intel]DRI=3accel=driver=modesettingmodeset=yestearfree=[nvidia]DPI=96PAT=yesallow_external_gpus=nodynamic_power_management=noignore_abi=nomodeset=yesoptions=overclocking[optimus]auto_logout=yespci_power_control=nopci_remove=nopci_reset=nostartup_auto_battery_mode=integratedstartup_auto_extpower_mode=nvidiastartup_mode=nvidiaswitching=bbswitch


禁用独显
ArchWiki已经说的很清楚了，直接看官方解决方案

根据上面ArchWiki的描述，写了一个简单的脚本
12345678910#删除配置文件sudo rm -rf /etc/X11/xorg.conf.d/20-nvidia.conf#将内核模块添加到模块列表以在引导时加载echo &#x27;acpi_call&#x27; | sudo tee /etc/modules-load.d/acpi_call.conf# 将/etc/tmpfiles.d/acpi_call.conf文件由systemd启动时加载echo &#x27;w /proc/acpi/call - - - - \\_SB.PCI0.PEG0.PEGP._OFF&#x27; | sudo tee /etc/tmpfiles.d/acpi_call.confreboot




仅使用英伟达显卡根据上面禁用独显的脚本内容知晓，需要删除/etc/modules-load.d/acpi_call.conf和/etc/tmpfiles.d/acpi_call.conf文件， 脚本如下
1234567891011121314151617181920212223242526#!/bin/bashecho &#x27;您将切换至独显&#x27;echo &#x27;输入密码回车将重启，请将工作区文件保存好！！！&#x27;# 删除自动加载的acpi_call模块sudo rm -rf /etc/modules-load.d/acpi_call.conf# 将systemd启动时加载的文件删除(该文件是将独显断电)sudo rm -rf /etc/tmpfiles.d/acpi_call.conf#获取NVIDIA显卡的BusIDNVIDIA_BusID=`lspci | egrep &#x27;VGA|3D&#x27; | grep &#x27;NVIDIA&#x27; | cut -d &#x27; &#x27; -f 1 | sed -r &#x27;s/0?(.)/\1/&#x27; | sed -e &#x27;s/:0/:/g&#x27; -e &#x27;s/\./:/g&#x27;`#写入Xorg配置文件echo &#x27;Section &quot;Module&quot;	Load &quot;modesetting&quot;EndSectionSection &quot;Device&quot;	Identifier &quot;nvidia&quot;	Driver &quot;nvidia&quot;	BusID &quot;PCI:&#x27;$NVIDIA_BusID&#x27;&quot;      	Option &quot;AllowEmptyInitialConfiguration&quot;EndSection&#x27; | sudo tee /etc/X11/xorg.conf.d/20-nvidia.conf &gt; /dev/nullreboot


仅使用Intel显卡脚本如下
123456789101112131415#!/bin/bashecho &#x27;您将切换至核显(独显将会断电)&#x27;echo &#x27;输入密码回车将重启，请将工作区文件保存好！！！&#x27;#删除配置文件sudo rm -rf /etc/X11/xorg.conf.d/20-nvidia.conf#将内核模块添加到模块列表以在引导时加载echo &#x27;acpi_call&#x27; | sudo tee /etc/modules-load.d/acpi_call.conf# 将/etc/tmpfiles.d/acpi_call.conf文件由systemd启动时加载echo &#x27;w /proc/acpi/call - - - - \\_SB.PCI0.PEG0.PEGP._OFF&#x27; | sudo tee /etc/tmpfiles.d/acpi_call.confreboot










参考链接：

https://wiki.archlinux.org/title/NVIDIA_Optimus_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
https://wiki.archlinux.org/title/Hybrid_graphics_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
https://wiki.archlinux.org/title/PRIME_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
https://bbs.deepin.org/post/192750
https://github.com/Askannz/optimus-manager/issues/356

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/06/10/nvm%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" title="nvm的安装与使用">nvm的安装与使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-10T02:28:58.000Z" title="发表于 2022-06-10 10:28:58">2022-06-10</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:41:39.221Z" title="更新于 2022-10-05 14:41:39">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
NVM
安装sudo pacman -S nvm
12345678910111213141516171819202122232425262728(1/1) 正在安装 nvm                                           [################################] 100%You need to source nvm before you can use it. Do one of the followingor similar depending on your shell (and then restart your shell):  echo &#x27;source /usr/share/nvm/init-nvm.sh&#x27; &gt;&gt; ~/.bashrc  echo &#x27;source /usr/share/nvm/init-nvm.sh&#x27; &gt;&gt; ~/.zshrcYou can now install node.js versions (e.g. nvm install 10) andactivate them (e.g. nvm use 10).init-nvm.sh is a convenience script which does the following:[ -z &quot;$NVM_DIR&quot; ] &amp;&amp; export NVM_DIR=&quot;$HOME/.nvm&quot;source /usr/share/nvm/nvm.shsource /usr/share/nvm/bash_completionsource /usr/share/nvm/install-nvm-execYou may wish to customize and put these lines directly in your.bashrc (or similar) if, for example, you would like an NVM_DIRother than ~/.nvm or you don&#x27;t want bash completion.See the nvm readme for more information: https://github.com/creationix/nvmnvm 的可选依赖    bash: bash completion [已安装]:: 正在运行事务后钩子函数...(1/1) Arming ConditionNeedsUpdate...


我使用的是zsh
1234➜  ~ echo &#x27;source /usr/share/nvm/init-nvm.sh&#x27; &gt;&gt; ~/.zshrc➜  ~ source .zshrc➜  ~ nvm -v0.39.1




安装多个node
nvm install 8

nvm install 12

安装路径：~/.nvm/versions/node/

查看node
123456789101112131415161718➜  ~ nvm list         v8.0.0      v12.22.12-&gt;       systemdefault -&gt; 8.0 (-&gt; v8.0.0)iojs -&gt; N/A (default)unstable -&gt; N/A (default)node -&gt; stable (-&gt; v12.22.12) (default)stable -&gt; 12.22 (-&gt; v12.22.12) (default)lts/* -&gt; lts/gallium (-&gt; N/A)lts/argon -&gt; v4.9.1 (-&gt; N/A)lts/boron -&gt; v6.17.1 (-&gt; N/A)lts/carbon -&gt; v8.17.0 (-&gt; N/A)lts/dubnium -&gt; v10.24.1 (-&gt; N/A)lts/erbium -&gt; v12.22.12lts/fermium -&gt; v14.19.3 (-&gt; N/A)lts/gallium -&gt; v16.15.1 (-&gt; N/A)






切换nodee版本
如切换至node8：nvm use 8
1234➜  ~ nvm use 8Now using node v8.0.0 (npm v5.0.0)➜  ~ node -vv8.0.0


如果原来有node，需要切换至原来系统的：nvm use system
1234➜  ~ nvm use systemNow using system version of node: v17.9.0 (npm v8.5.4)➜  ~ node -vv17.9.0




npm 包全局
使用 nvm 工具下载的 node，通过 npm 安装的全局包
1234➜  ~ nvm use 8Now using node v8.0.0 (npm v5.0.0)➜  ~ npm root -g/home/minghui/.nvm/versions/node/v8.0.0/lib/node_modules


系统的 node，通过 npm 安装的全局包
12➜  ~ npm root -g/usr/lib/node_modules




</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/21/SMB/" title="SMB文件共享">SMB文件共享</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-21T02:28:58.000Z" title="发表于 2022-05-21 10:28:58">2022-05-21</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-30T05:22:53.945Z" title="更新于 2022-05-30 13:22:53">2022-05-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ArchLinux/">ArchLinux</a></span></div><div class="content">
安装
安装 samba
sudo pacman -S samba

创建配置文件sudo nvim /etc/samba/smb.conf
实例内容 这里 获取


用户配置添加用户
Samba 需要 Linux 账户才能使用 - 可以使用已有账户或 创建新用户.
虽然用户名可以和 Linux 系统共享，Samba 使用单独的密码管理，将下面的 samba_user 替换为选择的 Samba 用户


注意：添加的用户必须是系统用户

123456$ sudo smbpasswd -a minghuiNew SMB password:Retype new SMB password:Added user minghui.$ sudo pdbedit -Lminghui:1000:
创建sambashare用户组
sambashare 名字不要改

1$ sudo groupadd sambashare
然后将samba用户添加到sambashare组
1$ sudo usermod -aG sambashare minghui


共享文件夹将要分享的文件夹用户组改为sambashare
1$ sudo chown root:sambashare /mnt/move_disk/
以下的操作将会让 sambashare 群组中的用户拥有读取，写入和执行此文件夹中内容的权限：

1770的1是设置粘滞位，创建的文件只有root和文件所属者才可删除

1$ sudo chmod 1770 /mnt/move_disk


修改配置文件实现共享
中括号里面的是名称，即共享文件夹的名称

123456789[move_disk]   comment = Mary&#x27;s and Fred&#x27;s stuff   path = /mnt/move_disk   valid users = minghui   browsable = yes   public = yes   writable = yes   printable = no   create mask = 0765




启动服务12$ systemctl enable smb.service$ systemctl start smb.service


参数说明
path  =  ：共享目录路径
public = yes/no：设置共享是否允许guest账户访问
browseable  =  yes/no：设置共享是否可浏览，如果no就表示隐藏，需要通过IP+共享名称进行访问（即其他设备看不到这个共享）
read only = yes/no：设置共享是否具有只读权限
writable = yes/no：设置共享是否具有可写权限
printable = yes/no：打印机
write list = username：设置在共享具有写入权限的用户，例如例如write list = user1,user2,@group1,@group2（多用户或组使用逗号隔开，@group表示group用户组）
valid users = username：设置允许访问共享的用户，例如valid users = user1,user2,@group1,@group2（多用户或组使用逗号隔开，@group表示group用户组）
invalid users = username：设置不允许访问共享的用户
create mask = 0764：创建的文件权限为 764
directory mode = 0755：创建的文件目录为 755

1234567891011[public]   comment = Public Stuff   path = /home/minghui/samba   public = no   browseable = yes   read only = yes   printable = no   valid users = @sambashare   write list = @sambashare   create mask = 0764   directory mask = 0755

注意：writable与write list有个奇怪的问题，见下


writable = no
write list = @sambashare
这样写同样能够写入，说明后者生效了

writable = yes
write list = 
这样写同样能够写入，说明前者生效了


避免出现这样的情况，统一使用write list来控制读权限
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/21/JavaScript%E5%8E%9F%E5%9E%8B/" title="原型">原型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-21T01:28:58.000Z" title="发表于 2022-05-21 09:28:58">2022-05-21</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-24T03:41:23.090Z" title="更新于 2022-05-24 11:41:23">2022-05-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/JavaScript/">JavaScript</a></span></div><div class="content">原型理解
默认情况下，所有函数都有 F.prototype = &#123;constructor：F&#125;，所以我们可以通过访问它的 &quot;constructor&quot; 属性来获取一个对象的构造器


例题
理解对象的__proto__

1234567891011function Rabbit() &#123; &#125;// by default:// Rabbit.prototype = &#123; constructor: Rabbit &#125;let rabbit = new Rabbit(); // inherits from &#123;constructor: Rabbit&#125;console.log(rabbit.constructor === Rabbit); // true (from prototype)console.log(rabbit.__proto__.constructor === Rabbit)console.dir(rabbit.__proto__.constructor)console.dir(rabbit.constructor)console.log(rabbit.__proto__.constructor === rabbit.constructor)

理解prototype和__proto__

123456789101112131415161718let animal = &#123;  eats: true&#125;;function Rabbit(name) &#123;  this.name = name;&#125;Rabbit.prototype = animal;let rabbit = new Rabbit(&quot;White Rabbit&quot;); //  rabbit.__proto__ == animal// alert(rabbit.eats); // trueconsole.dir(rabbit)console.dir(Rabbit)console.log(rabbit.__proto__ === Rabbit.prototype);console.dir(rabbit.__proto__)console.dir(Rabbit.prototype)


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/20/Linux%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%20(copy)/" title="Linux进程和服务管理">Linux进程和服务管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-20T01:28:58.000Z" title="发表于 2022-05-20 09:28:58">2022-05-20</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-25T02:24:44.776Z" title="更新于 2022-05-25 10:24:44">2022-05-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
实验步骤
在Shell中如何检测上一条命令是否成功执行。
1   



在/tmp目录中为/etc/passwd文件创建一个备份，备份文件名格式为”/etc/passwd.bak.系统当前时间”，要求自动将系统当前日期替换到文件名的指定位置
1   





</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/20/Linux%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/" title="Linux进程和服务管理">Linux进程和服务管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-20T01:28:58.000Z" title="发表于 2022-05-20 09:28:58">2022-05-20</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-02T01:57:29.584Z" title="更新于 2022-06-02 09:57:29">2022-06-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
实验步骤
分屏查看当前系统中所有进程的详细信息。
12345678910111213141516171819202122232425262728293031USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMANDroot          1  0.0  0.2 125644  4088 ?        Ss   13:29   0:02 /usr/lib/systemd/systemd --switched-root --system --deserialize 21root          2  0.0  0.0      0     0 ?        S    13:29   0:00 [kthreadd]root          3  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/0]root          5  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/0:0H]root          7  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/0]root          8  0.0  0.0      0     0 ?        S    13:29   0:00 [rcu_bh]root          9  0.1  0.0      0     0 ?        S    13:29   0:03 [rcu_sched]root         10  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/0]root         11  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/1]root         12  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/1]root         13  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/1]root         15  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/1:0H]root         16  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/2]root         17  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/2]root         18  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/2]root         20  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/2:0H]root         21  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/3]root         22  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/3]root         23  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/3]root         25  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/3:0H]root         27  0.0  0.0      0     0 ?        S    13:29   0:00 [kdevtmpfs]root         28  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [netns]root         29  0.0  0.0      0     0 ?        S    13:29   0:00 [khungtaskd]root         30  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [writeback]root         31  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kintegrityd]root         32  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [bioset]root         33  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kblockd]--More--


查看静态的所有进程统计信息，过滤包含bash的进程信息。
123456789101112131415161718192021222324252627minghui@Linux ~ $ ps aux | grep -v bashUSER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMANDroot          1  0.0  0.2 125644  4088 ?        Ss   13:29   0:02 /usr/lib/systemd/systemd --switched-root --system --deserialize 21root          2  0.0  0.0      0     0 ?        S    13:29   0:00 [kthreadd]root          3  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/0]root          5  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/0:0H]root          7  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/0]root          8  0.0  0.0      0     0 ?        S    13:29   0:00 [rcu_bh]root          9  0.1  0.0      0     0 ?        R    13:29   0:04 [rcu_sched]root         10  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/0]root         11  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/1]root         12  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/1]root         13  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/1]root         15  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/1:0H]root         16  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/2]root         17  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/2]root         18  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/2]root         20  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/2:0H]root         21  0.0  0.0      0     0 ?        S    13:29   0:00 [watchdog/3]root         22  0.0  0.0      0     0 ?        S    13:29   0:00 [migration/3]root         23  0.0  0.0      0     0 ?        S    13:29   0:00 [ksoftirqd/3]root         25  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [kworker/3:0H]root         27  0.0  0.0      0     0 ?        S    13:29   0:00 [kdevtmpfs]root         28  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [netns]root         29  0.0  0.0      0     0 ?        S    13:29   0:00 [khungtaskd]root         30  0.0  0.0      0     0 ?        S&lt;   13:29   0:00 [writeback]# 下面省略


查看进程的动态信息，了解前3个进程的PID、CPU及内存等系统资源占用情况。

使用top命令查看动态信息


PID：进程ID
USER：进程所有者的用户名
PR：进程调度优先级
NI：进程 nice 值（优先级），越小的值代表越高的优先级
VIRT：进程使用的虚拟内存
RES：进程使用的物理内存（不包括共享内存）
SHR：进程使用的共享内存
CPU：进程使用的CPU占比
MEM：进程使用的内存占比
TIME：进程启动后到现在所用的全部CPU时间
COMMAND：进程的启动命令（默认只显示二进制，top -c能够显示命令行和启动参数）

12345678910top - 14:20:00 up 50 min,  1 user,  load average: 0.03, 0.06, 0.10Tasks: 140 total,   1 running, 139 sleeping,   0 stopped,   0 zombie%Cpu(s):  2.6 us,  0.8 sy,  0.0 ni, 96.6 id,  0.0 wa,  0.0 hi,  0.1 si,  0.0 stKiB Mem :  1867048 total,   866528 free,   524292 used,   476228 buff/cacheKiB Swap:  4193272 total,  4193272 free,        0 used.  1072640 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND     9 root      20   0       0      0      0 S   0.3  0.0   0:04.80 rcu_sched    56 root      20   0       0      0      0 S   0.3  0.0   0:04.25 kworker/0:2  2193 redis     20   0  162568   9924   1344 S   0.3  0.5   0:14.89 redis-server


将/var目录复制到/tmp目录，要求在后台执行该命令。
12345minghui@Linux ~ $ sudo cp /var /tmp -r &amp;[2] 6971minghui@Linux ~ $ jobs -l[1]  - 6945 running    cp /var /tmp -r[2]  + 6971 running    sudo cp /var /tmp -r


利用 Vi编辑器编辑/et/inittab 文件，程序运行之后， 将其转入后台执行。

首先通过vi /etc/inittab命令编辑文件，然后通过键盘&lt;CTRL&gt;+Z组合键将程序转为后台执行

1234567891011121314151617181920212223242526272829303132minghui@Linux ~ $ vi /etc/inittab## Ctrl-Alt-Delete is handled by /usr/lib/systemd/system/ctrl-alt-del.target## systemd uses &#x27;targets&#x27; instead of runlevels. By default, there are two main targets:## multi-user.target: analogous to runlevel 3# graphical.target: analogous to runlevel 5## To view current default target, run:# systemctl get-default## To set a default target, run:# systemctl set-default TARGET.target#~~~~~~~~~~~~&quot;/etc/inittab&quot; [只读] 17L, 511C                                         ^Z        16,1         全部[1]  + 7218 suspended  vim /etc/inittabminghui@Linux ~ $ jobs -l[1]  + 7218 suspended  vim /etc/inittab


查看当前终端中在后台运行的进程，并显示其PID。

当前后台只有一个进程，进程PID为7218

123minghui@Linux / $ jobs -l[1]  + 7218 suspended  vim /etc/inittabminghui@Linux / $


强制终止Vi编辑器进程。

先通过jobs -l命令查看进程PID，然后通过kill命令杀死改PID对应的进程，如果没有杀死可以使用参数-9强制杀死进程

123456789minghui@Linux / $ jobs -l[1]  + 7218 suspended  vim /etc/inittabminghui@Linux / $ kill 7218minghui@Linux / $ jobs -l[1]  + 7218 suspended  vim /etc/inittabminghui@Linux / $ kill -9 7218[1]  + 7218 killed     vim /etc/inittabminghui@Linux / $ jobs -lminghui@Linux / $


设置Linux系统每次开机后自动进人字符模式界面。

通过命令systemctl set-default设置默认运行级别，systemctl get-default为查看默认运行级别


设置为字符模式界面运行状态：systemctl set-default multi-user.target
设置为图形模式界面运行状态：systemctl set-default graphical.target

123456minghui@Linux ~ $ systemctl set-default multi-user.targetFailed to set default target: Interactive authentication required.minghui@Linux ~ $ sudo systemctl set-default multi-user.target[sudo] minghui 的密码：minghui@Linux ~ $ systemctl get-defaultmulti-user.target


对比图形模式与字符模式对内存的占用情况。

字符模式
1234minghui@Linux ~ $ free -h              total        used        free      shared  buff/cache   availableMem:           1.8G        511M         86M         84M        1.2G        1.0GSwap:          4.0G          0B        4.0G


图形模式
1234minghui@Linux ~ $ free -h              total        used        free      shared  buff/cache   availableMem:           1.8G        650M         68M        122M        1.1G        890MSwap:          4.0G          0B        4.0G




编辑计划任务，每天22:30查看内存使用情况,并将结果追加保存到/var/log/mem.log文件中

通过命令crontab-e配置计划任务

编写计划任务
130 22 * * * /usr/bin/free -h &gt;&gt; /var/log/mem.log
通过命令crontab -l查看任务
12minghui@Linux ~ $ crontab -l30 22 * * * /usr/bin/free -h &gt;&gt; /var/log/mem.log




编辑计划任务，每周二、周四和周日备份/var/log/messages文件至/tmp目录中，文件名称格式为“messags-yyyymmdd”。

关于yyyymmdd日期输出使用+%Y%m%d

1234minghui@Linux ~ $ date +%Y%m%d20220520minghui@Linux ~ $ date +%y%m%d220520



通过命令crontab-e配置计划任务

编写计划任务，时间为每周的2,4,7的24点整
10 0 * * 2,4,7 /usr/bin/cp /var/log/messages /tmp/messages-$(date +\%Y\%m\%d)


通过命令crontab -l查看任务
123minghui@Linux ~ $ crontab -l30 22 * * * /usr/bin/free -h &gt;&gt; /var/log/mem.log0 0 * * 2,4,7 /usr/bin/cp /var/log/messages /tmp/messages-$(date +\%Y\%m\%d)




编辑计划任务，在11月份的每天6:00~12:00，每隔2h执行一次/usr/bin/httpd.sh脚本文件。

通过命令crontab-e配置计划任务

编写计划任务，时间为每周的2,4,7的24点整
10 6-12/2 * 11 * /usr/bin/httpd.sh


通过命令crontab -l查看任务
1234minghui@Linux ~ $ crontab -l30 22 * * * /usr/bin/free -h &gt;&gt; /var/log/mem.log0 0 * * 2,4,7 /usr/bin/cp /var/log/messages /tmp/messages-$(date +\%Y\%m\%d)0 6-12/2 * 11 * /usr/bin/httpd.sh










</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/13/IDEA-%E6%96%B0%E9%A1%B9%E7%9B%AEmaven%E9%85%8D%E7%BD%AE%E9%87%8D%E7%BD%AE%E9%97%AE%E9%A2%98/" title="IDEA-新项目 maven 配置重置问题">IDEA-新项目 maven 配置重置问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-13T01:28:58.000Z" title="发表于 2022-05-13 09:28:58">2022-05-13</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-24T03:40:47.158Z" title="更新于 2022-05-24 11:40:47">2022-05-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java/">java</a></span></div><div class="content">
问题描述IDEA 打开一个新项目时，Maven 的配置都会恢复成默认值，所以每次都还要打开设置去配置 Maven，这很麻烦！
解决思路既然每次打开新项目都会重置 Maven 的配置，说明他有一个默认的全局配置
找到 IDEA 的全局配置文件并修改 Maven 配置部分即可达到目的
Linux 位置是再家目录下的.conf目录下，即~/.config/JetBrains/IntelliJIdea2021.3/options/project.default.xml
Windows 位置应该也是再家目录下，有一个.IntelliJIdeaxxx的隐藏目录
找到之后修改即可，重启 IDEA 生效！


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/05/05/Oracle11g%E5%AE%9E%E9%AA%8C%E5%85%AD%EF%BC%9AOracle-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/" title="Oracle-PL/SQL程序设计">Oracle-PL/SQL程序设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-05T02:28:58.000Z" title="发表于 2022-05-05 10:28:58">2022-05-05</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-07T15:59:04.731Z" title="更新于 2022-05-07 23:59:04">2022-05-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的掌握Oracle中PL/SQL程序的基本编写方法
实验内容
编写一个PL/SQL块，显示所有员工的姓名、员工号、工资、部门号以及所在部门领导的姓名，要求分部门来显示。

此题可能是错解，请理性看待！

PL/SQL块内容如下：
123456789101112131415161718DECLARE  type emp_table_type is table of emp%rowtype;  v_emp emp_table_type;BEGIN  select * bulk collect into v_emp from emp order by deptno;  for v_i in v_emp.first..v_emp.last loop      dbms_output.put_line(&#39;员工号:&#39; || v_emp(v_i).empno || chr(9) ||                               &#39;姓名:&#39; || v_emp(v_i).ename || chr(9) ||                               &#39;工作职位:&#39; || v_emp(v_i).job || chr(9) ||                               &#39;部门领导:&#39; || v_emp(v_i).mgr || chr(9) ||                               &#39;入职时间:&#39; || v_emp(v_i).hiredate || chr(9) ||                                &#39;员工薪水:&#39; || v_emp(v_i).sal || chr(9) ||                               &#39;奖金:&#39; || v_emp(v_i).comm || chr(9) ||                               &#39;部门编号:&#39; || v_emp(v_i).deptno);  end loop;END;&#x2F;

输出结果：


编写一个PL/SQL块，输出所有比本部门平均工资高五分之一的员工信息。 PL/SQL块
1234567891011121314151617181920212223DECLARE  type emp_table_type is table of emp%rowtype;  v_emp emp_table_type;BEGIN  select * bulk collect into v_emp from emp A_EMP where sal&gt;1.2*(    select avg(sal) from emp       where deptno&#x3D;A_EMP.deptno)  order by deptno;  for v_i in v_emp.first..v_emp.last    loop       dbms_output.put_line(&#39;员工号:&#39; || v_emp(v_i).empno || chr(9) ||                           &#39;姓名:&#39; || v_emp(v_i).ename || chr(9) ||                           &#39;工作职位:&#39; || v_emp(v_i).job || chr(9) || chr(9) ||                           &#39;部门领导:&#39; || v_emp(v_i).mgr || chr(9) ||                           &#39;入职时间:&#39; || v_emp(v_i).hiredate || chr(9) ||                            &#39;员工薪水:&#39; || v_emp(v_i).sal || chr(9) ||                           &#39;奖金:&#39; || v_emp(v_i).comm || chr(9) ||                           &#39;部门编号:&#39; || v_emp(v_i).deptno);    end loop;END;&#x2F;
输出结果：


查询姓为’Li’的员工信息。 若该员工不存在，则插入一条记录，员工姓为’Li’，其他字段值自定。
12345678910111213141516171819202122DECLARE  c_emp emp%ROWTYPE;BEGIN   -- 如果没查到会激发 NO_DATA_FOUND 异常   SELECT * INTO c_emp FROM emp WHERE ename LIKE &#39;Li%&#39;;     dbms_output.put_line(&#39;员工号:&#39; || c_emp.empno ||                        &#39;，姓名:&#39; || c_emp.ename ||   										 &#39;，岗位:&#39; || c_emp.job ||   										 &#39;，入职时间:&#39; || c_emp.hiredate ||   										 &#39;，工资:&#39; || c_emp.SAL ||    										 &#39;，部门号:&#39; || c_emp.DeptNo);EXCEPTION   WHEN NO_DATA_FOUND THEN   	INSERT INTO emp(empno,ename,job,hiredate,sal,deptno)   	  VALUES(666,&#39;LiSi&#39;,&#39;拧螺丝&#39;,&#39;04-5月-2022&#39;,6666,10);   	commit;   	IF SQL%FOUND THEN   	  dbms_output.put_line(&#39;数据插入成功&#39;);   	ELSE dbms_output.put_line(&#39;数据插入失败&#39;);   	END IF;END;&#x2F;
补充：模糊查询,%(多个字符)、_（单个字符）、regexp_like（正则表达式函数查询）但是我执行完之后显示插入成功，但是查询不到，原因是没有提交事务（commit）

创建一个存储过程，以员工号为参数，修改其工资。若该员工属于10号部门，则工资增加150元；若属于20号部门，则工资增加200元；若属于30号部门，则工资增加250元；若属于其它部门，则工资增加300元。调用该存储过程。
12345678910111213141516171819CREATE OR REPLACE PROCEDURE add_sal (  p_empno IN emp.empno%TYPE)IS  v_sal emp.sal%TYPE DEFAULT 10;v_deptno emp.empno%TYPE;BEGIN  SELECT deptno INTO v_deptno FROM emp WHERE empno&#x3D;p_empno;    IF v_deptno&#x3D;10 THEN       v_sal:&#x3D;150;    ELSIF v_deptno&#x3D;20 THEN        v_sal:&#x3D;200;    ELSIF v_deptno&#x3D;30 THEN        v_sal:&#x3D;250;    ELSE        v_sal:&#x3D;300;    END IF;  UPDATE emp SET sal&#x3D;sal+v_sal WHERE empno&#x3D;p_empno;END add_sal;
下面先调用该存储过程，然后查询


创建一个存储过程，以部门号为参数，输出该部门工资最高的5名员工的信息。调用该存储过程。
123456789101112131415161718CREATE PROCEDURE T5 (  p_deptno IN emp.deptno%TYPE)IS  CURSOR top5 IS SELECT empno,ename,job,hiredate,sal,deptno   FROM emp	 WHERE deptno&#x3D;p_deptno AND ROWNUM &lt;&#x3D; 5	 ORDER BY sal DESC;BEGIN  FOR v_i IN top5 LOOP	dbms_output.put_line(&#39;员工号:&#39; || v_i.empno ||                    &#39;，姓名:&#39; || v_i.ename ||                    &#39;，岗位:&#39; || v_i.job ||                    &#39;，入职时间:&#39; || v_i.hiredate ||                    &#39;，工资:&#39; || v_i.SAL ||                     &#39;，部门号:&#39; || v_i.deptno);  END LOOP;END T5;
调用该存储过程：没有展示 5 条的有些部门是没有 5 条数据的。


创建一个存储过程，以部门号为参数，查询该部门工资低于2000的员工。将这些员工的工资增加500。调用该存储过程。
12345678910111213141516171819202122232425CREATE OR REPLACE PROCEDURE T6 (  p_deptno IN emp.deptno%TYPE)IS   CURSOR c_add_sal IS SELECT * FROM emp WHERE deptno&#x3D;p_deptno AND sal&lt;2000 FOR UPDATE;  v_add_sal CONSTANT emp.sal%TYPE :&#x3D;500;BEGIN  FOR v_i IN c_add_sal LOOP	dbms_output.put_line(&#39;涨工资前的数据：&#39;);	dbms_output.put_line(&#39;员工号:&#39; || v_i.empno ||                    &#39;，姓名:&#39; || v_i.ename ||                    &#39;，工资:&#39; || v_i.SAL ||                     &#39;，部门号:&#39; || v_i.deptno);	UPDATE emp SET sal&#x3D;sal+v_add_sal WHERE CURRENT OF c_add_sal;  END LOOP;  COMMIT;  FOR v_i IN c_add_sal LOOP	dbms_output.put_line(&#39;涨工资后的数据：&#39;);	dbms_output.put_line(&#39;员工号:&#39; || v_i.empno ||                    &#39;，姓名:&#39; || v_i.ename ||                    &#39;，工资:&#39; || v_i.SAL ||                     &#39;，部门号:&#39; || v_i.deptno);  END LOOP;END T6;
在emp表上创建一个触发器，当增加员工的工资时，若修改后的工资高于该部门员工的最高工资，撤销该更新操作；否则统计修改工资后各部门人数及平均工资，并输出。执行触发操作。

待续。。。


创建一个存储过程，以员工号和部门号为参数，修改员工所在部门为输入的部门号。当员工或部门不存在时，显示相应的信息。调用该存储过程。
12345678910111213141516171819202122232425262728293031323334353637383940 CREATE OR REPLACE PROCEDURE T8 (  p_empno IN emp.empno%TYPE,  p_deptno IN emp.deptno%TYPE )IS  v_empno emp.empno%TYPE;  v_deptno emp.deptno%TYPE;  -- v_flag 为 0 表示员工不存在，为 1 表示部门不存在  v_flag NUMBER :&#x3D;0;  -- 用来展示旧数据  v_old_info emp%ROWTYPE;BEGIN  -- 判断员工是否存在  SELECT empno INTO v_empno FROM emp WHERE empno&#x3D;p_empno;  -- 判断部门是否存在  v_flag:&#x3D;1;  SELECT deptno INTO v_deptno FROM emp WHERE deptno&#x3D;p_deptno AND ROWNUM&lt;&#x3D;1;  -- 先输出原来的信息  SELECT * INTO v_old_info FROM emp WHERE empno&#x3D;p_empno;  dbms_output.put_line(&#39;修改前：员工号为:&#39;||v_old_info.empno||&#39;的员工，部门号为:&#39;||v_old_info.deptno);  -- 都存在则可以进行更新操作  UPDATE emp SET deptno&#x3D;p_deptno WHERE empno&#x3D;p_empno;  IF SQL%FOUND THEN  	dbms_output.put_line(&#39;修改后：员工号为:&#39;||p_empno||&#39;的员工，部门号为:&#39;||p_deptno);  ELSIF SQL%NOTFOUND THEN    dbms_output.put_line(&#39;信息修改失败!!!&#39;);  END IF;EXCEPTION  WHEN NO_DATA_FOUND THEN    IF v_flag&#x3D;0 THEN	 dbms_output.put_line(p_empno||&#39;号员工不存在!!!&#39;);    ELSIF v_flag&#x3D;1 THEN	 dbms_output.put_line(p_deptno||&#39;号部门不存在!!!&#39;);    END IF;END T8;
 调用该存储过程：
 


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/27/Linuxn%E5%91%BD%E4%BB%A4%E7%BB%83%E4%B9%A0/" title="Linux命令练习">Linux命令练习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-27T02:28:58.000Z" title="发表于 2022-04-27 10:28:58">2022-04-27</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-07T15:51:44.742Z" title="更新于 2022-05-07 23:51:44">2022-05-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
Linux练习填空题
安装Linux系统对硬盘分区时，必须有两种分区类型：==根分区==    和 ==交换分区==   。

某文件的权限为：drw-r–r–，用数值形式表示该权限==622==,该文件类型是==目录==。

每个设备文件名由主设备号和从设备号描述。第二块IDE硬盘的设备名为==/dev/sdb==，它上面的第一个逻辑分区对应的文件名是==/dev/sdb1==。

将/home/stud1/zhang目录做归档压缩，压缩后生成zhang.tar.bz2文件，并将此文件保存到/home目录下，实现此任务的tar命令格式    。
12345minghui@Linux ~ $ sudo mkdir -p /home/stud1/zhangminghui@Linux ~ $ sudo tar -jcf /home/zhang.tar.bz2 /home/stud1/zhangtar: 从成员名中删除开头的“/”minghui@Linux ~ $ ll /home/zhang.tar.bz2-rw-r--r-- 1 root root 121 4月  27 10:37 /home/zhang.tar.bz2


df命令完成==报告文件系统磁盘空间的使用情况==功能，du命令完成==报告磁盘空间使用情况==功能。

对于给定的文件case，统计其中所有包含字符串”PASS”的行数的一条命令是$ grep &quot;PASS&quot; case | wc -l 。


写出完成下列操作的命令
列出/etc目录下所有以“pa”开头的文件或目录，其中目录只显示其本身，而不显示其中的内容。
12minghui@Linux ~ $ ls -d /etc/pa*/etc/pam.d  /etc/passwd  /etc/passwd-


列出/dev目录中所有以“d”或“f”开头并且文件名为3个字符的文件。
12minghui@Linux ~ $ ls -d /dev/[df]??/dev/dri  /dev/fb0


一次性创建/tmp/a、/tmp/b、/tmp/c这3个目录。

两种写法

12minghui@Linux ~ $ mkdir /tmp/&#123;a,b,c&#125;minghui@Linux ~ $ mkdir /tmp/&#123;a..c&#125;


在/etc/passwd文件中查找所有以“root”字符串开头的行。

很多种写法

123456789minghui@Linux ~ $ grep &quot;^root&quot; /etc/passwdroot:x:0:0:root:/root:/bin/zshminghui@Linux ~ $ cat /etc/passwd | grep &quot;^root&quot;root:x:0:0:root:/root:/bin/zshminghui@Linux ~ $ more /etc/passwd | grep &quot;^root&quot;root:x:0:0:root:/root:/bin/zshminghui@Linux ~ $ less /etc/passwd | grep &quot;^root&quot;root:x:0:0:root:/root:/bin/zshminghui@Linux ~ $


在/etc目录中查找所有名称以“net”开头，以“.conf”结尾的文件。
1minghui@Linux ~ $ ls /etc/net*.conf


使用find命令查找/boot目录下的以“init”开头的文件，并将其复制到/tmp目录。
1234minghui@Linux ~ $ sudo cp $(find /boot -name &quot;init*&quot; -type f) /tmp/find: ‘/boot/lost+found’: 权限不够find: ‘/boot/grub2’: 权限不够minghui@Linux ~ $


查看/etc/passwd文件的内容，并将输出结果保存到pass.txt文件中。

&amp;&amp; 前面命令执行成功后面的命令才会执行

1minghui@Linux ~ $ sudo cat /etc/passwd &amp;&amp; cat /etc/passwd &gt; /tmp/pass.txt


用一行命令找出fdisk命令文件来自于哪个软件包。

两种写法

12345minghui@Linux ~ $ rpm -qf `which fdisk`util-linux-2.23.2-65.el7_9.1.x86_64minghui@Linux ~ $ rpm -qf $(which fdisk)util-linux-2.23.2-65.el7_9.1.x86_64


将/tmp/test目录的所属组更改为wheel组。
123456minghui@Linux ~ $ mkdir /tmp/testminghui@Linux ~ $ ll -d /tmp/testdrwxrwxr-x 2 minghui minghui 4.0K 4月  27 11:03 /tmp/testminghui@Linux ~ $ sudo chown :wheel /tmp/testminghui@Linux ~ $ ll -d /tmp/testdrwxrwxr-x 2 minghui wheel 4.0K 4月  27 11:03 /tmp/test


有5块SATA接口的硬盘，第1块硬盘为系统盘。现在要把后4块硬盘组成一个名为/dev/md0的软RAID，级别为10。提示：mdadm命令的基本格式如下： mdadm [mode]  [options] 
1$ sudo mdadm -C /dev/md0 -a yes -n 4 -l 10  /dev/sd&#123;b,c,d,e&#125;




简答题
分别写出三个关机和重启Linux系统的命令。

关机命令: ==poweroff== ==shutdown -h now== 
重启命令: ==reboot== ==shutdown -r now== ==init 6==


使用输出重定向创建一个内容为一个字符“x”的文件test，执行ls命令查看到的文件实际大小是多少？该文件所占的磁盘空间大小是多少？

内容仅为一个字符”x”，那么用 echo命令需要带参数-n这样就不会自动添加\n换行符
ls命令查看大小为1B
该文件所占磁盘空间需要使用du命令查看，大小为4KB，因为 4KB 是一个最小的存储单位

123456minghui@Linux ~ $ echo -n &quot;x&quot; &gt; /tmp/testminghui@Linux ~ $ ls -l /tmp/test-rw-rw-r-- 1 minghui minghui 1 4月  27 11:14 /tmp/testminghui@Linux ~ $ du -sh /tmp/test4.0K    /tmp/testminghui@Linux ~ $
vi编辑器有哪几种工作模式？如何在这几种工作模式之间转换？

NORMAL模式：按&lt;ESC&gt;或者CTtrl+[
INSERT模式：按ｉＩａＡ
VISUAL模式：按V


当一个用户对某个目录具有读、写或执行权限时，分别可以执行哪些操作？ 
创建文件/目录，删除文件/目录，浏览文件/目录

进入家目录，以自己的学号建一个目录，并进入该目录。使用一行命令创建a.txt b.txt c.txt文件和a b c目录，然后再使用一行命令：将a.txt删除，再新创建一个d.txt文件，然后将b.txt拷贝到a目录下，最后将c.txt移动到b目录下并重新命名为cc.txt。
1234567891011121314minghui@Linux ~ $ cd ~minghui@Linux ~ $ mkdir 24192401001minghui@Linux ~ $ cd 24192401001minghui@Linux ~/24192401001 $ touch &#123;a,b,c&#125;.txt &amp;&amp; mkdir &#123;a,b,c&#125;minghui@Linux ~/24192401001 $ lsa  a.txt  b  b.txt  c  c.txtminghui@Linux ~/24192401001 $ rm -rf a.txt &amp;&amp; touch d.txtminghui@Linux ~/24192401001 $ lsa  b  b.txt  c  c.txt  d.txtminghui@Linux ~/24192401001 $ cp b.txt a/minghui@Linux ~/24192401001 $ cp c.txt b/cc.txtminghui@Linux ~/24192401001 $ ls bcc.txtilsJKKminghui@Linux ~/24192401001 $





</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/25/FreaMarket/" title="FleaMarket">FleaMarket</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-25T02:28:58.000Z" title="发表于 2022-04-25 10:28:58">2022-04-25</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:52:05.494Z" title="更新于 2022-10-05 14:52:05">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java/">java</a></span></div><div class="content">
MySQL
创建一个新用户
1create user &#39;minghui&#39;@&#39;%&#39; identified by &#39;password&#39;;


赋予权限
1GRANT ALL ON *.* TO &#39;minghui&#39;@&#39;%&#39;


创建数据库
123456789   CREATE DATABASE flea_market;&#96;&#96;&#96;sql# 给表添加主键alter table &#96;user&#96; add primary key(id);# 给表 user id 设置自增alter table &#96;user&#96; modify id int auto_increment;

遇到的问题


表中数据插入不了
12MySQL minghui@huige.link:flea_market&gt; insert into `user`(id,username) values(1,&quot;张三&quot;);(1366, &quot;Incorrect string value: &#x27;\\xE5\\xBC\\xA0\\xE4\\xB8\\x89&#x27; for column &#x27;username&#x27; at row 1&quot;)
查看表的字符集
123MySQL minghui@huige.link:flea_market&gt; show create table &#96;user&#96;;# 省略一部分内容| user  | CREATE TABLE &#96;user&#96; (\n  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,\n  &#96;username&#96; varchar(50) DEFAULT NULL,\n  &#96;password&#96; varchar(255) DEFAULT NULL,\n  PRIMARY KEY (&#96;id&#96;)\n) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;latin1 |
可以看到charset=latin1
下面改为 utf8
1alter table &#96;user&#96; default character set UTF8 collate utf8_general_ci; # utf大小写没关系
然后还是发现插入不了，查看表中列的字符集，发现Collation列是latin1_swedish_ci
1show full columns from &#96;user&#96;;
下面将表 user 所有字段改为 utf8
1alter table &#96;user&#96; convert to character set utf8 collate utf8_general_ci;
 然后再次向表中插入数据，成功插入
123MySQL minghui@huige.link:flea_market&gt; insert into &#96;user&#96;(id,username) values(1,&quot;张三&quot;);Query OK, 1 row affectedTime: 0.044s


修改数据库的字符集
1alter database flea_market default character set utf8 collate utf8_general_ci;


查看数据库的所有表
1select table_name from information_schema.&#96;TABLES&#96; where TABLE_SCHEMA &#x3D; &quot;flea_market&quot;;
1show databases;



database_name: 是要查询的数据库名称
这条sql语句中的table_name是关键字, 不是表名


IDEA数据库连接报错


解决方法，选择另外一个驱动程序



详细解决方案：https://www.jianshu.com/p/f15ba82783e9



Redis
安装
1$ sudo yum -y install redis


添加为自启动服务，并且启动
12$ sudo systemctl enable redis$ sudo systemctl start redis


先设置能被远程连接，修改配置文件/etc/redis.conf
12# 把这个注释掉，表示任何IP均可访问bind 127.0.0.1
bind 127.0.0.1 172.16.184.11这样写表示两个IP都可访问

设置密码，取消注释，foobared为密码
1# requirepass foobared
1234567891011121314151617#启动redis服务器systemctl start redis.service#停止redis服务器systemctl stop redis.service#重新启动redis服务器systemctl restart redis.service#获取redis服务器的运行状态systemctl status redis.service#开机启动redis服务器systemctl enable redis.service#开机禁用redis服务器systemctl disable redis.service






邮件发不出去
我本地测试是可以发邮箱的，但是部署到腾讯云服务器就有问题了
报错如下



原因是腾讯云默认把 25 端口停用了

OSS测试UploadImageImpl类上传功能
12345678910111213141516@SpringBootTestclass UploadImageImplTest &#123;    @Autowired    UploadImage uploadImage;    @Test    void uploadImage() throws IOException &#123;        String path = &quot;/home/minghui/wallpaper/b71856d204e59adad895e5b0f920baab.jpg&quot;;        File file = new File(path);        FileInputStream fileInputStream = new FileInputStream(file);        MultipartFile multipartFile = new MockMultipartFile(&quot;test:&quot; + file.getName(), file.getName(), ContentType.APPLICATION_OCTET_STREAM.toString(), fileInputStream);        String s = uploadImage.uploadImage(multipartFile);        System.out.println(s);    &#125;&#125;




没有权限，到阿里云赋权限给这个RAM用户即可

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/18/ArchLinux%E8%A7%A6%E6%91%B8%E6%9D%BF/" title="ArchLinux触摸板">ArchLinux触摸板</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-18T02:28:58.000Z" title="发表于 2022-04-18 10:28:58">2022-04-18</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-07T16:06:55.221Z" title="更新于 2022-05-08 00:06:55">2022-05-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
基本操作
如果不做任何处理，触摸板是能够用的，但是点击的话需要按触摸板的按键，双指滑动也不行
看到网上一篇文章解决了我的疑惑，现在将他文章连接放在此处：https://twor.me/posts/archlinux_gesture/
下面就简单记录一下步骤


安装xf86-input-libinput包sudo pacman -S xf86-input-libinput

自定义配置文件放在 /etc/X11/xorg.conf.d/ 中，并且通常选择被广泛使用的命名模式 30-touchpad.conf 作为文件名，sudo vim /etc/X11/xorg.conf.d/30-touchpad.conf，该文件可以更该很多触摸板参数
123456789101112131415161718192021222324252627Section &quot;InputClass&quot;    Identifier &quot;touchpad&quot;    Driver &quot;libinput&quot;    MatchIsTouchpad &quot;on&quot;    # 当检测到 USB 鼠标时，它将禁用触摸板    #Option &quot;SendEventsMode&quot; &quot;disabled-on-external-mouse&quot;    Option &quot;TapButton1&quot; &quot;1&quot;            #单指敲击产生左键事件    Option &quot;TapButton2&quot; &quot;2&quot;            #双指敲击产生中键事件    Option &quot;TapButton3&quot; &quot;3&quot;            #三指敲击产生右键事件    Option &quot;EmulateTwoFingerMinZ&quot; &quot;40&quot; #精确度    Option &quot;EmulateTwoFingerMinW&quot; &quot;8&quot;    Option &quot;CoastingSpeed&quot; &quot;20&quot;        #触发快速滚动的滚动速度    Option &quot;PalmDetect&quot; &quot;1&quot;            #避免手掌触发触摸板1表示打开    Option &quot;PalmMinWidth&quot; &quot;0.05&quot;       #认定为手掌的最小宽度    Option &quot;PalmMinZ&quot; &quot;10&quot;             #认定为手掌的最小压力值    Option &quot;Tapping&quot; &quot;on&quot;    Option &quot;DisableWhileTyping&quot; &quot;True&quot;  # 防止打字误触    Option &quot;NaturalScrolling&quot; &quot;True&quot;    # 反方向滚动    Option &quot;AccelProfile&quot; &quot;adaptive&quot;    Option &quot;AccelSpeed&quot; &quot;0.5&quot;    Option &quot;TappingDrag&quot; &quot;on&quot;    Option &quot;TappingButtonMap&quot; &quot;lmr&quot;EndSection

当我做完上面的步骤之后，重新打开了一个tty并进去了dwm窗口管理器，发现触摸板能够点击以及双指滑动了，但是网页的缩小放大等手势还不行



进阶操作
触摸板手势的进阶操作


需要安装软件包libinput-gestures
1$ sudo pacman -S libinput-gestures
自动创建了/etc/libinput-gestures.conf文件，但是没有创建$HOME/.config/libinput-gestures.conf，需要手动创建，编写自己的配置文件


需要将当前用户添加到input组才能具有读取触摸板设备的权限
查看/etc/group文件如下

将当前用户添加到input组
1$ sudo gpasswd -a minghui input


然后安装需要的包
1$ sudo pacman -S xdotool wmctrl
然后编写配置文件vim ~/.config/libinput-gestures.conf，里面内容需要自己修改
12345678910111213141516$ vim .config/libinput-gestures.conf# 内容如下gesture swipe left 4 xdotool key super+Ctrl+Left # 4指左划: 切换到左侧工作区gesture swipe right 4 xdotool key super+Ctrl+Right # 4指右划: 切换到右侧工作区gesture swipe up 4 xdotool key super+s # 4指上划: 堆叠窗口gesture swipe down 4 xdotool key super+d # 4指下划: 还原窗口gesture pinch in 4 xdotool key super+r # 4指捏: 调整窗口大小gesture swipe left 3 xdotool key super+Shift+Left # 3指左划: 窗口移动到左边gesture swipe right 3 xdotool key super+Shift+Right # 3指右划: 窗口移动到右边gesture swipe up 3 xdotool key super+Shift+space # 3指下划: 浮动切换gesture swipe down 3 xdotool key super+Shift+space # 3指上划: 浮动切换gesture pinch in 3 xdotool key super+Shift+q # 3指捏: 关闭窗口gesture pinch in 2 xdotool key ctrl+minus # 2指捏: 缩小gesture pinch out 2 xdotool key ctrl+plus # 2指张: 放大%




</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/13/Linux%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/" title="Linux软件包管理">Linux软件包管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-13T01:28:58.000Z" title="发表于 2022-04-13 09:28:58">2022-04-13</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-11T02:07:26.880Z" title="更新于 2022-05-11 10:07:26">2022-05-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
实验步骤
用gzip方式将/var目录打包并压缩成文件var.tar.gz, 保存在/root/test目录下。
 123456789101112131415161718192021222324252627282930Linux ~ # mkdir /root/test &amp;&amp; tar -zcf /root/test/var.tar.gz /vartar: 从成员名中删除开头的“/”tar: 从硬连接目标中删除开头的“/”tar: /var/lib/gssproxy/default.sock: 忽略套接字(socket)tar: /var/spool/postfix/private/discard: 忽略套接字(socket)tar: /var/spool/postfix/private/bounce: 忽略套接字(socket)tar: /var/spool/postfix/private/lmtp: 忽略套接字(socket)tar: /var/spool/postfix/private/tlsmgr: 忽略套接字(socket)tar: /var/spool/postfix/private/retry: 忽略套接字(socket)tar: /var/spool/postfix/private/verify: 忽略套接字(socket)tar: /var/spool/postfix/private/virtual: 忽略套接字(socket)tar: /var/spool/postfix/private/trace: 忽略套接字(socket)tar: /var/spool/postfix/private/anvil: 忽略套接字(socket)tar: /var/spool/postfix/private/scache: 忽略套接字(socket)tar: /var/spool/postfix/private/relay: 忽略套接字(socket)tar: /var/spool/postfix/private/error: 忽略套接字(socket)tar: /var/spool/postfix/private/defer: 忽略套接字(socket)tar: /var/spool/postfix/private/proxymap: 忽略套接字(socket)tar: /var/spool/postfix/private/smtp: 忽略套接字(socket)tar: /var/spool/postfix/private/rewrite: 忽略套接字(socket)tar: /var/spool/postfix/private/local: 忽略套接字(socket)tar: /var/spool/postfix/private/proxywrite: 忽略套接字(socket)tar: /var/spool/postfix/public/cleanup: 忽略套接字(socket)tar: /var/spool/postfix/public/showq: 忽略套接字(socket)tar: /var/spool/postfix/public/flush: 忽略套接字(socket)tar: /var/spool/postfix/public/qmgr: 忽略套接字(socket)tar: /var/spool/postfix/public/pickup: 忽略套接字(socket)Linux ~ # du -sh /root/test2.1G    /root/test
用bzip2方式将/var目录打包并压缩成文件var.tar.bz2,保存在/root/test 目录下。
 123456789101112131415161718192021222324252627Linux ~ # tar -jcf /root/test/var.tar.bz3 /vartar: 从成员名中删除开头的“/”tar: 从硬连接目标中删除开头的“/”tar: /var/lib/gssproxy/default.sock: 忽略套接字(socket)tar: /var/spool/postfix/private/discard: 忽略套接字(socket)tar: /var/spool/postfix/private/bounce: 忽略套接字(socket)tar: /var/spool/postfix/private/lmtp: 忽略套接字(socket)tar: /var/spool/postfix/private/tlsmgr: 忽略套接字(socket)tar: /var/spool/postfix/private/retry: 忽略套接字(socket)tar: /var/spool/postfix/private/verify: 忽略套接字(socket)tar: /var/spool/postfix/private/virtual: 忽略套接字(socket)tar: /var/spool/postfix/private/trace: 忽略套接字(socket)tar: /var/spool/postfix/private/anvil: 忽略套接字(socket)tar: /var/spool/postfix/private/scache: 忽略套接字(socket)tar: /var/spool/postfix/private/relay: 忽略套接字(socket)tar: /var/spool/postfix/private/error: 忽略套接字(socket)tar: /var/spool/postfix/private/defer: 忽略套接字(socket)tar: /var/spool/postfix/private/proxymap: 忽略套接字(socket)tar: /var/spool/postfix/private/smtp: 忽略套接字(socket)tar: /var/spool/postfix/private/rewrite: 忽略套接字(socket)tar: /var/spool/postfix/private/local: 忽略套接字(socket)tar: /var/spool/postfix/private/proxywrite: 忽略套接字(socket)tar: /var/spool/postfix/public/cleanup: 忽略套接字(socket)tar: /var/spool/postfix/public/showq: 忽略套接字(socket)tar: /var/spool/postfix/public/flush: 忽略套接字(socket)tar: /var/spool/postfix/public/qmgr: 忽略套接字(socket)tar: /var/spool/postfix/public/pickup: 忽略套接字(socket)
查看/var 目录所占用的磁盘空间大小。
 12Linux ~ # du -sh /var2.8G    /var
查看文件var.tar.gz和var.tar.bz2的大小。
 123Linux ~ # du -sh /root/test/*989M    /root/test/var.tar.bz22.1G    /root/test/var.tar.gz
在/root/test 目录中创建-一个名为var1的目录。
 1Linux ~ # mkdir /root/test/var1
将文件var.tar.gz解压到/root/test/var1目录中。
 1Linux test # tar -zxf var.tar.gz -C /root/test/var1
在/root/test 目录中创建-一个名为var2的目录。
 1Linux test # mkdir /root/test/var2
将文件var.tar.bz2解压到/root/test/var2目录中。
 1Linux test # tar -jxf var.tar.bz3 -C /root/test/var2
检查系统中是否已经安装了DHCP服务。
12Linux ~ # rpm -q dhcp未安装软件包 dhcp
依次写出源码安装所需要的3个命令。



首先先解压源码包
tar.gz -&gt; tar -zxvf
tar.bz2 -&gt; tar -jxvf
tar.xz -&gt; tar -Jxvf

然后安装，必要的 3 条命令即配置、编译、安装
123$ ./configure --prefix=/user/local/&lt;安装目录&gt;$ make$ make install




统计系统中已经安装的RPM软件包的个数。
12Linux ~ # rpm -qa | wc -l1519
配置一个名为dvd.repo的YUM源文件，将光盘定义为YUM源。

由于没有光盘,把yum源文件放在了/mnt/cdrom/packages模拟了光盘挂载点




先下载YUM源
  123456789101112Linux / # mkdir -p /mnt/cdrom/packagesLinux ~ # wget -O /mnt/cdrom/packages/CentOS-7-aliyun.repo https://mirrors.aliyun.com/repo/Centos-7.repo--2022-04-27 08:57:36--  https://mirrors.aliyun.com/repo/Centos-7.repo正在解析主机 mirrors.aliyun.com (mirrors.aliyun.com)... 175.6.49.229, 222.243.241.239, 113.219.136.84, ...正在连接 mirrors.aliyun.com (mirrors.aliyun.com)|175.6.49.229|:443... 已连接。已发出 HTTP 请求，正在等待回应... 200 OK长度：2523 (2.5K) [application/octet-stream]正在保存至: “/mnt/cdrom/packages/CentOS-7-aliyun.repo”	100%[==============================================================================&gt;] 2,523       --.-K/s 用时 0.007s	2022-04-27 08:57:36 (367 KB/s) - 已保存 “/mnt/cdrom/packages/CentOS-7-aliyun.repo” [2523/2523])
配置YUM源定义文件
  1234567 Linux ~ # vim /etc/yum.repos.d/dev.repo# 内容如下 [dvd] name=CentOS dvd baseurl=file:///mnt/cdrom/packages enabled=1 gpgcheck=0


然后查看源列表，有刚刚刚添加进去的CentOS dvd

1234567891011121314 Linux ~ # yum repolist 已加载插件：fastestmirror, langpacks epel/x86_64/metalink                                                                             |  10 kB  00:00:00 源标识                                               源名称                                                       状态 !base/7/x86_64                                       CentOS-7 - Base                                              10,072!centos-sclo-rh/x86_64                               CentOS-7 - SCLo rh                                            7,863dvd                                                  CentOS dvd                                                        0*!epel/x86_64                                        Extra Packages for Enterprise Linux 7 - x86_64               13,748!extras/7/x86_64                                     CentOS-7 - Extras                                               509!nodesource/x86_64                                   Node.js Packages for Enterprise Linux 7 - x86_64                112!packages-microsoft-com-mssql-server-2019            packages-microsoft-com-mssql-server-2019                        167!packages-microsoft-com-prod                         packages-microsoft-com-prod                                   1,169!updates/7/x86_64                                    CentOS-7 - Updates                                            3,732repolist: 37,372



清除YUM缓存。1234567Linux ~ # yum clean all已加载插件：fastestmirror, langpacks正在清理软件源： base centos-sclo-rh dvd epel extras nodesource packages-microsoft-com-mssql-server-2019               : packages-microsoft-com-prod updatesCleaning up everythingMaybe you want: rm -rf /var/cache/yum, to also free up space taken by orphaned data from disabled or removed reposCleaning up list of fastest mirrors


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/13/Linux%E7%A3%81%E7%9B%98%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" title="Linux磁盘和文件系统">Linux磁盘和文件系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-13T01:28:58.000Z" title="发表于 2022-04-13 09:28:58">2022-04-13</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-27T02:05:16.549Z" title="更新于 2022-04-27 10:05:16">2022-04-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
新复制–台虚拟机，并为虚拟机添加4块容量为20GB的SCSI硬盘。
添加SCSI硬盘这是未添加虚拟SCSI磁盘的状态
123456789101112131415161718192021minghui@Linux ~ $ sudo fdisk -l磁盘 /dev/sda：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000990c6   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048     2099199     1048576   83  Linux/dev/sda2         2099200    37750783    17825792   83  Linux/dev/sda3        37750784    41943039     2096128   82  Linux swap / Solarisminghui@Linux ~ $ sudo lsblkNAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTsda      8:0    0   20G  0 disk├─sda1   8:1    0    1G  0 part /boot├─sda2   8:2    0   17G  0 part /└─sda3   8:3    0    2G  0 part [SWAP]sr0     11:0    1 1024M  0 rom
添加成功后查看信息
121    	 2    	  3        4    	5/dev/sda /dev/sdb /dev/sdc /dev/sdd /dev/sde
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849minghui@Linux ~ $ sudo fdisk -l磁盘 /dev/sdb：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘 /dev/sda：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000990c6   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048     2099199     1048576   83  Linux/dev/sda2         2099200    37750783    17825792   83  Linux/dev/sda3        37750784    41943039     2096128   82  Linux swap / Solaris磁盘 /dev/sdc：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘 /dev/sdd：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘 /dev/sde：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节minghui@Linux ~ $ lsblkNAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTsda      8:0    0   20G  0 disk├─sda1   8:1    0    1G  0 part /boot├─sda2   8:2    0   17G  0 part /└─sda3   8:3    0    2G  0 part [SWAP]sdb      8:16   0   20G  0 disksdc      8:32   0   20G  0 disksdd      8:48   0   20G  0 disksde      8:64   0   20G  0 disksr0     11:0    1  4.2G  0 romminghui@Linux ~ $
实验步骤书后例题
将系统中的第二块硬盘分成3个分区: 1 个主分区、两个逻辑分区。主分区的大小为10GB，第一个逻辑分区的大小为2GB,剩余空间全部分配给第二个逻辑分区。
 第二块硬盘为/dev/sdb，第三块为/dev/sdc，第四块为/dev/sdd，第五块为/dev/dbe
 1234567891011121314151617181920212223242526272829303132minghui@Linux ~ $ sudo gdisk /dev/sdbGPT fdisk (gdisk) version 0.8.6Partition table scan:  MBR: not present  BSD: not present  APM: not present  GPT: not presentCreating new GPT entries.Command (? for help): mb       back up GPT data to a filec       change a partition&#x27;s named       delete a partitioni       show detailed information on a partitionl       list known partition typesn       add a new partitiono       create a new empty GUID partition table (GPT)p       print the partition tableq       quit without saving changesr       recovery and transformation options (experts only)s       sort partitionst       change a partition&#x27;s type codev       verify diskw       write table to disk and exitx       extra functionality (experts only)?       print this menuCommand (? for help): nPartition number (1-128, default 1): 1
 从这里我才意识到，这个分区类型使用的不是MBR分区类型，而是GPT分区类型，GPT分区类型的硬盘可以有128个分区
 下面将/dev/sdb硬盘修改为MBR分区类型
 1234567891011121314151617181920212223242526minghui@Linux ~ $ sudo parted /dev/sdbGNU Parted 3.1使用 /dev/sdbWelcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.(parted) help  align-check TYPE N                        check partition N for TYPE(min|opt) alignment  help [COMMAND]                           print general help, or help on COMMAND  mklabel,mktable LABEL-TYPE               create a new disklabel (partition table)  mkpart PART-TYPE [FS-TYPE] START END     make a partition  name NUMBER NAME                         name partition NUMBER as NAME  print [devices|free|list,all|NUMBER]     display the partition table, available devices, free space, all found        partitions, or a particular partition  quit                                     exit program  rescue START END                         rescue a lost partition near START and END  rm NUMBER                                delete partition NUMBER  select DEVICE                            choose the device to edit  disk_set FLAG STATE                      change the FLAG on selected device  disk_toggle [FLAG]                       toggle the state of FLAG on selected device  set NUMBER FLAG STATE                    change the FLAG on partition NUMBER  toggle [NUMBER [FLAG]]                   toggle the state of FLAG on partition NUMBER  unit UNIT                                set the default unit to UNIT  version                                  display the version number and copyright information of GNU Parted(parted) mklabel新的磁盘标签类型？ msdos(parted) quit信息: You may need to update /etc/fstab.
 查看是否更改成功，使用fdisk -l命令查看，可以看到磁盘标签类型为dos，这样就成功更改了分区表类型为MBR了
 1234567891011minghui@Linux ~ $ sudo fdisk -l /dev/sdb磁盘 /dev/sdb：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x00033d84   设备 Boot      Start         End      Blocks   Id  Systemminghui@Linux ~ $
 下面开始将硬盘分区

一个主分区10G  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566minghui@Linux ~ $ sudo fdisk /dev/sdb欢迎使用 fdisk (util-linux 2.23.2)。更改将停留在内存中，直到您决定将更改写入磁盘。使用写入命令前请三思。	命令(输入 m 获取帮助)：n	Partition type:	   p   primary (0 primary, 0 extended, 4 free)	   e   extended	Select (default p): p	分区号 (1-4，默认 1)：1	起始 扇区 (2048-41943039，默认为 2048)：	将使用默认值 2048	Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-41943039，默认为 41943039)：+10G	分区 1 已设置为 Linux 类型，大小设为 10 GiB  - 两个逻辑分区，第一个逻辑分区2G，其他给第二个逻辑分区    ```shell    minghui@Linux ~ $ sudo fdisk /dev/sdb    欢迎使用 fdisk (util-linux 2.23.2)。        更改将停留在内存中，直到您决定将更改写入磁盘。    使用写入命令前请三思。      命令(输入 m 获取帮助)：n      Partition type:         p   primary (1 primary, 0 extended, 3 free)         e   extended      Select (default p): e      分区号 (2-4，默认 2)：2      起始 扇区 (20973568-41943039，默认为 20973568)：      将使用默认值 20973568      Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20973568-41943039，默认为 41943039)：+10G      值超出范围。      Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20973568-41943039，默认为 41943039)：      将使用默认值 41943039      分区 2 已设置为 Extended 类型，大小设为 10 GiB            命令(输入 m 获取帮助)：n      Partition type:         p   primary (1 primary, 1 extended, 2 free)         l   logical (numbered from 5)      Select (default p): l      添加逻辑分区 5      起始 扇区 (20975616-41943039，默认为 20975616)：      将使用默认值 20975616      Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20975616-41943039，默认为 41943039)：+2G      分区 5 已设置为 Linux 类型，大小设为 2 GiB            命令(输入 m 获取帮助)：n      Partition type:         p   primary (1 primary, 1 extended, 2 free)         l   logical (numbered from 5)      Select (default p): l      添加逻辑分区 6      起始 扇区 (25171968-41943039，默认为 25171968)：      将使用默认值 25171968      Last 扇区, +扇区 or +size&#123;K,M,G&#125; (25171968-41943039，默认为 41943039)：      将使用默认值 41943039      分区 6 已设置为 Linux 类型，大小设为 8 GiB          命令(输入 m 获取帮助)：w      The partition table has been altered!            Calling ioctl() to re-read partition table.      正在同步磁盘。






最后查看/dev/sdb硬盘的信息
1234567891011121314minghui@Linux ~ $ sudo fdisk -l /dev/sdb磁盘 /dev/sdb：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x00033d84   设备 Boot      Start         End      Blocks   Id  System/dev/sdb1            2048    20973567    10485760   83  Linux/dev/sdb2        20973568    41943039    10484736    5  Extended/dev/sdb5        20975616    25169919     2097152   83  Linux/dev/sdb6        25171968    41943039     8385536   83  Linux



依次对第二块硬盘的3个分区进行格式化，文件系统类型采用XFS。
第一步已经将/dev/sdb硬盘分了三个区，下面进行分区格式化
1234567891011121314151617181920212223242526272829303132333435# 主分区格式化minghui@Linux ~ $ sudo mkfs.xfs -f /dev/sdb1meta-data=/dev/sdb1              isize=512    agcount=4, agsize=655360 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=2621440, imaxpct=25         =                       sunit=0      swidth=0 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=2560, version=2         =                       sectsz=512   sunit=0 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0# 逻辑分区1格式化minghui@Linux ~ $ sudo mkfs.xfs -f /dev/sdb5meta-data=/dev/sdb5              isize=512    agcount=4, agsize=131072 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=524288, imaxpct=25         =                       sunit=0      swidth=0 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=2560, version=2         =                       sectsz=512   sunit=0 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0# 逻辑分区2格式化minghui@Linux ~ $ sudo mkfs.xfs -f /dev/sdb6meta-data=/dev/sdb6              isize=512    agcount=4, agsize=524096 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=2096384, imaxpct=25         =                       sunit=0      swidth=0 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=2560, version=2         =                       sectsz=512   sunit=0 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0
然后可以使用lsblk -f或者blkid -s TYPE命令查看文件系统类型
123456789101112minghui@Linux ~ $ lsblk -f /dev/sdbNAME   FSTYPE LABEL UUID                                 MOUNTPOINTsdb├─sdb1 xfs          0accb014-8b0a-4d35-951f-7df9a82d0622├─sdb2├─sdb5 xfs          2b415709-11a3-493b-8905-153021439a4b└─sdb6 xfs          3a3d9ef1-cbbf-49a9-bdfa-5014d5e4c7b0Linux ~ # blkid -s TYPE | grep /dev/sdb/dev/sdb1: TYPE=&quot;xfs&quot;/dev/sdb5: TYPE=&quot;xfs&quot;/dev/sdb6: TYPE=&quot;xfs&quot;

下面是我不小心将 /dev/sdb1 分区格式化为 ext4 文件系统，然后我尝试将该分区重新格式化为 xfs 分区的时候
这里我直接使用 sudo mkfs -t xfs /dev/sdb1命令会提示下面错误
mkfs.xfs: /dev/sdb1 appears to contain an existing filesystem (ext4).
mkfs.xfs: Use the -f option to force overwrite.
根据提示使用命令sudo mkfs.xfs -f /dev/sdb1成功格式化

1234567891011121314151617181920212223242526272829303132333435363738minghui@Linux ~ $ sudo mkfs -t ext4 /dev/sdb1mke2fs 1.42.9 (28-Dec-2013)文件系统标签=OS type: Linux块大小=4096 (log=2)分块大小=4096 (log=2)Stride=0 blocks, Stripe width=0 blocks655360 inodes, 2621440 blocks131072 blocks (5.00%) reserved for the super user第一个数据块=0Maximum filesystem blocks=215167795280 block groups32768 blocks per group, 32768 fragments per group8192 inodes per groupSuperblock backups stored on blocks:        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632Allocating group tables: 完成正在写入inode表: 完成Creating journal (32768 blocks): 完成Writing superblocks and filesystem accounting information: 完成minghui@Linux ~ $ sudo mkfs -t xfs /dev/sdb1mkfs.xfs: /dev/sdb1 appears to contain an existing filesystem (ext4).mkfs.xfs: Use the -f option to force overwrite.# 解决方法minghui@Linux ~ $ sudo mkfs.xfs -f /dev/sdb1meta-data=/dev/sdb1              isize=512    agcount=4, agsize=655360 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=2621440, imaxpct=25         =                       sunit=0      swidth=0 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=2560, version=2         =                       sectsz=512   sunit=0 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0minghui@Linux ~ $

将第二块硬盘的3个分区分别挂载到/mnt/data、/mnt/music、/mnt/movie目录。
 首先创建这三个挂载点
 1minghui@Linux ~ $ sudo mkdir -p /mnt/&#123;data,music,movie&#125;
 然后将分区挂载
 123minghui@Linux ~ $ sudo mount /dev/sdb1 /mnt/dataminghui@Linux ~ $ sudo mount /dev/sdb5 /mnt/musicminghui@Linux ~ $ sudo mount /dev/sdb6 /mnt/movie
 查看是否挂载成功，两种方法

df -h  12345minghui@Linux ~ $ df -h文件系统        容量  已用  可用 已用% 挂载点/dev/sdb1        10G   33M   10G    1% /mnt/data/dev/sdb5       2.0G   33M  2.0G    2% /mnt/music/dev/sdb6       8.0G   33M  8.0G    1% /mnt/movie
mount -l  1234minghui@Linux ~ $ mount -l | grep /dev/sdb/dev/sdb1 on /mnt/data type xfs (rw,relatime,attr2,inode64,noquota)/dev/sdb5 on /mnt/music type xfs (rw,relatime,attr2,inode64,noquota)/dev/sdb6 on /mnt/movie type xfs (rw,relatime,attr2,inode64,noquota)


将挂载在/mnt/data 目录上的硬盘分区设置为永久挂载。
 永久挂载需要在文件/etc/fstab添加一条记录，编辑该文件需要使用root用户
 即添加下面最后一条记录，/dev/sdb1 可以用UUID替换    
 12345UUID=4593e1b4-2599-4925-8437-de3f2ec307ae /                       ext4    defaults        1 1UUID=51ea6d78-baf6-47e4-b3bd-1892a8767b51 /boot                   ext4    defaults        1 2UUID=1651a78c-a5f5-4181-a064-101dd79c4100 swap                    swap    defaults        0 0/www/swap                                 swap                    swap    defaults        0 0/dev/sdb1                                 /mnt/data               xfs     defaults        0 0
在挂载点/mnt/data 上启用磁盘配额管理功能。
 同样的需要使用root用户操作
 修改/etc/fstab文件，刚刚添加了一条记录，现在修改这条记录启用磁盘配额管理功能
 1234# 原来/dev/sdb1                                 /mnt/data               xfs     defaults        0 0# 修改为/dev/sdb1                                 /mnt/data               xfs     defaults,uquota,gquota        0 0
 使该修改生效，可以重启，也可以先取消该挂载，然后使用mount -a命令重新挂载硬盘分区，我这里使用后者（方便一点）
 1234567Linux ~ # umount /mnt/dataLinux ~ # mount -aLinux ~ #Linux ~ # mount | grep /dev/sdb1/dev/sdb1 on /mnt/data type xfs (rw,relatime,attr2,inode64,usrquota,grpquota)Linux ~ #

没有任何报错说明参数填写没有问题，通过mount命令查看挂载情况，发现启用了usrquota和grpquota


限制用户zhangsan只能上传100MB数据和20个文件。
 使用edquota -u user_name命令进行配额设置    
 12345Linux ~ # edquota -u zhangsan# 内容修改如下，只需要修改soft列的数值，表示设置硬限制的大小(KB)和数量(个)Disk quotas for user zhangsan (uid 1606):  Filesystem                   blocks       soft       hard     inodes     soft     hard  /dev/sdb1                         0          0     100000          0        0       20
将第三块和第四块硬盘转换为物理卷。
 第三块是/dev/sdc，第四块为/dev/sdd
 12345678Linux ~ # pvcreate /dev/sd&#123;c,d&#125;  Physical volume &quot;/dev/sdc&quot; successfully created.  Physical volume &quot;/dev/sdd&quot; successfully created.Linux ~ # pvs  PV         VG Fmt  Attr PSize  PFree  /dev/sdd      lvm2 ---  20.00g 20.00g  /dev/sde      lvm2 ---  20.00g 20.00gLinux ~ #
 查看详细信息，PE Size没有，只有将物理卷加入了VG之后系统才会指定大小，同一个VG中所有的PV的PE Size都是统一的。
 123456789101112131415161718192021222324Linux ~ # pvdisplay  &quot;/dev/sdc&quot; is a new physical volume of &quot;20.00 GiB&quot;  --- NEW Physical volume ---  PV Name               /dev/sdc  VG Name  PV Size               20.00 GiB  Allocatable           NO  PE Size               0  Total PE              0  Free PE               0  Allocated PE          0  PV UUID               uluD1r-BFeY-A25o-iXbq-gP54-0fBA-NOny58  &quot;/dev/sdd&quot; is a new physical volume of &quot;20.00 GiB&quot;  --- NEW Physical volume ---  PV Name               /dev/sdd  VG Name  PV Size               20.00 GiB  Allocatable           NO  PE Size               0  Total PE              0  Free PE               0  Allocated PE          0  PV UUID               PT1aTr-yoEj-tXuA-jNZQ-BVfK-kbZt-Uo3Akj
利用这两个物理卷创建名为web的卷组。
 12Linux ~ # vgcreate web /dev/sd&#123;c,d&#125;  Volume group &quot;web&quot; successfully created
 查看卷组信息
 123456789101112131415161718192021Linux ~ # vgdisplay  --- Volume group ---  VG Name               web  System ID  Format                lvm2  Metadata Areas        2  Metadata Sequence No  1  VG Access             read/write  VG Status             resizable  MAX LV                0  Cur LV                0  Open LV               0  Max PV                0  Cur PV                2  Act PV                2  VG Size               39.99 GiB  PE Size               4.00 MiB  Total PE              10238  Alloc PE / Size       0 / 0  Free  PE / Size       10238 / 39.99 GiB  VG UUID               XIwepw-Ly1o-fWcp-V3W7-RfMx-e4ed-29dS8B
在web卷组中创建一个大小为30GB、名为pic的逻辑卷。

逻辑卷可以跨物理磁盘，逻辑卷的存储单位是PE Size，默认是4MB

 下面创建pic逻辑卷
 12Linux ~ # lvcreate -L 30G -n pic web  Logical volume &quot;pic&quot; created.
 查看逻辑卷信息
 1234567891011121314151617181920Linux ~ # lvs  LV   VG  Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert  pic  web -wi-a----- 30.00gLinux ~ # lvdisplay  --- Logical volume ---  LV Path                /dev/web/pic  LV Name                pic  VG Name                web  LV UUID                MSicxU-reYP-YHtS-F1ep-Csgc-5Zvv-OtYcff  LV Write Access        read/write  LV Creation host, time Linux, 2022-04-13 08:20:15 +0800  LV Status              available  # open                 0  LV Size                30.00 GiB  Current LE             7680  Segments               2  Allocation             inherit  Read ahead sectors     auto  - currently set to     8192  Block device           253:0
 这个时候如果使用fdisk -l命令查看磁盘信息就会发现多出一个名为/dev/mapper/web-pic的磁盘
 12345678Linux ~ # fdisk -l# 此处省略一些数据磁盘 /dev/mapper/web-pic：32.2 GB, 32212254720 字节，62914560 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节
将逻辑卷pic格式化为EXT4文件系统。
12345678910111213141516171819202122Linux ~ # mkfs -t ext4 /dev/mapper/web-picmke2fs 1.42.9 (28-Dec-2013)文件系统标签=OS type: Linux块大小=4096 (log=2)分块大小=4096 (log=2)Stride=0 blocks, Stripe width=0 blocks1966080 inodes, 7864320 blocks393216 blocks (5.00%) reserved for the super user第一个数据块=0Maximum filesystem blocks=2155872256240 block groups32768 blocks per group, 32768 fragments per group8192 inodes per groupSuperblock backups stored on blocks:        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,        4096000Allocating group tables: 完成正在写入inode表: 完成Creating journal (32768 blocks): 完成Writing superblocks and filesystem accounting information: 完成

格式化之后通过「lsblk -f」命令查看，发现/dev/sd&#123;c,d&#125;都有改变

1234567891011121314151617Linux ~ # lsblk -fNAME      FSTYPE      LABEL           UUID                                   MOUNTPOINTsda├─sda1    ext4                        51ea6d78-baf6-47e4-b3bd-1892a8767b51   /boot├─sda2    ext4                        4593e1b4-2599-4925-8437-de3f2ec307ae   /└─sda3    swap                        1651a78c-a5f5-4181-a064-101dd79c4100   [SWAP]sdb├─sdb1    xfs                         0accb014-8b0a-4d35-951f-7df9a82d0622   /mnt/data├─sdb2├─sdb5    xfs                         2b415709-11a3-493b-8905-153021439a4b   /mnt/music└─sdb6    xfs                         3a3d9ef1-cbbf-49a9-bdfa-5014d5e4c7b0   /mnt/moviesdc       LVM2_member                 uluD1r-BFeY-A25o-iXbq-gP54-0fBA-NOny58└─web-pic ext4                        12de8a04-a4e6-4352-9884-e748009b1f52sdd       LVM2_member                 PT1aTr-yoEj-tXuA-jNZQ-BVfK-kbZt-Uo3Akj└─web-pic ext4                        12de8a04-a4e6-4352-9884-e748009b1f52sdesr0       iso9660     CentOS 7 x86_64 2017-09-06-10-51-00-00
新建目录“var/web/pic”,并将逻辑卷pic挂载到该目录。
12Linux ~ # mkdir -p /var/web/picLinux ~ # mount /dev/mapper/web-pic /var/web/pic
将第五块硬盘转换为物理卷,并将其加入web卷组中。
1234Linux ~ # pvcreate /dev/sde  Physical volume &quot;/dev/sde&quot; successfully created.Linux ~ # vgextend web /dev/sde  Volume group &quot;web&quot; successfully extended

然后查看PV和VG数据

这里/dev/sdc空闲大小为0G是因为前面创建了一个pic逻辑卷（大小为30G）全部分配了，还有/dev/sdd空闲大小为10G是因为pic逻辑卷还需要10G

12345678Linux ~ # pvs  PV         VG  Fmt  Attr PSize   PFree  /dev/sdc   web lvm2 a--  &lt;20.00g      0  /dev/sdd   web lvm2 a--  &lt;20.00g   9.99g  /dev/sde   web lvm2 a--  &lt;20.00g &lt;20.00gLinux ~ # vgs  VG  #PV #LV #SN Attr   VSize   VFree  web   3   1   0 wz--n- &lt;59.99g &lt;29.99g
将逻辑卷pic的容量扩展到40GB。
123Linux ~ # lvextend -L +10G /dev/web/pic  Size of logical volume web/pic changed from 30.00 GiB (7680 extents) to 40.00 GiB (10240 extents).  Logical volume web/pic successfully resized.
安照书上的说法使用lvextend命令只是拓展了逻辑卷的物理边界，还没扩展逻辑边界，也就是说pic逻辑卷的最大存储还只是原来的30GB
然后我查看物理卷、卷组和逻辑卷信息，会发现这里的数据是更新了的，没有错误，但是使用df -hT | grep pic查看会看到pic逻辑卷的大小还是原来的30G
1234567891011121314Linux ~ # pvs  PV         VG  Fmt  Attr PSize   PFree  /dev/sdc   web lvm2 a--  &lt;20.00g      0  /dev/sdd   web lvm2 a--  &lt;20.00g      0  /dev/sde   web lvm2 a--  &lt;20.00g &lt;19.99gLinux ~ # vgs  VG  #PV #LV #SN Attr   VSize   VFree  web   3   1   0 wz--n- &lt;59.99g &lt;19.99gLinux ~ # lvs  LV   VG  Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert  pic  web -wi-ao---- 40.00gLinux ~ # df -hT | grep pic/dev/mapper/web-pic ext4       30G   45M   28G    1% /var/web/pic
所以下面使用resize2fs命令更新文件系统的大小

xfs文件系统使用xfs_growfs，ext文件系统使用resize2fs

123456789Linux ~ # resize2fs /dev/mapper/web-picresize2fs 1.42.9 (28-Dec-2013)Filesystem at /dev/mapper/web-pic is mounted on /var/web/pic; on-line resizing requiredold_desc_blocks = 4, new_desc_blocks = 5The filesystem on /dev/mapper/web-pic is now 10485760 blocks long.# 然后查看pic逻辑卷大小，已经扩展成功Linux ~ # df -hT | grep pic/dev/mapper/web-pic ext4       40G   48M   38G    1% /var/web/pic
磁盘阵列管理:RAID


注意:如果是先做的课后习题的话,书中说道,如果组RAID要使用第二块(也就是前面做题分区过的了)/dev/sdb,那么需要将已经挂载的硬盘分区全部卸载,/etc/fstab文件中添加的条目也要删除

配置RAID10
首先我先不把要组RAID的磁盘的分区删除,看会报什么错误

12minghui@Linux ~ $ sudo mdadm -C /dev/md0 -a yes -n 4 -l 10  /dev/sd&#123;b,c,d,e&#125;mdadm: cannot open /dev/sdb: Device or resource busy
/dev/sdb分区如下
1234567891011121314命令(输入 m 获取帮助)：p磁盘 /dev/sdb：21.5 GB, 21474836480 字节，41943040 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x00033d84   设备 Boot      Start         End      Blocks   Id  System/dev/sdb1            2048    20973567    10485760   83  Linux/dev/sdb2        20973568    41943039    10484736    5  Extended/dev/sdb5        20975616    25169919     2097152   83  Linux/dev/sdb6        25171968    41943039     8385536   83  Linux
然后把/dev/sdb分区删除掉,再次组RAID,还是同样的错误,然后重启看看,再次报错如下
123456789101112minghui@Linux ~ $ sudo mdadm -C /dev/md0 -a yes -n 4 -l 10  /dev/sd&#123;b,c,d,e&#125;[sudo] minghui 的密码：mdadm: partition table exists on /dev/sdbmdadm: partition table exists on /dev/sdb but will be lost or       meaningless after creating arraymdadm: super1.x cannot open /dev/sdc: Device or resource busymdadm: /dev/sdc is not suitable for this array.mdadm: super1.x cannot open /dev/sdd: Device or resource busymdadm: /dev/sdd is not suitable for this array.mdadm: super1.x cannot open /dev/sde: Device or resource busymdadm: /dev/sde is not suitable for this array.mdadm: create aborted
应该是前面添加了一个逻辑卷的原因
1234567891011minghui@Linux ~ $ sudo pvs  PV         VG  Fmt  Attr PSize   PFree  /dev/sdc   web lvm2 a--  &lt;20.00g      0  /dev/sdd   web lvm2 a--  &lt;20.00g      0  /dev/sde   web lvm2 a--  &lt;20.00g &lt;19.99gminghui@Linux ~ $ sudo vgs  VG  #PV #LV #SN Attr   VSize   VFree  web   3   1   0 wz--n- &lt;59.99g &lt;19.99gminghui@Linux ~ $ sudo lvs  LV   VG  Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert  pic  web -wi-a----- 40.00g
下面将他们删除,删除顺序与创建相反,卸载文件系统-&gt;删除逻辑卷-&gt;删除卷组-&gt;删除物理卷
12345678910minghui@Linux ~ $ sudo umount /dev/mapper/web-picminghui@Linux ~ $ sudo lvremove /dev/web/picDo you really want to remove active logical volume web/pic? [y/n]: y  Logical volume &quot;pic&quot; successfully removedminghui@Linux ~ $ sudo vgremove web  Volume group &quot;web&quot; successfully removedminghui@Linux ~ $ sudo pvremove /dev/sd&#123;c,d,e&#125;  Labels on physical volume &quot;/dev/sdc&quot; successfully wiped.  Labels on physical volume &quot;/dev/sdd&quot; successfully wiped.  Labels on physical volume &quot;/dev/sde&quot; successfully wiped.
然后再次创建RAID成功
12345678minghui@Linux ~ $ sudo mdadm -C /dev/md0 -a yes -n 4 -l 10  /dev/sd&#123;b,c,d,e&#125;mdadm: partition table exists on /dev/sdbmdadm: partition table exists on /dev/sdb but will be lost or       meaningless after creating arrayContinue creating array?Continue creating array? (y/n) ymdadm: Defaulting to version 1.2 metadatamdadm: array /dev/md0 started.
查看磁盘阵列
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849minghui@Linux ~ $ cat /proc/mdstatPersonalities : [raid10]md0 : active raid10 sde[3] sdd[2] sdc[1] sdb[0]      41910272 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]      [=====&gt;...............]  resync = 25.8% (10819200/41910272) finish=2.4min speed=206460K/secunused devices: &lt;none&gt;minghui@Linux ~ $ sudo mdadm -D /dev/md0/dev/md0:           Version : 1.2     Creation Time : Tue Apr 26 10:07:57 2022        Raid Level : raid10        Array Size : 41910272 (39.97 GiB 42.92 GB)     Used Dev Size : 20955136 (19.98 GiB 21.46 GB)      Raid Devices : 4     Total Devices : 4       Persistence : Superblock is persistent       Update Time : Tue Apr 26 10:11:00 2022             State : clean, resyncing    Active Devices : 4   Working Devices : 4    Failed Devices : 0     Spare Devices : 0            Layout : near=2        Chunk Size : 512KConsistency Policy : resync     Resync Status : 90% complete              Name : Linux:0  (local to host Linux)              UUID : 7202c9a0:4dd435c6:72996f05:3807b5fa            Events : 14    Number   Major   Minor   RaidDevice State       0       8       16        0      active sync set-A   /dev/sdb       1       8       32        1      active sync set-B   /dev/sdc       2       8       48        2      active sync set-A   /dev/sdd       3       8       64        3      active sync set-B   /dev/sde       minghui@Linux ~ $ sudo fdisk -l /dev/md0磁盘 /dev/md0：42.9 GB, 42916118528 字节，83820544 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：524288 字节 / 1048576 字节
然后将磁盘格式化为 XFS 系统
12345678910minghui@Linux ~ $ sudo mkfs -t xfs /dev/md0meta-data=/dev/md0               isize=512    agcount=16, agsize=654720 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=10475520, imaxpct=25         =                       sunit=128    swidth=256 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=5120, version=2         =                       sectsz=512   sunit=8 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0
创建挂载点并挂载
123456789minghui@Linux ~ $ sudo mkdir /raidminghui@Linux ~ $ mount /dev/md0 /raidmount: 只有 root 能执行该操作minghui@Linux ~ $ sudo mount /dev/md0 /raidminghui@Linux ~ $ df -Th | grep -v tmpfs文件系统       类型      容量  已用  可用 已用% 挂载点/dev/sda2      ext4       17G   12G  4.8G   71% //dev/sda1      ext4      976M  144M  766M   16% /boot/dev/md0       xfs        40G   33M   40G    1% /raid
RAID 性能测试变慢了
12345678minghui@Linux ~ $ dd if=/dev/zero of=/tmp/test1 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，2.04727 秒，256 MB/秒minghui@Linux ~ $ sudo dd if=/dev/zero of=/raid/test2 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，2.56091 秒，205 MB/秒


12345678minghui@Linux ~ $ dd if=/dev/zero of=/tmp/test1 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，7.89518 秒，66.4 MB/秒minghui@Linux ~ $ sudo dd if=/dev/zero of=/raid/test2 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，1.64167 秒，319 MB/秒
配置RAID5和备份盘12345678910111213141516171819minghui@Linux ~ $ sudo umount /raidminghui@Linux ~ $ mdadm -S /dev/md0mdadm: must be super-user to perform this actionminghui@Linux ~ $ sudo mdadm -S /dev/md0mdadm: stopped /dev/md0minghui@Linux ~ $ sudo mdadm -C /dev/md1 -a yes -n 3 -l 5 -x 1 /dev/sd&#123;b,c,d,e&#125;mdadm: /dev/sdb appears to be part of a raid array:       level=raid10 devices=4 ctime=Tue Apr 26 10:07:57 2022mdadm: partition table exists on /dev/sdb but will be lost or       meaningless after creating arraymdadm: /dev/sdc appears to be part of a raid array:       level=raid10 devices=4 ctime=Tue Apr 26 10:07:57 2022mdadm: /dev/sdd appears to be part of a raid array:       level=raid10 devices=4 ctime=Tue Apr 26 10:07:57 2022mdadm: /dev/sde appears to be part of a raid array:       level=raid10 devices=4 ctime=Tue Apr 26 10:07:57 2022Continue creating array? ymdadm: Defaulting to version 1.2 metadatamdadm: array /dev/md1 started.
查看信息
1234567891011121314151617181920212223242526272829303132333435minghui@Linux ~ $ sudo mdadm -D /dev/md1/dev/md1:           Version : 1.2     Creation Time : Tue Apr 26 10:28:36 2022        Raid Level : raid5        Array Size : 41910272 (39.97 GiB 42.92 GB)     Used Dev Size : 20955136 (19.98 GiB 21.46 GB)      Raid Devices : 3     Total Devices : 4       Persistence : Superblock is persistent       Update Time : Tue Apr 26 10:29:12 2022             State : clean, degraded, recovering    Active Devices : 2   Working Devices : 4    Failed Devices : 0     Spare Devices : 2            Layout : left-symmetric        Chunk Size : 512KConsistency Policy : resync    Rebuild Status : 24% complete              Name : Linux:1  (local to host Linux)              UUID : 756191fb:67e69f9f:0872e3f6:3a37e8a9            Events : 4    Number   Major   Minor   RaidDevice State       0       8       16        0      active sync   /dev/sdb       1       8       32        1      active sync   /dev/sdc       4       8       48        2      spare rebuilding   /dev/sdd       3       8       64        -      spare   /dev/sde
格式化,不过已经是XFS系统了,可以不需要操作了
123minghui@Linux ~ $ sudo mkfs -t xfs /dev/md1mkfs.xfs: /dev/md1 appears to contain an existing filesystem (xfs).mkfs.xfs: Use the -f option to force overwrite.


挂载
1234567891011121314151617181920212223242526272829303132333435363738394041424344454647minghui@Linux ~ $ sudo mount /dev/md1 /raidmount: 将 /dev/md1 挂载到 /raid 失败: 结构需要清理minghui@Linux ~ $ sudo mkfs.xfs -f /dev/md1meta-data=/dev/md1               isize=512    agcount=16, agsize=654720 blks         =                       sectsz=512   attr=2, projid32bit=1         =                       crc=1        finobt=0, sparse=0data     =                       bsize=4096   blocks=10475520, imaxpct=25         =                       sunit=128    swidth=256 blksnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1log      =internal log           bsize=4096   blocks=5120, version=2         =                       sectsz=512   sunit=8 blks, lazy-count=1realtime =none                   extsz=4096   blocks=0, rtextents=0minghui@Linux ~ $ sudo mount /dev/md1 /raid# 这是从RAID10到RAID5创建后马上查看的minghui@Linux ~ $ lsblk -fNAME   FSTYPE            LABEL           UUID                                 MOUNTPOINTsda├─sda1 ext4                              51ea6d78-baf6-47e4-b3bd-1892a8767b51 /boot├─sda2 ext4                              4593e1b4-2599-4925-8437-de3f2ec307ae /└─sda3 swap                              1651a78c-a5f5-4181-a064-101dd79c4100 [SWAP]sdb    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               8f1c4256-3949-43ac-9981-a5ab2abcbbf5sdc    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               8f1c4256-3949-43ac-9981-a5ab2abcbbf5sdd    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               8f1c4256-3949-43ac-9981-a5ab2abcbbf5sde    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               8f1c4256-3949-43ac-9981-a5ab2abcbbf5sr0    iso9660           CentOS 7 x86_64 2017-09-06-10-51-00-00# 这是在创建RAID5之后格式化的minghui@Linux ~ $ lsblk -fNAME   FSTYPE            LABEL           UUID                                 MOUNTPOINTsda├─sda1 ext4                              51ea6d78-baf6-47e4-b3bd-1892a8767b51 /boot├─sda2 ext4                              4593e1b4-2599-4925-8437-de3f2ec307ae /└─sda3 swap                              1651a78c-a5f5-4181-a064-101dd79c4100 [SWAP]sdb    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               42364846-eb55-4d34-be94-9e96b98fc6bc /raidsdc    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               42364846-eb55-4d34-be94-9e96b98fc6bc /raidsdd    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               42364846-eb55-4d34-be94-9e96b98fc6bc /raidsde    linux_raid_member Linux:1         756191fb-67e6-9f9f-0872-e3f63a37e8a9└─md1  xfs                               42364846-eb55-4d34-be94-9e96b98fc6bc /raidsr0    iso9660           CentOS 7 x86_64 2017-09-06-10-51-00-00
测速
12345678910111213141516minghui@Linux ~ $ dd if=/dev/zero of=/tmp/test1 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，2.46799 秒，212 MB/秒minghui@Linux ~ $ sudo dd if=/dev/zero of=/raid/test2 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，3.47321 秒，151 MB/秒minghui@Linux ~ $ dd if=/dev/zero of=/tmp/test1 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，6.68505 秒，78.4 MB/秒minghui@Linux ~ $ sudo dd if=/dev/zero of=/raid/test2 bs=1M count=500记录了500+0 的读入记录了500+0 的写出524288000字节(524 MB)已复制，9.39408 秒，55.8 MB/秒


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/04/Oracle11g%E5%AE%9E%E9%AA%8C%E4%BA%94%EF%BC%9AOracle-%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/" title="Oracle-备份与恢复">Oracle-备份与恢复</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-04T02:28:58.000Z" title="发表于 2022-04-04 10:28:58">2022-04-04</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-13T13:27:09.112Z" title="更新于 2022-05-13 21:27:09">2022-05-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的掌握Oracle数据库备份和恢复的基本方法
实验内容登录orcl数据库，完成以下实验：

对orcl数据库进行一次完全冷备份。
对orcl数据库的所有表空间进行热备份。
在数据库中创建一张表t1，表结构自定。在表中插入若干数据。破坏表t1所在的数据文件，使用热备份对其进行恢复。恢复后，查看表t1的状态。（请给出操作的全过程）
完成教材151页 3. 数据库不完全恢复的示例，将数据库恢复到删除操作前的状态。
使用expdp导出users表空间中的所有数据。使用expdp导出scott用户的dept表。
删除scott用户的dept表，并用impdp进行恢复。
（该题选做）  查询orcl数据库的所有控制文件。假定控制文件全部丢失且无备份，其它文件完好。试恢复数据库。（请给出故障模拟和恢复的全过程） 

实验过程登录orcl数据库，完成以下实验：

对orcl数据库进行一次完全冷备份

使用sys as sysdba登录数据库

查询当前数据库所有数据文件、控制文件、联机重做日志文件的物理位置
123SQL&gt; select file_name from dba_data_files;SQL&gt; select value from v$parameter where name=&#x27;control_files&#x27;;SQL&gt; select member from v$logfile;





关闭数据库
1SQL&gt; shutdown immediate

复制所有数据文件、控制文件、联机重做日志文件到备份磁盘位置\


然后SQL&gt; startup



对orcl数据库的所有表空间进行热备份

首先查看数据库是否处于归档模式，我当前是非归档模式，需要先改为归档模式
123456SQL&gt; archive log list（查看数据库运行模式）下面命令将数据库改为归档模式SQL&gt; shutdown immediateSQL&gt; startup mountSQL&gt; alter database archivelog;SQL&gt; alter database open;



查询当前数据库有哪些表空间，以及每个表空间中都有哪些数据文件
1SQL&gt; select tablespace_name,file_name from dba_data_files order by tablespace_name;



我这里有5个表空间：EXAMPLE01、SYSAUX01、SYSTEM01、UNDOTBS01、USERS01
然后分别对每个表空间的数据文件备份：
备份分为三步：①将需要备份的表空间设置为备份状态；②将该表空间中所有的数据文件复制到备份磁盘；③结束表空间的备份状态
下面是对5个表空间进行备份实操

EXPMPLE表空间备份



SYSAUX表空间备份



SYSTEM表空间备份



UNDOTBS表空间备份



USERS表空间备份



备份控制文件

将控制文件备份为二进制文件

这里的话我对备份出来的CONTROL.BKP文件和C:\Oracle\oradata\orcl\CONTROL01.CTL文件进行了比对，两者并不完全相同，虽然大小相同



将控制文件备份为文本文件




备份其他物理文件

归档当前的联机重做日志文件


备份初始化参数文件，我的oracle11g的参数文件在C:\Oracle\product\11.2.0\dbhome1\database\SPFILEORCL.ORA








</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/04/02/ArchLinux%E5%AE%89%E8%A3%85MySQL8/" title="ArchLinux安装Mariadb">ArchLinux安装Mariadb</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-02T08:28:58.000Z" title="发表于 2022-04-02 16:28:58">2022-04-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.836Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">

注意： 自2013年起，MariaDB就被Arch Linux当作官方默认的MySQL实现[1]。Oracle MySQL 已被移动到 AUR，推荐所有用户升级到 MariaDB。参见这条公告。ArchWiki

安装Mariadb
安装sudo pacman -S mariadb

初始化
1$ sudo mariadb-install-db --user=mysql --basedir=/usr --datadir=/var/lib/mysql

安装 mariadb 软件包之后，你必须在启动 mariadb.service 之前运行下面这条命令：

输出信息
1234567891011121314151617181920212223242526272829Installing MariaDB/MySQL system tables in &#x27;/var/lib/mysql&#x27; ...OKTo start mysqld at boot time you have to copysupport-files/mysql.server to the right place for your systemTwo all-privilege accounts were created.One is root@localhost, it has no password, but you need tobe system &#x27;root&#x27; user to connect. Use, for example, sudo mysqlThe second is mysql@localhost, it has no password either, butyou need to be the system &#x27;mysql&#x27; user to connect.After connecting you can set the password, if you would need to beable to connect as any of these users with a password and without sudoSee the MariaDB Knowledgebase at https://mariadb.com/kbYou can start the MariaDB daemon with:cd &#x27;/usr&#x27; ; /usr/bin/mysqld_safe --datadir=&#x27;/var/lib/mysql&#x27;You can test the MariaDB daemon with mysql-test-run.plcd &#x27;/usr/mysql-test&#x27; ; perl mysql-test-run.plPlease report any problems at https://mariadb.org/jiraThe latest information about MariaDB is available at https://mariadb.org/.Consider joining MariaDB&#x27;s strong and vibrant community:https://mariadb.org/get-involved/


启动服务
1$ sudo systemctl start mariadb


配置命令
1$ sudo mysql_secure_installation
输出如下
1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071➜  ~ sudo mysql_secure_installationNOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!In order to log into MariaDB to secure it, we&#x27;ll need the currentpassword for the root user. If you&#x27;ve just installed MariaDB, andhaven&#x27;t set the root password yet, you should just press enter here.Enter current password for root (enter for none):OK, successfully used password, moving on...Setting the root password or using the unix_socket ensures that nobodycan log into the MariaDB root user without the proper authorisation.You already have your root account protected, so you can safely answer &#x27;n&#x27;.Switch to unix_socket authentication [Y/n]Enabled successfully!Reloading privilege tables.. ... Success!You already have your root account protected, so you can safely answer &#x27;n&#x27;.Change the root password? [Y/n] yNew password:Re-enter new password:Password updated successfully!Reloading privilege tables.. ... Success!By default, a MariaDB installation has an anonymous user, allowing anyoneto log into MariaDB without having to have a user account created forthem.  This is intended only for testing, and to make the installationgo a bit smoother.  You should remove them before moving into aproduction environment.Remove anonymous users? [Y/n] ... Success! Normally, root should only be allowed to connect from &#x27;localhost&#x27;.  Thisensures that someone cannot guess at the root password from the network.Disallow root login remotely? [Y/n] ... Success!By default, MariaDB comes with a database named &#x27;test&#x27; that anyone canaccess.  This is also intended only for testing, and should be removedbefore moving into a production environment.Remove test database and access to it? [Y/n] - Dropping test database... ... Success! - Removing privileges on test database... ... Success!Reloading the privilege tables will ensure that all changes made so farwill take effect immediately.Reload privilege tables now? [Y/n] ... Success!Cleaning up...All done!  If you&#x27;ve completed all of the above steps, your MariaDBinstallation should now be secure.Thanks for using MariaDB!


连接Mariadb
123456789101112➜  ~ mysql -u root -pEnter password:Welcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 3Server version: 10.7.3-MariaDB Arch LinuxCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.MariaDB [(none)]&gt;
创建用户，用户名后面带的@&#39;%&#39;表示可以任何主机连接，如需指定主机比如@192.168.1.101``@localhost
123MariaDB [mysql]&gt; create user user_name@&#x27;%&#x27; identified by &#x27;passwd&#x27;;# 或者直接插入表数据MariaDB [mysql]&gt; insert into mysql.user(Host,User,Password) values(&quot;localhost&quot;,&quot;user_name &quot;,password(&quot;passwd&quot;));
查看mysql.user表
1234567891011MariaDB [(none)]&gt; select user,host from mysql.user;+-------------+-----------+| User        | Host      |+-------------+-----------+| minghui     | %         || mariadb.sys | localhost || mysql       | localhost || root        | localhost |+-------------+-----------+4 rows in set (0.002 sec)
如果需要 root 用户远程连接
123MariaDB [(none)]&gt; UPDATE mysql.global_priv SET Host=&#x27;%&#x27; WHERE User=&#x27;root&#x27;;MariaDB [(none)]&gt; flush privileges;Query OK, 0 rows affected (0.001 sec)
然后重启服务systemctl restart mariadb



自动补全
MySQL 默认禁用客户端自动补全功能。要在整个系统中启用它，编辑 /etc/my.cnf.d/mysql-clients.cnf，在mysql下 添加 auto-rehash。注意：不要将auto-rehash写在mysqld下，下次客户端启动时就会启用自动补全。

安装mycli
pip3 install mycli
安装后警告，说我的不再环境变量中
123456WARNING: The script tabulate is installed in &#x27;/home/minghui/.local/bin&#x27; which is not on PATH.Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.WARNING: The script sqlformat is installed in &#x27;/home/minghui/.local/bin&#x27; which is not on PATH.Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.WARNING: The script mycli is installed in &#x27;/home/minghui/.local/bin&#x27; which is not on PATH.Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
添加至环境变量，我用的是ZSH，所以直接编辑~/.zshrc文件，后面添加export PATH=/home/minghui/.local/bin/:$PATH

连接mycli -u user_name -h user_host my_database或mycli -u user_name


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/25/Oracle11g%E5%AE%9E%E9%AA%8C%E5%9B%9B%EF%BC%9AOracle-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/" title="Oracle-安全管理">Oracle-安全管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-25T02:28:58.000Z" title="发表于 2022-03-25 10:28:58">2022-03-25</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:30:48.124Z" title="更新于 2022-04-02 22:30:48">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的掌握oracle数据库安全管理的基本方法
实验内容数据库 orcl  用户名 sys 密码 oracle； 用户名 scott 密码 tiger

创建数据库用户usera，口令usera，默认表空间users001，默认临时表空间temp001，在users001上的配额为50M，初始账户锁定，口令为过期状态。

创建数据库用户userb，口令userb，默认表空间为example，配额100M。

使用usera连接到数据库orcl，创建表t2，表中数据与scott用户的emp表中数据相同。在t2表上的第一个字段上创建唯一性索引。

将usera上的现有权限转授给userb。

禁止usera将获得的权限再转授给其他用户。

创建角色rolea和roleb。将create table，scott.emp上的insert和update权限授予rolea。将connect，resource角色授予roleb。

将角色rolea和roleb授予用户userb。

查询usera和userb用户所具有的系统全新和对象权限信息。

创建概要文件，限定用户最长会话时间为60分钟，最长连续空闲时间为25分钟，口令有效期30天，连续登录5次失败则锁定账户。将此概要文件指定给用户usera和userb。


实验过程
创建数据库用户usera，口令usera，默认表空间users001，默认临时表空间temp001，在users001上的配额为50M，初始账户锁定，口令为过期状态。P123

先创建表空间user001,大小为10M，每个分区大小为512K123CREATE TABLESPACE users001 DATAFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/users001.DBF&#x27; SIZE 10M EXTENT MANAGEMENT LOCAL UNIFORM SIZE 512K;
再创建临时表空间temp001，大小为50M，每个分区大小为10M123CREATE TEMPORARY TABLESPACE temp001 TEMPFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/temp001.DBF&#x27; SIZE 50M EXTENT MANAGEMENT LOCAL UNIFORM SIZE 10M;
再创建数据库用户usera123456CREATE USER usera IDENTIFIED BY useraDEFAULT TABLESPACE users001TEMPORARY TABLESPACE temp001QUOTA 50M ON userS001ACCOUNT LOCKPASSWORD EXPIRE;


创建数据库用户userb，口令userb，默认表空间为example，配额100M。P123
 123CREATE USER userb IDENTIFIED BY userbDEFAULT TABLESPACE exampleQUOTA 100M ON example
使用usera连接到数据库orcl，创建表t2，表中数据与scott用户的emp表中数据相同。在t2表上的第一个字段上创建唯一性索引。

重新打开终端输入sqlplus，然后输入用户名和密码登录 
 
提示用户已锁定，用下面命令解锁
1SQL&gt; ALTER USER usera ACCOUNT UNLOCK;
然后再次登录,发现了新问题
 

根据上面的提示赋予usera用户创建会话的权限
1SQL&gt; GRANT CREATE SESSION TO usera;
再次登录，发现已能够登录上去
 

然后创建t2表，结构和scoot用户模式下的emp表相同
 
下面用sys用户给usera赋予创建表的权限
1SQL&gt; GRANT CREATE TABLE TO usera;
在重新执行创建t2表语句，创建成功
 

创建唯一索引
1SQL&gt; CREATE UNIQUE INDEX unique_index_empno ON t2(EMPNO);
给t2表插入scott模式下emp表的数据
1234567insert into t2 (empno, ename, job, mgr, hiredate, sal, comm, deptno)values (7369, &#x27;SMITH&#x27;, &#x27;CLERK&#x27;, 7902, to_date(&#x27;17-12-1980&#x27;, &#x27;dd-mm-yyyy&#x27;), 1000, null, 20);insert into t2 (empno, ename, job, mgr, hiredate, sal, comm, deptno)values (7499, &#x27;ALLEN&#x27;, &#x27;SALESMAN&#x27;, 7698, to_date(&#x27;20-02-1981&#x27;, &#x27;dd-mm-yyyy&#x27;), 1800, 300, 30);下面省略多条插入数据


将usera上的现有权限转授给userb。

在登录用户为usera下，查看自己的权限信息
 

然后将usera的全部权限转授给userb
1SQL&gt; GRANT CREATE SESSION, CREATE TABLE TO userb;
 
原因是usera没有转授权限的权限，需要使用sys用户授予转授权(WITH ADMIN OPTION)给usera
1SQL&gt; GRANT CREATE SESSION,CREATE TABLE TO usera WITH ADMIN OPTION;
然后再次执行授权给userb权限的命令，成功授权。
 



禁止usera将获得的权限再转授给其他用户。

先用sys用户收回usera的所有权限1SQL&gt; REVOKE CREATE TABLE,CREATE SESSION FROM usera;
然后在用sys用户赋予刚刚所收回权限，但是不加WITH ADMIN OPTION1SQL&gt; GRANT CREATE SESSION,CREATE TABLE TO usera;


创建角色rolea和roleb。将create table，scott.emp上的insert和update权限授予rolea。将connect，resource角色授予roleb。

用sys用户创建rolea和roleb角色12SQL&gt; CREATE ROLE rolea;SQL&gt; CREATE ROLE roleb;
将create table，scott.emp上的insert和update权限授予rolea12SQL&gt; GRANT CREATE TABLE TO ROLEA;SQL&gt; GRANT INSERT,UPDATE ON SCOTT.EMP TO ROLEA;
将connect，resource角色授予roleb1SQL&gt; GRANT CONNECT, RESOURCE TO ROLEB;


将角色rolea和roleb授予用户userb。
 1SQL&gt; GRANT ROLEA,ROLEB TO USERB;
查询usera和userb用户所具有的系统全新和对象权限信息。
 1SQL&gt; select * from DBA_SYS_PRIVS where GRANTEE IN (&#x27;USERA&#x27;,&#x27;USERB&#x27;);
  



创建概要文件，限定用户最长会话时间为60分钟，最长连续空闲时间为25分钟，口令有效期30天，连续登录5次失败则锁定账户。将此概要文件指定给用户usera和userb。

先创建概要文件1234CREATE PROFILE profile_usera_userb LIMITCONNECT_TIME 60 IDLE_TIME 25PASSWORD_LIFE_TIME 30FAILED_LOGIN_ATTEMPTS 5
将此概要文件指定给用户usera和userb12SQL&gt; ALTER USER usera PROFILE profile_usera_userb;SQL&gt; ALTER USER userb PROFILE profile_usera_userb;





实验总结
在第3小问中，登录usera用户的时候，打开终端输入sqlplus。①第一次输入用户名和密码之后，提示ORA-28000: the account is locked（用户未解锁），然后通过命令（ALTER USER usera ACCOUNT UNLOCK;）解锁之后；②进行第二次登录，因为创建usera用户的口令为过期状态，所以提示ORA-28001: the password has expired（密码过期），要求重新设置密码，在输入新密码两次之后提示ORA-01045: user USERA lacks CREATE SESSION privilege; logon denied（没有创建会话的权限），通过命令（GRANT CREATE SESSION TO usera;）赋予usera创建会话权限；③然后再次登录即可登录。

当我还未给userb赋予usera现有权限的时候尝试登录userb用户，错误提示如下，没有usera登录时提示密码过期，因为没有设置初始口令为过期。
  
 然后我做完实验的第4小题之后，userb应当拥有了创建会话的权利，因为usera赋予给了userb，我再次登录userb，验证是否授权成功，从下图得出成功授权。
  

当我使用usera用户登录之后，创建了t2表，然后往里面也插入数据成功了，但是查询的时候没有任何数据
  
 不知道为什么里面没有数据，显示插入成功了。
 最后网上查找说insert之后没有提交（commit;)，果然是这个问题。

在第6小题给角色赋予权限之后可以查看是否赋予成功
 1SQL&gt; select * from dba_sys_privs where grantee=&#x27;ROLEA&#x27;;
  
 1SQL&gt; select * from role_role_privs where role=&#x27;ROLEB&#x27;;
  
 这里有几个表不太清楚：
 dba_sys_privs，role_sys_privs，role_role_privs


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/20/Linux%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%A0%E9%A2%98/" title="Linux用户和权限管理习题">Linux用户和权限管理习题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-20T01:28:58.000Z" title="发表于 2022-03-20 09:28:58">2022-03-20</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-11T14:23:01.129Z" title="更新于 2022-04-11 22:23:01">2022-04-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
Linux中的用户管理主要涉及用户账号文件________、用户密码文件________、用户组文件________。

用户帐号文件：/etc/passwd
用户密码文件：/etc/shadow
用户组文件：/etc/group


通过id命令查看student 用户的身份信息，并将命令执行后的信息全部重定向到黑洞文件中。
 1234minghui@Linux ~ $ id studentuid=1009(student) gid=1010(student) 组=1010(student)minghui@Linux ~ $ id student &gt; /dev/nullminghui@Linux ~ $
显示系统中用户账号的个数。
123456minghui@Linux ~ $ whominghui  tty1         2022-03-30 09:51minghui  pts/0        2022-03-30 09:54 (192.168.164.1)minghui@Linux ~ $ who | wc -l2minghui@Linux ~ $
将student 用户的家目录复制到/tmp目录中，并保持源文件的属性不变。
12345minghui@Linux ~ $ sudo useradd student[sudo] minghui 的密码：minghui@Linux ~ $ sudo cp -rp /home/student /tmp[sudo] minghui 的密码：minghui@Linux ~ $
创建一个名为financial的组。
1minghui@Linux ~ $ sudo groupadd financial
创建一个名为test1的用户，指定其UID为1600,将financial组设置为test1用户的基本组。
123minghui@Linux ~ $ sudo useradd -u 1600 -g financial test1minghui@Linux ~ $ id test1uid=1600(test1) gid=1011(financial) 组=1011(financial)
通过非交互方式为用户test1设置密码123。
1234Linux ~ # sudo echo &quot;123&quot; | passwd --stdin test1更改用户 test1 的密码 。passwd：所有的身份验证令牌已经成功更新。Linux ~ #

–stdin
         This option is used to indicate that passwd should read the new
         password from standard input, which can be a pipe.



另外打开一个终端，以test1用户的身份登录系统。在test1的家目录中创建一个名为test1.txt的文件，并查看test1.txt 文件的权限设置。
123456minghui@Linux ~ $ su - test1密码：[test1@Linux ~]$ touch test1.txt[test1@Linux ~]$ ll test1.txt-rw-r--r-- 1 test1 financial 0 3月  30 11:24 test1.txt[test1@Linux ~]$
首先对文件test1.txt进行权限设置，要求文件所有者具有读写权限，所属组和其他用户具有只读权限。然后，使test1用户退出登录。
 123456[test1@Linux ~]$ chmod 644 test1.txt   [test1@Linux ~]$ ll   总用量 0   -rw-r--r-- 1 test1 financial 0 3月  30 11:24 test1.txt   [test1@Linux ~]$ exit	登出
将test1用户锁定，禁止其登录。再次打开一个终端，尝试能否以test1 用户的身份登录。
1234Linux ~ # passwd -l test1锁定用户 test1 的密码 。passwd: 操作成功Linux ~ #
尝试通过ssh工具连接用户 test1，发现无法登录该用户
123456789minghui@Linux ~ $ ssh test1@192.168.164.131The authenticity of host &#x27;192.168.164.131 (192.168.164.131)&#x27; can&#x27;t be established.ECDSA key fingerprint is SHA256:5bZfq74NYyTEpwAjym7vK8HR9IK2WoIe/7z9YBrG1OI.ECDSA key fingerprint is MD5:85:fd:85:65:02:41:c2:ee:44:1f:c8:2a:b3:00:f0:ca.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &#x27;192.168.164.131&#x27; (ECDSA) to the list of known hosts.test1@192.168.164.131&#x27;s password:Permission denied, please try again.test1@192.168.164.131&#x27;s password:
将test1用户解锁，在终端中尝试能否以test1 用户的身份登录。
12345678Linux ~ # passwd -u test1解锁用户 test1 的密码。passwd: 操作成功Linux ~ # su - test1上一次登录：三 3月 30 11:24:11 CST 2022pts/0 上最后一次失败的登录：日 4月 10 15:15:21 CST 2022从 192.168.164.1ssh:notty 上最有一次成功登录后有 2 次失败的登录尝试。[test1@Linux ~]$
将用户test1家目录中的test1.txt文件的所有者改为root，所属组改为users。
123456789[test1@Linux ~]$ su - root密码：上一次登录：日 4月 10 15:17:52 CST 2022pts/0 上最后一次失败的登录：日 4月 10 15:24:19 CST 2022pts/0 上最有一次成功登录后有 2 次失败的登录尝试。Linux ~ # chown root:users /home/test1/test1.txtLinux ~ # ll /home/test1/test1.txt-rw-r--r-- 1 root users 0 3月  30 11:24 /home/test1/test1.txtLinux ~ #
将test1用户连同家目录一并删除。
123Linux ~ # userdel -r test1userdel: user test1 is currently used by process 3092Linux ~ #
创建用户test2，要求没有家目录，并且禁止其登录。
1Linux ~ # useradd -s /sbin/nologin -M test2
创建用户test3, 并指定其家目录为/test3。
1Linux ~ # useradd -d /test3 test3
将test3用户加入root组，使root组成为其附加组。
123456Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3)Linux ~ # usermod -aG root test3Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3),0(root)Linux ~ #
将用户test3的基本组修改为users。
12345Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3)Linux ~ # usermod -aG root test3Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3),0(root)

注意：-G 参数是添加附加组，之前的附加组全部清空，所以要达到追加效果需要与 -a 参数使用，具体看下面

123456789Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3),1009(minghui)Linux ~ # usermod -G root test3Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3),0(root)Linux ~ # usermod -aG minghui test3Linux ~ # id test3uid=1602(test3) gid=1602(test3) 组=1602(test3),0(root),1009(minghui)Linux ~ #
将用户test3的家目录/test3移动到/home目录中，然后将其家目录改为/home/test3。
123456Linux ~ # grep &quot;test3&quot; /etc/passwdtest3:x:1602:1602::/test3:/bin/bashLinux ~ # usermod -md /home/test3 test3Linux ~ # grep &quot;test3&quot; /etc/passwdtest3:x:1602:1602::/home/test3:/bin/bashLinux ~ #
当用户对目录有写权限，但对目录下的文件没有写权限时，能否修改此文件内容？能否删除此文件？
下面用 test3 用户作实验，首先先在 test3 用户家目录创建一个文件夹code，权限设置为d-wx------，然后在 code 文件夹下面创建一个文件 program.c 文件，权限设置为-r-x------
1234567891011121314151617[test3@Linux ~]$ mkdir code[test3@Linux ~]$ touch code/program.c[test3@Linux ~]$ chmod 300 code[test3@Linux ~]$ chmod 500 code/program.c[test3@Linux ~]$ ll -d coded-wx------ 2 test3 test3 4096 4月  11 19:00 code[test3@Linux ~]$ ll code code/program.c-r-x------ 1 test3 test3    0 4月  11 19:00 code/program.c[test3@Linux ~]$ vim code/program.c # 写入HelloE45: 已设定选项 &#x27;readonly&#x27; (请加 ! 强制执行)[test3@Linux ~]$ cat code/program.cHello[test3@Linux ~]$ rm code/program.crm：是否删除有写保护的普通文件 &quot;code/program.c&quot;？y[test3@Linux ~]$ ll code/program.cls: 无法访问code/program.c: 没有那个文件或目录[test3@Linux ~]$

通过上面的实验，可以修改文件内容，也同时可以删除文件


Linux 文件的权限位x对目录和文件有何不同？

目录：代表可以进入该目录，但是仅仅有 x 权限还没法列举该目录下的文件，需要读取目录下的文件需要 r 权限

文件：代表具有执行该文件的权限，比如只要拥有 x 的脚本文件才可以执行



新建目录/tmp/mike,并设置如下权限。

将此目录的所有者设置为 mike，并设置读、写和执行权限。

将此目录的所属组设置为sales，并设置读和执行权限。

其他用户没有任何权限。



首先需要创建用户 mike 和组 sales

12345678910Linux ~ # mkdir /tmp/mikeLinux ~ # useradd mikeLinux ~ # groupadd salesLinux ~ # chown mike:sales /tmp/mikeLinux ~ # ll -d /tmp/mikedrwxr-xr-x 2 mike sales 4.0K 4月  10 22:20 /tmp/mikeLinux ~ # chmod 750 /tmp/mikeLinux ~ # ll -d /tmp/mikedrwxr-x--- 2 mike sales 4.0K 4月  10 22:20 /tmp/mikeLinux ~ #
创建/var/test 目录，要求在此目录中任何用户都可以创建文件或目录，但只有用户自身和root用户可以删除用户所创建的文件或目录。
需要实现题目条件，需要给目录设置粘滞位SBIT权限（SBIT权限仅仅对目录有效）    
1234567Linux ~ # mkdir /var/testLinux ~ # ll -d /var/testdrwxr-xr-x 2 root root 4.0K 4月  10 22:30 /var/testLinux ~ # chmod o+t /var/testLinux ~ # ll -d /var/testdrwxr-xr-t 2 root root 4.0K 4月  10 22:30 /var/testLinux ~ #
新建一个名为manager的用户组，创建两个用户账号: natasha 和harry,并将manager组设为这两个用户的附加组。复制文件/etc/fstab 到/var/tmp目录中，对文件/var/tmp/fstab进行权限设置。
首先创建用户组和用户，完成题干的要求
12345678minghui@Linux ~ $ sudo groupadd managerminghui@Linux ~ $ sudo useradd natashaminghui@Linux ~ $ sudo useradd harryminghui@Linux ~ $ sudo gpasswd -a natasha manager正在将用户“natasha”加入到“manager”组中minghui@Linux ~ $ sudo gpasswd -a harry manager正在将用户“harry”加入到“manager”组中minghui@Linux ~ $ cp /etc/fstab /var/tmp/

添加ACL条目，使manager组具有读取权限。
  1minghui@Linux ~ $ setfacl -m g:manager:r-- /var/tmp/fstab

添加ACL条目，使用户harry具有读写权限。
  1minghui@Linux ~ $ setfacl -m u:harry:rw- /var/tmp/fstab

添加ACL条目,使用户natasha没有任何权限。
  1minghui@Linux ~ $ setfacl -m u:natasha:--- /var/tmp/fstab

删除manager 组的ACL条目。
  1minghui@Linux ~ $ setfacl -x g:manager /var/tmp/fstab

删除所有附加的ACL条目。
  1minghui@Linux ~ $ setfacl -b /var/tmp/fstab


假设/var/test目录的所属组是users，要求对/var/test目录进行权限设置，使得任何用户在该目录中所创建的文件或子目录的所属组都自动使用users组。
1234567891011Linux ~ # chown :users /var/testLinux ~ # ll -d /var/testdrwxr-xr-t 2 root users 4.0K 4月  10 22:30 /var/testLinux ~ # chmod g+s /var/testLinux ~ # ll -d /var/testdrwxr-sr-t 2 root users 4.0K 4月  10 22:30 /var/testLinux ~ # touch /var/test/root_testLinux ~ # ll /var/test总用量 0-rw-r--r-- 1 root users 0 4月  10 22:39 root_testLinux ~ #
假设普通用户student已经被授权，要求以该用户身份将系统的IP地址修改为192.168.80.10/24。
通过 man 手册查看 ifconfig 命令，可以通过该命令修改 IP 地址

NAME
  ifconfig - 配置网络接口

总览
  ifconfig [接口]

  ifconfig 接口 [aftype] options | address ...


命令格式为：ifconfig 接口 address
下面进行 IP 地址的更改，先查看原 IP 地址
1234567[student@Linux ~]$ ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.164.131  netmask 255.255.255.0  broadcast 192.168.164.255[student@Linux ~]$ sudo ifconfig ens33 192.168.80.10[student@Linux ~]$ ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500		inet 192.168.80.10  netmask 255.255.255.0  broadcast 192.168.80.255

如果出现下面的问题，需要将 student 用户赋予执行所有命令的权限

123456789101112[student@Linux ~]$ sudo ifconfig ens33 192.168.80.10我们信任您已经从系统管理员那里了解了日常注意事项。总结起来无外乎这三点：    #1) 尊重别人的隐私。    #2) 输入前要先考虑(后果和风险)。    #3) 权力越大，责任越大。[sudo] student 的密码：student 不在 sudoers 文件中。此事将被报告。[student@Linux ~]$
有两种方法解决

root 用户使用命令 visudo 找到下面内容，添加一条 student 用户的记录123## Allows people in group wheel to run all commands%wheel  ALL=(ALL)       ALLstudent ALL=(ALL)       ALL
将 student 用户添加至 wheel 组中，同样的有两种写法 
gpasswd -a student wheel 
usermod -aG wheel student 



详细看下面
1234567891011121314Linux ~ # id studentuid=1009(student) gid=1010(student) 组=1010(student)Linux ~ # gpasswd -a student wheel正在将用户“student”加入到“wheel”组中Linux ~ # id studentuid=1009(student) gid=1010(student) 组=1010(student),10(wheel)# 或者下面写法Linux ~ # id studentuid=1009(student) gid=1010(student) 组=1010(student)Linux ~ # usermod -aG wheel studentLinux ~ # id studentuid=1009(student) gid=1010(student) 组=1010(student),10(wheel)Linux ~ #
为/etc/passwd文件添加只读属性。
123456789Linux ~ # ll /etc/passwd-rw-r--r-- 1 root root 2.6K 4月  10 22:19 /etc/passwdLinux ~ # chattr +i /etc/passwdLinux ~ # ll /etc/passwd-rw-r--r-- 1 root root 2.6K 4月  10 22:19 /etc/passwd# 需要通过 lsattr 命令查看拓展属性Linux ~ # lsattr /etc/passwd----i--------e-- /etc/passwdLinux ~ #

发现设置了只读属性后，无法创建用户了，因为创建用户需要向/etc/passwd写入条目
12345Linux ~ # lsattr /etc/passwd----i--------e-- /etc/passwdLinux ~ # useradd test4useradd：无法打开 /etc/passwdLinux ~ #
将/var/log/message文件设置为只能向其中追加写入数据，但不能删除原有数据。
1234Linux ~ # chattr +a /var/log/messagesLinux ~ # lsattr /var/log/messages-----a-------e-- /var/log/messagesLinux ~ #
在系统中查找所有人都有写权限的目录。
123456789101112131415161718192021Linux ~ # find / -perm -222 -type d/opt/rh/devtoolset-7/root/var/tmp/opt/rh/devtoolset-7/root/tmp/var/tmp/var/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-chronyd.service-0qLJ0T/tmp/var/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-vgauthd.service-mXdhtl/tmp/var/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-cups.service-4Z1WUM/tmp/var/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-vmtoolsd.service-6wjrwN/tmp/dev/mqueue/dev/shm/tmp/tmp/.XIM-unix/tmp/.ICE-unix/tmp/.font-unix/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-cups.service-KI9PbY/tmp/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-chronyd.service-I5LWHN/tmp/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-vmtoolsd.service-UqTfdz/tmp/tmp/.X11-unix/tmp/.Test-unix/tmp/systemd-private-367eb46c14004e9bb2fcccfa95ceafe3-vgauthd.service-OrRFJ7/tmpLinux ~ #


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/18/Oracle11g%E5%AE%9E%E9%AA%8C%E4%B8%89%EF%BC%9AOracle-%E6%A8%A1%E5%BC%8F%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86/" title="Oracle-模式对象管理">Oracle-模式对象管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-18T02:28:58.000Z" title="发表于 2022-03-18 10:28:58">2022-03-18</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:35.002Z" title="更新于 2022-04-02 22:15:35">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的
掌握表和索引的管理方法。

掌握其他模式对象的管理方法。


实验内容数据库 orcl  用户名 sys 密码 oracle； 用户名 scott 密码 tiger

用scott登录数据库，创建class表和student表。Class表的字段包括班号cno,班名cname和人数num。Student表的字段包括学号sno，姓名sname，年龄sage和班号cno。字段类型和长度自定。

创建一个会话级别的临时表，结构与student表相同。

为student表的sage字段添加一个约束，保证该列值在0-100之间。

在class表的cname列上建立一个唯一性索引。

对class表进行表结构重组，将其移动到orcltbs1表空间。

创建一个student_range表（结构与student相同）。按学生年龄分3个区，低于20岁的放入part1区，存储在example表空间；20-30岁的放在part2区，放在orcltbs1表空间；其他数据放在part3区，放在users表空间。

创建一个序列，起始值1000，步长为2，最大值为10000，不可循环。


实验过程
用scott登录数据库，创建class表和student表。Class表的字段包括班号cno,班名cname和人数num。Student表的字段包括学号sno，姓名sname，年龄sage和班号cno。字段类型和长度自定。

创建class表SQL语句如下，cno作为主码12345CREATE TABLE class(    cno varchar2(5) PRIMARY KEY,    cname varchar2(50),    num number(2));
创建student表SQL语句如下，sno作为主码，cno为外码1234567CREATE TABLE student(    sno number(11) PRIMARY KEY,    sname varchar2(10),    cno varchar2(5),    sage number(3),    FOREIGN KEY(cno) REFERENCES class(cno));


创建一个会话级别的临时表，结构与student表相同。P89
 创建了会话级别的临时表student_temp，创建语句如下：
 12345    CREATE GLOBAL TEMPORARY TABLE student_temp(    sno number(11) PRIMARY KEY,    sname varchar2(10),    cno varchar2(5)) ON COMMIT PRESERVE ROWS;
为student表的sage字段添加一个约束，保证该列值在0-100之间。P93
 1ALTER TABLE student ADD CONSTRAINT P_AGE CHECK (sage BETWEEN 0 AND 100);
在class表的cname列上建立一个唯一性索引。P100
 1CREATE UNIQUE INDEX cname_unique_index ON class(cname);
对class表进行表结构重组，将其移动到orcltbs1表空间。P97

先切换到sys模式，不然没有权限创建表空间1SQL&gt; conn sys/oracle as sysdba
然后创建表空间orcltbs11CREATE TABLESPACE orcltbs1 DATAFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/orcltbs1.DBF&#x27; SIZE 10M EXTENT MANAGEMENT LOCAL UNIFORM SIZE 512K;
然后对class表结构重组1ALTER TABLE class MOVE TABLESPACE orcltbs1;


创建一个student_range表（结构与student相同）。按学生年龄分3个区，低于20岁的放入part1区，存储在example表空间；20-30岁的放在part2区，放在orcltbs1表空间；其他数据放在part3区，放在users表空间。P104

首先检查，这3个表空间都存在

然后按照要求创建
123456CREATE TABLE student_range(    sno number(11) PRIMARY KEY,    sname varchar2(10),    sage number(3),    cno varchar2(5));
12345PARTITION BY RANGE(sage)(    PARTITION part1 VALUES LESS THAN(20) TABLESPACE example,    PARTITION part2 VALUES LESS THAN(31) TABLESPACE orcltbs1,    PARTITION part3 VALUES LESS THAN(maxvalue) TABLESPACE users);


创建一个序列，起始值1000，步长为2，最大值为10000，不可循环。P115
 12345CREATE SEQUENCE test_sequence  START WITH 1000  INCREMENT BY 2  MAXVALUE 10000  NOCYCLE;
 查看创建的序列
  


实验总结
查看表的命令，比如第一题中创建表，检查是否创建成功
 1SQL&gt; select from all_tables;
 第三个USERS是表空间，创建表时没有指定表空间，默认是当前登录用户所使用的表空间。
  

在创建临时表的时候，有一个外码，没有创建成功
  

查看表的约束
 1SELECT CONSTRAINT_NAME,CONSTRAINT_TYPE,DEFERRED,STATUS FROM USER_CONSTRAINTS WHERE TABLE_NAME=&#x27;student&#x27;;
查看表的索引
 1SELECT INDEX_NAME,INDEX_TYPE FROM USER_INDEXES WHERE TABLE_NAME=&#x27;class&#x27;;
对表进行重组之后，用以下命令查看是否重组成功
 1SQL&gt; select from all_tables where OWNER=&#x27;SCOTT&#x27;;
  

查看创建的序列
 1SQL&gt; select from user_sequences;
  


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/16/Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86/" title="Linux文件和目录管理习题">Linux文件和目录管理习题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-16T02:28:58.000Z" title="发表于 2022-03-16 10:28:58">2022-03-16</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.989Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">

分别说明根目录下常见的子目录 /root、/etc、/dev、/var、/home、/bin 和 /sbin 的作用




文件目录
作用



/root
该目录为系统管理员，也称作超级权限者的用户主目录


/etc
etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录


/dev
dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的


/var
var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件


/home
用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名


/bin
bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令


/sbin
s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序



切换到工作目录到/usr/src，并执行命令查看当前所在的目录
1234minghui@Mingarch ~ $ cd /usr/srcminghui@Mingarch /usr/src $ pwd/usr/srcminghui@Mingarch /usr/src $
当前所在的工作目录是 /usr/src，切换工作目录到当前目录的上一级目录
12minghui@Mingarch /usr/src $ cd ..minghui@Mingarch /usr $


将工作目录切换到当前用户的家目录
12345minghui@Mingarch /usr $ cd ~minghui@Mingarch ~ $# 或者minghui@Mingarch /usr $ cdminghui@Mingarch ~ $


查看 /dev 目录中所有文件的详细信息（包含隐藏文件），在 Linux 系统中，隐藏文件的标识是什么？在显示的文件详细信息中，第一组数的第一个字符代表文件类型，”-“ “d” “l” “c” “b” 分别代表的是哪种类型的文件？


隐藏文件标识：前面带个小数点
第一个字符的含义：-：普通文件、d：目录、l：软链接、b：块设备、c：字符设备


以长格式显示 /etc/inittab 文件的详细信息
123minghui@Mingarch ~ $ ll /etc/inittab-rw-r--r--. 1 root root 511 8月   4 2017 /etc/inittabminghui@Mingarch ~ $



再root用户的家目录下创建一个名为 temp1 的空文件
12minghui@Mingarch ~ $ sudo mkdir /root/test1minghui@Mingarch ~ $


在 /root/test1 目录中创建一个名为temp1的空文件
1234minghui@Mingarch ~ $ touch /root/test1/temp1touch: 无法创建 &#x27;/root/test1/temp1&#x27;: 权限不够minghui@Mingarch ~ $ sudo touch /root/test1/temp1minghui@Mingarch ~ $


复制文件 /root/test1/temp1 进行备份，仍然保存再
12minghui@Mingarch ~ $ sudo cp /root/test1/temp1 /root/test1/temp1.bakminghui@Mingarch ~ $


将文件 /root/test1/temp1.bak 移动到 /tmp/ 目录下，并改名为 temp.bak
12minghui@Mingarch ~ $ sudo mv /root/test1/temp1.bak /tmp/temp.bakminghui@Mingarch ~ $


将 /root/test1/ 目录强制删除
12minghui@Mingarch ~ $ sudo rm -rf /root/temp1minghui@Mingarch ~ $


以长格式显示 /etc/ 目录本身的详细信息
123minghui@Mingarch ~ $ ls -dl /etc/drwxr-xr-x. 141 root root 12288 3月  18 20:10 /etc/minghui@Mingarch ~ $


查看操作系统的版本信息
123minghui@Mingarch ~ $ uname -aLinux Mingarch 5.16.14-arch1-1 #1 SMP PREEMPT Fri, 11 Mar 2022 17:40:36 +0000 x86_64 GNU/Linuxminghui@Mingarch ~ $



将 /etc 目录中所有以 “.d“ 结尾的文件或目录复制到 /tmp 目录
123minghui@Mingarch ~ $ sudo cp -r /etc/*.d /tmp[sudo] minghui 的密码：minghui@Mingarch ~ $


将 /etc 目录中所有以 .conf 结尾并且以 m、n、r 或 p 开头的文件或目录复制到 /tmp 目录
123minghui@Mingarch ~ $ sudo cp -r /etc/[mnrp]*.conf /tmp[sudo] minghui 的密码：minghui@Mingarch ~ $


显示 /etc 目录中所有以 ”pa“ 开头的文件，如果它是目录，则只显示目录本身

有歧义感觉，如果 /etc 目录下的目录的文件有 pa 开头的算不算？

12345minghui@Mingarch ~ $ ls /etc/ | grep &quot;^pa&quot;pam.dpasswdpasswd-minghui@Mingarch ~ $


显示 /dev 目录中所有以 ”d“ ”f“ 开头并且文件名为 3 个字符的文件

有歧义感觉，如果 /dev 目录下的目录的文件有  满足条件的算不算？

1234minghui@Mingarch ~ $ find /dev/ -name &quot;[df]??&quot;/dev//dev/fb0/dev/dri


查看 /etc/passwd 的内容，并显示行号
12345678910111213141516171819202122232425262728293031minghui@Mingarch ~ $ cat -n /etc/passwd     1  root:x:0:0::/root:/bin/bash     2  bin:x:1:1::/:/usr/bin/nologin     3  daemon:x:2:2::/:/usr/bin/nologin     4  mail:x:8:12::/var/spool/mail:/usr/bin/nologin     5  ftp:x:14:11::/srv/ftp:/usr/bin/nologin     6  http:x:33:33::/srv/http:/usr/bin/nologin     7  nobody:x:65534:65534:Nobody:/:/usr/bin/nologin     8  dbus:x:81:81:System Message Bus:/:/usr/bin/nologin     9  systemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologin    10  systemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologin    11  systemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologin    12  systemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologin    13  systemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologin    14  systemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologin    15  uuidd:x:68:68::/:/usr/bin/nologin    16  git:x:975:975:git daemon user:/:/usr/bin/git-shell    17  minghui:x:1000:1000::/home/minghui:/usr/bin/zsh    18  avahi:x:974:974:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin    19  mysql:x:973:973:MariaDB:/var/lib/mysql:/usr/bin/nologin    20  polkitd:x:102:102:PolicyKit daemon:/:/usr/bin/nologin    21  rtkit:x:133:133:RealtimeKit:/proc:/usr/bin/nologin    22  saned:x:972:972:SANE daemon user:/:/usr/bin/nologin    23  sddm:x:971:971:Simple Desktop Display Manager:/var/lib/sddm:/usr/bin/nologin    24  usbmux:x:140:140:usbmux user:/:/usr/bin/nologin    25  nvidia-persistenced:x:143:143:NVIDIA Persistence Daemon:/:/usr/bin/nologin    26  geoclue:x:970:970:Geoinformation service:/var/lib/geoclue:/usr/bin/nologin    27  tomcat8:x:57:57:Tomcat 8 user:/usr/share/tomcat8:/usr/bin/nologin    28  tss:x:969:969:tss user for tpm2:/:/usr/bin/nologinminghui@Mingarch ~ $


分别用 more、less 命令分屏查看 /etc/passwd 文件的内容
12minghui@Mingarch ~ $ more -20 /etc/passwdminghui@Mingarch ~ $ less /etc/passwd


查看 /etc/passwd 文件的前 10 行内容，并将结果保存到 /tmp/1.txt 文件中
1minghui@Mingarch ~ $ head -10 /etc/passwd &gt; /tmp/1.txt


查看 /etc/passwd 文件的后 5 行内容，并将结果保存到 /tmp/2.txt 文件中
1minghui@Mingarch ~ $ tail -5 /etc/passwd &gt; /tmp/2.txt


统计 /etc 目录中扩展名是 ”.conf” 的文件个数
123minghui@Mingarch ~ $ ls /etc/*.conf | wc -l30minghui@Mingarch ~ $


查找 /etc 目录下以 net 开头的文件，将结果保存到 /tmp/net.file 文件中
12minghui@Mingarch ~ $ ls /etc/net* &gt; /tmp/net.fileminghui@Mingarch ~ $


在 /boot 目录中查找大小超过 1024KB 且文件名以 “init” 开头的文件
12345minghui@Mingarch ~ $ find /boot +size 1024KB -name &quot;init*&quot;/boot/initramfs-linux.img/boot/initramfs-linux-fallback.imgfind: ‘+size’: 没有那个文件或目录find: ‘1024KB’: 没有那个文件或目录


在 /etc/passwd 文件中查找包含“root”字符串的行
123456minghui@Mingarch ~ $ grep &quot;root&quot; /etc/passwdroot:x:0:0::/root:/bin/bashminghui@Mingarch ~ $# 或者minghui@Mingarch ~ $ cat /etc/passwd | grep &quot;root&quot;root:x:0:0::/root:/bin/bash


查找 /etc/profile 文件中所有不以“#”开头并且不是空白的行
123456789101112131415161718192021222324252627282930313233minghui@Mingarch ~ $ grep -v &quot;^#&quot; /etc/profile | grep -v &quot;^$&quot;umask 022append_path () &#123;    case &quot;:$PATH:&quot; in        *:&quot;$1&quot;:*)            ;;        *)            PATH=&quot;$&#123;PATH:+$PATH:&#125;$1&quot;    esac&#125;append_path &#x27;/usr/local/sbin&#x27;append_path &#x27;/usr/local/bin&#x27;append_path &#x27;/usr/bin&#x27;export PATHif test -d /etc/profile.d/; then        for profile in /etc/profile.d/*.sh; do                test -r &quot;$profile&quot; &amp;&amp; . &quot;$profile&quot;        done        unset profilefiunset -f append_pathif test &quot;$BASH&quot; &amp;&amp;\   test &quot;$PS1&quot; &amp;&amp;\   test -z &quot;$POSIXLY_CORRECT&quot; &amp;&amp;\   test &quot;$&#123;0#-&#125;&quot; != sh &amp;&amp;\   test -r /etc/bash.bashrcthen        . /etc/bash.bashrcfiunset TERMCAPunset MANPATHminghui@Mingarch ~ $


查看系统中已经设置的别名命令
1234567891011121314151617181920212223242526272829minghui@Mingarch ~ $ alias-=&#x27;cd -&#x27;...=../......=../../.......=../../../........=../../../../..1=&#x27;cd -1&#x27;2=&#x27;cd -2&#x27;3=&#x27;cd -3&#x27;4=&#x27;cd -4&#x27;5=&#x27;cd -5&#x27;6=&#x27;cd -6&#x27;7=&#x27;cd -7&#x27;8=&#x27;cd -8&#x27;9=&#x27;cd -9&#x27;_=&#x27;sudo &#x27;afind=&#x27;ack -il&#x27;diff=&#x27;diff --color&#x27;egrep=&#x27;egrep --color=auto --exclude-dir=&#123;.bzr,CVS,.git,.hg,.svn,.idea,.tox&#125;&#x27;fgrep=&#x27;fgrep --color=auto --exclude-dir=&#123;.bzr,CVS,.git,.hg,.svn,.idea,.tox&#125;&#x27;l=&#x27;ls -lah&#x27;la=&#x27;ls -lAh&#x27;ll=&#x27;colorls -l&#x27;ls=colorlslsa=&#x27;ls -lah&#x27;md=&#x27;mkdir -p&#x27;rd=rmdirrun-help=manwhich-command=whence


创建名为 wcl 的命令别名，统计 /etc/profile 文件中不以 # 开头且不是空白行的行数
123minghui@Mingarch ~ $ alias wcl=&quot;grep -v &quot;^#&quot; /etc/profile | grep -v &quot;^$&quot; | wc -l&quot;minghui@Mingarch ~ $ wcl30




找到 find 命令的命令文件路径
123minghui@Mingarch ~ $ which find/usr/bin/findminghui@Mingarch ~ $


查看 find 命令的简要帮助信息
1minghui@Mingarch ~ $ find --help


查看 grep 命令的帮助手册
1minghui@Mingarch ~ $ man grep


查看历史命令
1minghui@Mingarch ~ $ history


查找 /etc/passwd 文件中所有以“nologin”结尾的行
1234567891011121314151617181920212223242526minghui@Mingarch ~ $ grep &quot;nologin$&quot; /etc/passwdbin:x:1:1::/:/usr/bin/nologindaemon:x:2:2::/:/usr/bin/nologinmail:x:8:12::/var/spool/mail:/usr/bin/nologinftp:x:14:11::/srv/ftp:/usr/bin/nologinhttp:x:33:33::/srv/http:/usr/bin/nologinnobody:x:65534:65534:Nobody:/:/usr/bin/nologindbus:x:81:81:System Message Bus:/:/usr/bin/nologinsystemd-coredump:x:981:981:systemd Core Dumper:/:/usr/bin/nologinsystemd-network:x:980:980:systemd Network Management:/:/usr/bin/nologinsystemd-oom:x:979:979:systemd Userspace OOM Killer:/:/usr/bin/nologinsystemd-journal-remote:x:978:978:systemd Journal Remote:/:/usr/bin/nologinsystemd-resolve:x:977:977:systemd Resolver:/:/usr/bin/nologinsystemd-timesync:x:976:976:systemd Time Synchronization:/:/usr/bin/nologinuuidd:x:68:68::/:/usr/bin/nologinavahi:x:974:974:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologinmysql:x:973:973:MariaDB:/var/lib/mysql:/usr/bin/nologinpolkitd:x:102:102:PolicyKit daemon:/:/usr/bin/nologinrtkit:x:133:133:RealtimeKit:/proc:/usr/bin/nologinsaned:x:972:972:SANE daemon user:/:/usr/bin/nologinsddm:x:971:971:Simple Desktop Display Manager:/var/lib/sddm:/usr/bin/nologinusbmux:x:140:140:usbmux user:/:/usr/bin/nologinnvidia-persistenced:x:143:143:NVIDIA Persistence Daemon:/:/usr/bin/nologingeoclue:x:970:970:Geoinformation service:/var/lib/geoclue:/usr/bin/nologintomcat8:x:57:57:Tomcat 8 user:/usr/share/tomcat8:/usr/bin/nologintss:x:969:969:tss user for tpm2:/:/usr/bin/nologin


假设存在 3 个目录：/tmp/a、/tmp/b 和 /tmp/c，要求用一条命令强制删除这 3 个目录
123minghui@Mingarch ~ $ rm -rf /tmp/&#123;a,b,c&#125;# 或者下面minghui@Mingarch ~ $ rm -rf /tmp/&#123;a..c&#125;


查找 /etc 目录下大于 1MB 且类型为普通文件的所有文件
12345minghui@Mingarch ~ $ sudo find /etc/ -type f -size +1M[sudo] minghui 的密码：/etc/pacman.d/gnupg/pubring.gpg~/etc/pacman.d/gnupg/pubring.gpgminghui@Mingarch ~ $


在 /tmp 目录中创建一个名为 hi.txt 的文件，文件内容为”Hello World”
1minghui@Mingarch ~ $ echo &quot;Hello World&quot; &gt;&gt; /tmp/hi.txt


将执行“find / - user student”命令时产生的错误信息重定向到 /dev/null 文件中
1minghui@Mingarch ~ $ sudo find / - user student &gt;&gt; /dev/null


如何查看系统时钟于硬件时钟

系统时钟
12345678minghui@Mingarch ~ $ timedatectl               Local time: 四 2022-03-17 10:20:36 CST           Universal time: 四 2022-03-17 02:20:36 UTC                 RTC time: 四 2022-03-17 02:20:36                Time zone: Asia/Shanghai (CST, +0800)System clock synchronized: yes              NTP service: active          RTC in local TZ: no


硬件时钟
123minghui@Mingarch ~ $ sudo hwclock[sudo] minghui 的密码：2022-03-17 10:24:38.969795+08:00




以“年/月/日 时:分:秒”的形式显示当前日期和时间，如“2018/05/26 15:02:48”
12minghui@Mingarch ~ $ date +&quot;%Y/%m/%d %H:%M:%S&quot;2022/03/17 10:26:54


某台 Linux 服务器疑似正在遭受黑客攻击，作为管理员的你需要实时观察日志文件 /var/log/message 中的最新内容，该如何用命令实现？
1minghui@Mingarch ~ $ tail -f /var/log/messages


在 /etc 目录中查找最近 1 天之内被改动过的文件
1minghui@Mingarch ~ $ find /etc -type f -mtime +1


从 /tmp 目录及其子目录中找出扩展名为 .txt 的文件，并将之删除
1minghui@Mingarch ~ $ sudo find /tmp -name &quot;*.txt&quot; -delete





</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/07/Oracle11g%E5%AE%9E%E9%AA%8C%E4%BA%8C%EF%BC%9AOracle-%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E7%AE%A1%E7%90%86/" title="Oracle-存储结构管理">Oracle-存储结构管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-07T02:28:58.000Z" title="发表于 2022-03-07 10:28:58">2022-03-07</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:35.003Z" title="更新于 2022-04-02 22:15:35">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的
掌握物理存储结构的管理方法。

掌握逻辑存储结构的管理方法。


实验内容数据库 orcl  用户名 sys 密码 oracle
用命令行模式启动SQL* Plus，用sys用户登录到orcl数据库。

创建一个本地管理方式下的表空间USERTBS1，包含一个数据文件，名称为USERTBS101.dbf，大小为10M。每个区大小为512K。

为USERTBS1添加一个数据文件，文件名为USERTBS102.dbf，自动扩展，每次扩展1M，最大为10M。

将数据文件USERTBS102.dbf更名为USERTBS105.dbf。

为数据库添加一个重做日志文件组，组内包含一个成员文件，名称为redo5.log，大小为5M。

将组号为1的重做日志文件组的第一个成员文件移动到D盘根目录下。

创建一个本地管理方式下的临时表空间TEMP3，将其作为当前数据库实例的默认临时表空间。

查看SYSAUX和USERS表空间的空闲空间大小(MB)。


实验过程初始工作：先用SQL*Plus连接到ORCL数据库。
 

创建一个本地管理方式下的表空间USERTBS1，包含一个数据文件，名称为USERTBS101.dbf，大小为10M。每个区大小为512K。
 1CREATE TABLESPACE USERTBS1 DATAFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/USERTBS1.DBF&#x27; SIZE 10M EXTENT MANAGEMENT LOCAL UNIFORM SIZE 512K;
为USERTBS1添加一个数据文件，文件名为USERTBS102.dbf，自动扩展，每次扩展1M，最大为10M。
 创建SQL文件create_datafile,内容如下：
 1ALTER TABLESPACE USERTBS1 ADD DATAFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/USERTBS102.DBF&#x27; SIZE 5M AUTOEXTEND ON NEXT 1M MAXSIZE 10M;
将数据文件USERTBS102.dbf更名为USERTBS105.dbf。

先将包含数据文件的表空间置为脱机状态（为了下一步的执行）。
1SQL&gt; ALTER TABLESPACE USERTBS1 OFFLINE;
 

然后手动重命名（上一步不执行会显示该文件在OracleServiceORCL中打开）
 

最后使用ALTER修改控制文件中的信息
1ALTER TABLESPACE USERTBS1 RENAME DATAFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/USERTBS102.DBF&#x27; TO &#x27;D:/DataBase/Oracle11g/oradata/orcl/USERTBS105.DBF&#x27;;


为数据库添加一个重做日志文件组，组内包含一个成员文件，名称为redo5.log，大小为5M。
 新建一个SQL脚本文件create_logfile_group,内容如下：
 1ALTER DATABASE ADD LOGFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/redo5.log&#x27; SIZE 5M;
  

将组号为1的重做日志文件组的第一个成员文件移动到D盘根目录下。

检查要移动的成员文件所在重做日志组状态

看到组1的状态为INACTIVE，可以直接下面工作，否则要手动日志切换。
 

在系统中将文件移动到指定位置
即把D:/DataBase/Oracle11g/oradata/orcl/REDO01.LOG文件移动到D:/

然后在数据库中作数据更新
1ALTER DATABASE RENAME FILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/REDO01.LOG&#x27; TO &#x27;D:/REDO01.LOG&#x27;;


创建一个本地管理方式下的临时表空间TEMP3，将其作为当前数据库实例的默认临时表空间。
 123CREATE TEMPORARY TABLESPACE TEMP3 TEMPFILE &#x27;D:/DataBase/Oracle11g/oradata/orcl/TEMP3.DBF&#x27; SIZE 50M EXTENT MANAGEMENT LOCAL UNIFORM SIZE 10M;ALTER DATABASE DEFAULT TEMPORARY TABLESPACE TEMP3;

查看SYSAUX和USERS表空间的空闲空间大小(MB)。
 注意：查询出来的默认是字节数，计算MB大小需要除以1024^2。
 1SELECT TABLESPACE_NAME, SUM(BYTES)/1024/1024 FREE_SPACES FROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME HAVING TABLESPACE_NAME IN (&#x27;SYSAUX&#x27;,&#x27;USERS&#x27;);
实验总结
数据文件改名的时候将所在表空间设置为脱机时出现下面问题
 先查看代码报错：
 ORA-01012: ORA-01012: 没有登录
 ORA-01034: ORA-01034: ORACLE不可用
  
  
 解决方法，尝试先执行shutdown abort然后在执行startup，最后重新登录账户。

在移动日志文件的时候忘记需要在系统中手动复制到指定地点，然后更新数据字典，如果没有手动复制会出现下图报错。
  

比较容易犯错的两点：

移动日志文件：移动日志文件需要先手动移动，然后在数据字典中更新记录值。但是前提是待移动的日志文件是处于INACTIVE和UNUSED状态。否则需要手动日志切换（ALTER SYSTEM SWITCH LOGFILE）。日志文件组信息查看：
1select group#,sequence#,members,status,archived from V$LOG;
文件重命名：先将所处表空间设置为脱机状态（ALTER TABLESPACE USERTBS1 OFFLINE），然后手动重命名文件，最后才在数据字典中更新记录值。




</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/02/ArchLinux%20PPPoE%E6%8B%A8%E5%8F%B7/" title="ArchLinux PPPoE拨号">ArchLinux PPPoE拨号</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-02T02:28:58.000Z" title="发表于 2022-03-02 10:28:58">2022-03-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:40:41.661Z" title="更新于 2022-10-05 14:40:41">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
PPPoE拨号
先安装ppp、re-pppoe
1$ sudo pacman -S ppp re-pppoe


配置pppoe
1$ pppoe-setup


欢迎使用 RP-PPPoE 客户端设置。首先，我会对您的系统进行一些检查以确保已安装 PPPoE 客户端 适当地… /usr/bin/pppoe-setup: 抱歉，您必须是 root 才能运行此脚本

使用 root 运行
1$ sudo pppoe-setup
123456789101112131415161718192021222324252627&gt;&gt;&gt; Enter your PPPoE user name (default bxxxnxnx@sympatico.ca):&gt;&gt;&gt; Enter the Ethernet interface connected to the DSL modemFor Solaris, this is likely to be something like /dev/hme0.For Linux, it will be ethn, where &#x27;n&#x27; is a number.(default eth0):&gt;&gt;&gt; Enter the demand value (default no):&gt;&gt;&gt; Enter the DNS information here:&gt;&gt;&gt; Please enter your PPPoE password:&gt;&gt;&gt; Please re-enter your PPPoE password:&gt;&gt;&gt; Choose a type of firewall (0-2):&gt;&gt;&gt; Accept these settings and adjust configuration files (y/n)? yAdjusting /etc/ppp/pppoe.confAdjusting /etc/ppp/pap-secrets and /etc/ppp/chap-secrets  (But first backing it up to /etc/ppp/pap-secrets-bak)  (But first backing it up to /etc/ppp/chap-secrets-bak)  Congratulations, it should be all set up!Type &#x27;pppoe-start&#x27; to bring up your PPPoE link and &#x27;pppoe-stop&#x27; to bringit down.  Type &#x27;pppoe-status&#x27; to see the link status.

&gt;&gt;&gt; Enter your PPPoE user name (default bxxxnxnx@sympatico.ca):宽带帐号
(default eth0):有线网卡名称
&gt;&gt;&gt; Enter the demand value (default no):默认 no 即可
&gt;&gt;&gt; Enter the DNS information here:可以填百度DNS：180.76.76.76
&gt;&gt;&gt; Please enter your PPPoE password:宽带密码
&gt;&gt;&gt; Choose a type of firewall (0-2):填 0 即可
最后输入y


把配置写入了/etc/ppp/pppoe.conf and /etc/ppp/pap-secrets and /etc/ppp/chap-secret


使用命令

pppoe-start：拨号，显示Connected!表示拨号成功
12➜  ppp sudo pppoe-start. Connected!
pppoe-stop：停止拨号

pppoe-status：查看状态
1234➜  ppp pppoe-statuspppoe-status: Link is up and running on interface ppp011: ppp0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1492 qdisc fq_codel state UNKNOWN mode DEFAULT group default qlen 3    link/ppp




下面测试
先把 wifi 关闭：nmcli radio wifi off

尝试 ping 百度的 DNS，没有问题，说明已经连接到外网了
12345678910➜  ppp ping 180.76.76.76PING 180.76.76.76 (180.76.76.76) 56(84) 字节的数据。64 字节，来自 180.76.76.76: icmp_seq=1 ttl=52 时间=24.2 毫秒64 字节，来自 180.76.76.76: icmp_seq=2 ttl=52 时间=24.1 毫秒64 字节，来自 180.76.76.76: icmp_seq=3 ttl=52 时间=25.0 毫秒^C--- 180.76.76.76 ping 统计 ---已发送 3 个包， 已接收 3 个包, 0% packet loss, time 2002msrtt min/avg/max/mdev = 24.135/24.417/24.955/0.380 ms➜  ppp


然后尝试 ping 百度，半天没接收到响应
12➜  ppp ping www.baidu.com^C
说明DNS解析没问题，如果DNS有问题则会显示如下，解决方法是编辑sudo vim /etc/ppp/pppoe.conf文件，把DNS替换成可用的
12➜  ppp ping www.baidu.comping: www.baidu.com: 域名解析暂时失败
根据网上教程链接解决了该问题
ip a(address)查看网卡信息（省略了部分信息）
12345➜  ppp ip a12: ppp0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1492 qdisc fq_codel state UNKNOWN group default qlen 3    link/ppp    inet 223.145.168.154 peer 223.145.168.1/32 scope global ppp0       valid_lft forever preferred_lft forever
ip r(route)查看路由信息
123456➜  ppp ip rdefault via 192.168.1.1 dev enp7s0 proto dhcp src 192.168.1.2 metric 20100192.168.1.0/24 dev enp7s0 proto kernel scope link src 192.168.1.2 metric 100192.168.140.0/24 dev vmnet1 proto kernel scope link src 192.168.140.1192.168.164.0/24 dev vmnet8 proto kernel scope link src 192.168.164.1223.145.168.1 dev ppp0 proto kernel scope link src 223.145.168.154

默认路由没走 pppoe，需要sudo ip r replace default via 223.145.168.154 dev ppp0

然后再次ip r查看
1234567➜  ppp ip rdefault via 223.145.168.154 dev ppp0default via 192.168.1.1 dev enp7s0 proto dhcp src 192.168.1.2 metric 20100192.168.1.0/24 dev enp7s0 proto kernel scope link src 192.168.1.2 metric 100192.168.140.0/24 dev vmnet1 proto kernel scope link src 192.168.140.1192.168.164.0/24 dev vmnet8 proto kernel scope link src 192.168.164.1223.145.168.1 dev ppp0 proto kernel scope link src 223.145.168.154
123456789➜  ppp route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         223.145.168.154 0.0.0.0         UG    0      0        0 ppp00.0.0.0         192.168.1.1     0.0.0.0         UG    20100  0        0 enp7s0192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 enp7s0192.168.140.0   0.0.0.0         255.255.255.0   U     0      0        0 vmnet1192.168.164.0   0.0.0.0         255.255.255.0   U     0      0        0 vmnet8223.145.168.1   0.0.0.0         255.255.255.255 UH    0      0        0 ppp0


然后就解决了！



有个疑问

我尝试输入sudo ip r replace default via 223.145.168.1 dev ppp0，然后ip r查看路由信息
1234567➜  ppp ip rdefault via 223.145.168.1 dev ppp0default via 192.168.1.1 dev enp7s0 proto dhcp src 192.168.1.2 metric 20100192.168.1.0/24 dev enp7s0 proto kernel scope link src 192.168.1.2 metric 100192.168.140.0/24 dev vmnet1 proto kernel scope link src 192.168.140.1192.168.164.0/24 dev vmnet8 proto kernel scope link src 192.168.164.1223.145.168.1 dev ppp0 proto kernel scope link src 223.145.168.154
123456789➜  ppp route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         223.145.168.1   0.0.0.0         UG    0      0        0 ppp00.0.0.0         192.168.1.1     0.0.0.0         UG    20100  0        0 enp7s0192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 enp7s0192.168.140.0   0.0.0.0         255.255.255.0   U     0      0        0 vmnet1192.168.164.0   0.0.0.0         255.255.255.0   U     0      0        0 vmnet8223.145.168.1   0.0.0.0         255.255.255.255 UH    0      0        0 ppp0


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/02/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0/" title="C语言复习">C语言复习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-02T02:28:58.000Z" title="发表于 2022-03-02 10:28:58">2022-03-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-05T06:42:45.891Z" title="更新于 2022-10-05 14:42:45">2022-10-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C</a></span></div><div class="content">
fgets1234567891011121314#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main()&#123;    char str[20];    char* f = fgets(str, 5, stdin);    printf(&quot;fgets返回str内容：%s\n&quot;, f);    char* find1 = strchr(str, &#x27;\0&#x27;);    char* find2 = strchr(str, &#x27;\n&#x27;);    printf(&quot;%p\n&quot;, find1);    printf(&quot;%p\n&quot;, find2);    printf(&quot;%s&quot;, str);&#125;
fgetsa函数原型
12# include &lt;stdio.h&gt;  char *fgets(char *s, int size, FILE *stream);

空格也会读取，’\t’为一个字节


输入流的字符串长度 &lt; size-1，那么s字符数组会是 […,’\0’,’\n’,…]
输入流的字符串长度 &gt;= size-1，s为[…,’\0’,…]（注：’\0’的数组下标是s[size-1]）

指针
先看一个例子

12345678int main()&#123;    int a = 101;    int* p = &amp;a;    int** pp = &amp;p;    int pSize = sizeof(p);    int ppSize = sizeof(pp);&#125;
首先a变量指向的地址是0x7fffffffdd6c，该地址同时也是指针p的内容int数据类型占4个字节，在内存编址中，一个地址为8位，也就是一个字节，结合图片可以分析出a变量保存的内容在内存中的存储情况
12345           地址    地址指向的8位的值0x7fffffffdd6c     650x7fffffffdd6d     000x7fffffffdd6e     000x7fffffffdd6f     00
恰好p变量分配的内存地址在a变量地址的附近（在图中的黄色框中即为变量p的内容）那么变量p占多少字节？64位电脑最大支持的地址位数是64位，所以保存一个地址需要64位的二进制位，即64/8=8B故p占8字节，而变量p分配的地址即为变量pp的内容：0x7fffffffdd78，再根据图片可以得出如下
12345           地址    地址指向的8位的值0x7fffffffdd78     650x7fffffffdd79     000x7fffffffdd80     000x7fffffffdd81     00</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/02/Linux%E4%BF%AE%E6%94%B9IP/" title="Linux修改IP">Linux修改IP</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-02T02:28:58.000Z" title="发表于 2022-03-02 10:28:58">2022-03-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-05T01:40:47.148Z" title="更新于 2022-06-05 09:40:47">2022-06-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
Linux修改静态IP
查看网卡名称：ifconfig、ip a(address)

将该网卡IP修改为指定IP地址
 1$ sudo ip address add 211.69.245.206/24 dev enp7s0
 通过ifconfig命令查看
 123456789101112$ ifconfigenp7s0    Link encap:Ethernet  HWaddr d8:c4:97:bd:39:ba          inet addr:211.69.245.206  Bcast:0.0.0.0  Mask:255.255.255.0          inet6 addr: 2001:da8:d010:8116:7da9:dc9:7551:110c/64 Scope:Global          inet6 addr: 2001:da8:d010:8116:bb8a:fc56:28b7:7eff/128 Scope:Global          inet6 addr: fe80::1b85:26ce:53c3:bc53/64 Scope:Link          UP BROADCAST RUNNING MULTICAST  MTU:1500          RX packets:21068 errors:0 dropped:101 overruns:0 frame:0          TX packets:2319 errors:11 dropped:0 overruns:0 carrier:0          collisions:0 txqueuelen:1000          RX bytes:6148895 (5.8 MiB)  TX bytes:366068 (357.4 KiB)
修改路由
 1234$ ip r192.168.140.0/24 dev vmnet1 proto kernel scope link src 192.168.140.1192.168.164.0/24 dev vmnet8 proto kernel scope link src 192.168.164.1211.69.245.0/24 dev enp7s0 proto kernel scope link src 211.69.245.206
 可以看到我这里网卡是enp7s0，这个时候还没有一个默认路由记录（也就是没有设置网关） 下面设置网关为211.69.245.254
 1sudo ip r replace default via 211.69.245.254 dev enp7s0
 再次用ip r查看显示如下：
 12345$ ip rdefault via 211.69.245.254 dev enp7s0192.168.140.0/24 dev vmnet1 proto kernel scope link src 192.168.140.1192.168.164.0/24 dev vmnet8 proto kernel scope link src 192.168.164.1211.69.245.0/24 dev enp7s0 proto kernel scope link src 211.69.245.206
 这个时候通过ping命令可以ping通ip地址，但是域名解析有问题，原因是DNS服务器有问题，下面修改DNS服务器IP

编辑sudo vim /etc/resolv.conf文件的nameserver字段值
 123# Generated by NetworkManagersearch mshome.netnameserver 192.168.137.1	

一般来说配置好IP、DNS服务器IP、网关就能连接上Internet了


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/01/ArchLinux%E5%AE%89%E8%A3%85VMware/" title="ArchLinux安装VMware">ArchLinux安装VMware</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-01T02:28:58.000Z" title="发表于 2022-03-01 10:28:58">2022-03-01</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.838Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
安装
安装依赖
12$ sudo pacman -S fuse2 gtkmm linux-headers pcsclite libcanberra$ yay -S ncurses5-compat-libs
安装 VMware
1$ pacman -S vmware-workstation
如果出现下面问题，只需要安装linux-headers，通过命令安装
1$ pacman -S linux-headers


安装好之后记得打开两个服务，否则进入虚拟机系统会没有网络
123$ sudo systemctl start vmware-networks.service  vmware-usbarbitrator.service       #启动虚拟机的网络,USB,共享等服务$ sudo systemctl enable vmware-networks.service  vmware-usbarbitrator.service      #启动虚拟机的网络,USB,共享等服务$ sudo modprobe -a vmw_vmci vmmon		#加载VMware模块




</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/03/01/ranger/" title="Ranger">Ranger</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-01T02:28:58.000Z" title="发表于 2022-03-01 10:28:58">2022-03-01</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:35.007Z" title="更新于 2022-04-02 22:15:35">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
Ranger 安装1$ sudo pacman -S ranger
安装图标没装之前

下面装图标
12$ git clone https://github.com/alexanderjeurissen/ranger_devicons ~/.config/ranger/plugins/ranger_devicons$ echo &quot;default_linemode devicons&quot; &gt;&gt; $HOME/.config/ranger/rc.conf
效果如下

插件安装
安装完成之后用ranger打开
但是预览文件没有高亮显示，以及图片没有预览

下面进行插件安装
1$ sudo pacman -S libcaca highlight lynx w3m elinks mediainfo
图片预览
安装ueberzug
1yay -S ueberzug


编辑文件vim ~/.config/ranger/rc.conf
修改为set preview_images true


边框编辑文件vim ~/.config/ranger/rc.conf
设置如下：
set draw_borders true
set preview_images_method ueberzug
压缩包预览安装插件即可，不用修改配置文件，默认设置好了
1$ yay -S atool
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/02/27/ArchLinux%E5%AE%89%E8%A3%85wine/" title="ArchLinux安装wine">ArchLinux安装wine</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-27T08:28:58.000Z" title="发表于 2022-02-27 16:28:58">2022-02-27</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.840Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
安装 wine
直接用 pacman 安装 wine
发现安装不了，解决方法：编辑/etc/pacman.conf文件
打开两行注释
12[multilib]Include = /etc/pacman.d/mirrorlist
然后更新源sudo pacman -Sy
然后就可以下载了，下面是官方建议安装的 3 个包
1$ sudo pacman -S wine wine-gecko wine-mono


可以通过启用multilib 库来 安装 wine (稳定) 或 wine-staging (测试) 包。 Wine Staging是Wine的修补版本 Wine, 其中包含了 bug 修复和尚未集成到稳定或开发分支中的特性。
另请参阅#图形驱动程序和# 声音以了解其他需求。
可以考虑为依赖于 Internet Explorer 和 .NET 的应用程序分别安装wine-gecko和wine-mono。这些软件包并不是严格要求的，因为 Wine 会根据需要下载相关文件。但是，提前下载文件可以让您离线工作，这样 Wine 就不会为每个需要它们的 Wine 前缀下载文件。



配置缺少DLL在运行软件的时候提示缺少DLL文件

问题代码：0024:err:module:import_dll Library MSVBVM60.DLL

解决方法：
下载winetricks工具，可以下载一些库
1$ sudo pacman -S winetrick
然后需要下载vb6run，使用下面命令即可下载
1$ sh winetricks vb6run

如果你下载有问题的话，请看下面

当下载出错（curl 拒绝连接）时，我们按照它的提示手动下载VB6.0-KB290887-X86.exe文件并且放到~/.cache/winetricks/vb6run目录下，然后再次运行下面命令即可解决。
下载 VB6.0 地址：https://web.archive.org/web/20210706045249/https://lon-01.lo4d.com/files/visual-basic-runtime-files/VB6.0-KB290887-X86.exe
1$ sh winetricks vb6run


字体变方块
拷贝 Windows 的字体c:/Windows/Fonts到~/.wine/drive_c/windows/fonts/
来到~/.wine/drive_c/windows/fonts/目录下执行命令sudo fc-cache -fv

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/02/25/Oracle11g%E5%AE%9E%E9%AA%8C%E4%B8%80%EF%BC%9AOracle%E5%8F%8A%E5%85%B6%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" title="Oracle及其管理工具">Oracle及其管理工具</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-25T02:28:58.000Z" title="发表于 2022-02-25 10:28:58">2022-02-25</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:35.000Z" title="更新于 2022-04-02 22:15:35">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/">Oracle11g实验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Oracle/">Oracle</a></span></div><div class="content">
实验目的掌握SQL* Plus的使用方法
实验内容数据库 orcl  用户名 sys  密码 oracle

用命令行模式启动SQL* Plus，用sys用户登录到orcl数据库。

使用动态性能视图查看orcl数据库的初始化参数设置。 

修改初始化参数open_cursors，设置其值为300。

用set命令来设置SQL* Plus的环境变量arraysize,pagesize和time，变量值自定。

切换用户到scott，密码 tiger。

编写一个脚本文件，内容为：查询emp表中的员工信息，并将每位员工的工资增加200。执行该文件。

查看emp表的结构。

使用PL/SQL Developer 连接数据库orcl，编写SQL语句，查询emp表中各员工的员工号和所在部门。


实验过程
用命令行模式启动SQL* Plus，用sys用户登录到orcl数据库
打开终端执行下面命令
1$ sqlplus sys/oracle@ORCL as sysdba



使用动态性能视图查看orcl数据库的初始化参数设置
1SQL&gt; show parameter

查看ORCL数据库初始化参数（部分参数截图)

修改初始化参数open_cursors，设置其值为300。
1SQL&gt; alter system set open_cursors=300;
用set命令来设置SQL* Plus的环境变量arraysize,pagesize和time，变量值自定。
1SQL&gt; set arraysize 30 pagesize 28 time on


切换用户到scott，密码 tiger。
1SQL&gt; conn scott/tiger@orcl


解锁用户：SQL&gt; alter user scott account unlock;
更改密码：SQL&gt; alter user scott identified by tiger;（tiger为修改的密码）


编写一个脚本文件，内容为：查询emp表中的员工信息，并将每位员工的工资增加200。执行该文件。

先进行下面两个设置，否则终端显示数据杂乱。
设置每行显示的数据长度：SQL&gt; set linesize 300
设置每页显示的数据条数：SQL&gt; set pagesize 100



然后编写emp_update.sql文件，我放到了默认路径下（用户目录)，sql文件内容如下
12update emp set sal=sal+200;select * from emp;
然后执行该sql文件
123SQL&gt; edit emp_update.sqlSQL&gt; @emp_update




查看emp表的结构。
1SQL&gt; desc emp;


使用PL/SQL Developer 连接数据库orcl，编写SQL语句，查询emp表中各员工的员工号和所在部门。

使用PL/SQL Developer工具连接数据库ORCL


编写sql语句并执行
1select EMPNO,JOB from emp;





</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/26/MySQL%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="MySQL性能优化">MySQL性能优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-26T02:32:33.000Z" title="发表于 2022-01-26 10:32:33">2022-01-26</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.997Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a></span></div><div class="content">
索引的分类及创建
主键索引：主键自带索引（一个表必须创建主码）

普通索引：为普通列创建索引
123create index 索引名称 on 表名(列名);# 例子create index inx_name on student(name);


唯一索引：唯一列，列中的数据是唯一的，比普通索引性能好
123create unique index 索引名称 on 表名(列名); # 例子create index inx_unique_name on student(name);


组合索引（组合索引）：一次性为表中的多个字段一起创建索引，最左前缀法则（如何命中联合索引的索引列）
注意：一个联合索引建议不要超过5个列
123create index 索引名称 on 表名(列名1,列名2.......); # 例子create index inx_name_age on student(name,age);


全文索引
在进行查询的时候，数据源可能来自于不同的表或者不同的列，比如百度查找MySQL，来自于网页的标题或者网页的内容
MyISAM存储引擎支持全文索引，但是在实际生产环境中，不会使用MySQL提供的MyISAM存储引擎的全文索引功能来实现全文索引，而是使用第三方的全文索引中间件，比如ElasticSearch、Solr等


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/22/DWM/" title="DWM-动态窗口管理器">DWM-动态窗口管理器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-22T08:28:58.000Z" title="发表于 2022-01-22 16:28:58">2022-01-22</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-20T05:11:41.906Z" title="更新于 2022-04-20 13:11:41">2022-04-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
安装 DWM来到官网：https://dwm.suckless.org/
下面需要克隆dwm st dmenu

dwm：
st：
dmenu：


先克隆到本地
123$ git clone https://git.suckless.org/dwm$ git clone https://git.suckless.org/st$ git clone https://git.suckless.org/dmenu
编译
来到克隆好的dwm文件夹
1$ sudo make clean install

执行完之后会多出两个文件config.h、dwm

来到克隆好的st文件夹
1$ sudo make clean install
来到克隆好的dmenu文件夹
1$ sudo make clean install
这些编译好的文件会移动到/usr/local/bin下

安装xorg-xinit
1$ sudo pacman -S xorg-xinit
把xorg-xinit配置文件移动到家目录
1$ cp /etc/X11/xinit/xinitrc ~/.xinitrc


来到家目录编辑.xinitrc文件
1$ sudo vim ~/.xinitrc


控制台输入startx打开 dwm

由于我现在还是 KED 桌面

123456# 检查当前的默认启动sudo systemctl get-default# 修改默认启动为命令行sudo systemctl set-default multi-user.target# 修改默认启动为图形界面sudo systemctl set-default graphical.target


1234567$ startx           /usr/lib/Xorg.wrap: Only console users are allowed to run the X serverxinit: giving upxinit: unable to connect to X server: Connection refusedxinit: server errorCouldn&#x27;t get a file descriptor referring to the console.




前面已经装好了 dwm（动态窗口管理器）、st（终端）、dmenu（启动器）
下面进行状态栏和终端美化
状态栏用到 slstatus 工具，这个工具可以显示一些系统参数，比如系统时间，CPU内存信息，当然，如果需要显示其他的信息，则可以安装第三方小工具进行查看。其实就是用命令查看信息， 然后把信息截取（正则表达式等）得到我们需要在状态栏展示的信息。
终端使用上述安装的 st，它可以通过打补丁的形式对终端进行美化与功能拓展

slstatus 状态栏信息
用来美化状态栏


先克隆
1$ git clone https://git.suckless.org/slstatus


编译
1$ sudo make clean install


配置
这是我的配置
12345678910111213static const struct arg args[] = &#123;        /* function format          argument */        &#123; run_command,  &quot;Kernel:%s | &quot;, &quot;uname -r | awk -F \&quot;-\&quot; &#x27;&#123; print $1 &#125;&#x27;&quot; &#125;,        &#123; disk_free,    &quot;Disk:%s | &quot;,   &quot;/&quot; &#125;,        &#123; cpu_perc,     &quot;CPU:%s%% | &quot;,  NULL &#125;,        &#123; ram_perc,     &quot;RAM:%s%%&quot;,     NULL &#125;,        &#123; ram_free,     &quot;/%s%% | &quot;,NULL &#125;,        &#123; run_command,  &quot;VOL:%s | &quot;,    &quot;amixer sget Master | awk -F \&quot;[][]\&quot; &#x27; /Mono:/ &#123; print $2 &#125;&#x27;&quot; &#125;,        &#123; run_command,  &quot;LIGHT:%s | &quot;,  &quot;light&quot; &#125;,        &#123; run_command,  &quot;MIC:%s | &quot;,    &quot;amixer sget Capture | awk -F \&quot;[][]\&quot; &#x27; /Left:/ &#123; print $2 &#125;&#x27;&quot; &#125;,        &#123; battery_perc, &quot;BAT:%s%% | &quot;,  &quot;BAT1&quot; &#125;,        &#123; datetime, &quot;%s &quot;,           &quot;%F %T&quot; &#125;,&#125;;
需要安装下面几个
12$ sudo pacman -S amixer$ sudo pacman -S light




dwm 配置dwm 配置主要包括基本设置和补丁

基本设置：通过修改config.h参数实现快捷键的修改、组合键绑定脚本实现音量增减以及亮度的调节
补丁：到官网下载补丁并打上补丁，但是打补丁可能会失败，这个时候需要手动打补丁，还是比较麻烦的

基本设置
快捷键设置
Win = Mod4Mask
Alt = Mod1Mask

组合键绑定实现音量加减

音量减：amixer sset Master 5%- unmute
音量加：amixer sset Master 5%+ unmute

写两个脚本
12#!/bin/bashamixer sset Master 5%- unmute
12#!/bin/bashamixer sset Master 5%+ unmute
还有一个音量静音比较坎坷，即使可以通过命令
amixer sset Master toggle实现静音，但是开启的话是不行的（有些电脑是可以的），虽然它显示音量是 ON，但是还是没有声音

现在打开音量成了问题，然后在 ArchWiki 上找到了解决方法
两种方法

使用amixer解除声卡的主音量静音
123$ amixer sset Master unmute$ amixer sset Speaker unmute$ amixer sset Headphone unmute
使用 alsamixer 解除声卡静音
 1$ alsmixer
把下面两个地方设置为 00 即可解除静音




组合键绑定实现亮度调节
按照网上的教程：https://wiki.archlinux.org/title/Backlight_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
先查看电脑是否存在intel_backlight
12$ ls /sys/class/backlight	intel_backlight
有的话使用英特尔的显卡可以使用xbacklight命令，但是我电脑没有效果
12$ xbacklight -inc 10$ xbacklight -dec 10
然后使用另外一个工具light
首先安装：sudo pacman -S light
light 的亮度调节为：减/增
12$ light -U 10$ light -A 10
使用了没有效果（但是命令前面加 sudo 有效果），需要把当前用户添加到video组中
因为调节亮度是修改的/sys/class/backlight/intel_backlight/brightness文件，这个文件属于 video 组，想要获得该文件的执行权，加入该组就可

1$ sudo usermod -a -G video minghui
现在的话使用普通用户就可以修改亮度了。
同样写两个脚本，每次变化 5 的亮度
12#!/bin/bashlight -U 5
12#!/bin/bashlight -A 5
最后绑定到快捷键中去，打开 dwm 的配置文件config.h



打补丁
dwm 中的一个桌面称为一个标签


+alpha：状态栏透明
+fullgaps-toggle：窗口边框间隙调整
+hide_vacant_tags：隐藏没有使用的标签
+rotatestack：改变打开应用的栈的结构
-r1522-viewontag：把当前聚焦窗口切换到其他标签时同时会切换过去，原来是切换过去停留在原标签
+pertag：每个标签使用不同的样式（平铺，浮动，层叠）
+fullscreen：标签全屏
+vanitygaps：增加窗口应用之间的间隙
+hide-and-restore：隐藏和显示窗口应用
-awesomebar：dwm启动时自动启动脚本，脚本路径可改变
+scratchpad：临时小窗口
-autostart：自动启动脚本
-awesomebar：显示状态栏多窗口名字

win+数字：切换到对应的标签中
win+shift+数字：将当前聚焦的窗口移动的对应的标签
win+m： 切换标签模式为层叠
win+空格：切换窗口布局
win+j/k：切换聚焦程序
win+shift+j/k：对聚焦程序进行替补和降级
win+o：隐藏当前窗口的程序
win+shift+o：显示隐藏程序
然后是一些自己定义的一些打开程序的快捷键
win+shift+i: 打开idea
win+shift+t: 打开typora
win+shift+m: 打开网易云音乐
win+p: 打开dmenu
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/15/ArchLinux-Typora-Picgo/" title="ArchLinux-Typora-Picgo">ArchLinux-Typora-Picgo</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-15T08:28:58.000Z" title="发表于 2022-01-15 16:28:58">2022-01-15</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-08T01:16:02.482Z" title="更新于 2022-05-08 09:16:02">2022-05-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
Typora 安装
使用 cur 安装 1.0 版本以下的 Typora（pacman 只搜索到了 1.0 版本以上的）
1$ yay typora


但是我此时是下载失败的，所以采用了下面的方法安装


下载 tar 包，蓝奏云下载链接，密码9999
下载好后，我是复制到/opt目录下解压
12$ cd /opt$ sudo tar -zxvf typora-0-11-18.tar.gz
然后进入目录并且编辑typora.desktop文件
123456789$ cd typora$ sudo vim typora.desktop# 我的编辑内容如下，如果路径不同则替换即可[Desktop Entry]Name=TyporaExec=/opt/typora/TyporaType=ApplicationIcon=/opt/typora/resources/assets/icon/icon_512x512.png

说明：/opt/typora/Typora这个文件是启动文件

然后把这个启动快捷方式复制到/usr/share/applications
1$ sudo cp typora.desktop /usr/share/applications
安装完成
然后就可以在菜单中搜索到，但是没有图标还不知道怎么回事（图标路径没有错误）


我的安装过程没有遇到什么错误，如果有错误网上查找即可



Picgo(core) 安装
在下载picgo之前，确保本机已经安装了nodejs和npm

1$ sudo pacman -S nodejs npm
满足1条件后，接下来用npm安装picgo（全局安装）
1$ sudo npm install picgo -g
picgo安装的位置是/usr/lib/node_modules/（即 npm 模块的保存位置，我没有修改 npm 下载模块的保存位置）



Picgo 配置先提前说明一下，上面安装好picgo之后，它还有一些文件是在~/.picgo/目录下，之后下载的插件以及配置文件都在这里！

大致流程很简单：先下载两个插件，然后编辑配置文件指定上传到哪里
注意：下面的安装命令前面不要带sudo


由于我是使用gitee作为图床，所以还要安装picgo插件

gitee-uploader：用于使用 gitee 作为图床
super-prefix：上传图片时能在文件后缀加上时间戳

1$ picgo install gitee-uploader super-prefix
启用插件，空格键确定，上下键移动
1$ picgo use plugins
接下来编辑上传的图床参数
1$ picgo set uploader

用键盘上下键选择gitee按回车
repo：填写 gitee 仓库名称（用户名/仓库名）
branch：上传分支，默认是 master
token：gitee 生成的私人令牌
path：上传到仓库的什么位置，默认是仓库根目录
customPath：默认即可
customUrl：默认即可


当然也可以直接编辑配置文件，路径~/.picgo/config.json
可以看到上面配置已经写入了文件


编辑好图床参数后，选择使用gitee图床
上下键选择gitee并回车即可
1$ picgo use uploader
终于要打开Typora了，按图编辑

这里为什么是填写picgo upload
我们之前通过 npm 全局安装了 picgo，这里就是调用了这个上传命令（而上传到图床的参数我们又设置好了）
Typora 需要上传图片的时候，就会自动将图片的绝对路径拼接载在该命令的后面，然后调用该命令上传图片到图床，当看到步骤 5 的测试就会明白





最后测试是否可以上传成功

两种方式


命令
1$ picgo upload &quot;图片路径&quot;


Typora 软件内有测试按钮




如果上传失败的话，注意看报错


最后献上



配置阿里OSS下面简单配置aliyun图床

命令，选择aliyun
1$ picgo set uploader


设置参数



参数
备注



accessKeyId
需要从阿里云控制台查看


accessKeySecret
需要从阿里云控制台查看


bucket
OSS Bucket 名称，到控制台查看


area
这是路径，有个小坑，下面说明


path
上传到的路径


customUrl
自定义域名，暂时没配


options





area 查看，红框的地方，不需要全部填写，填写前面oss-cn-shenzhen



path 有个坑的地方

比如你查看 Bucket 的文件管理是下面这样的


我想把图片上传到image/blog_img/下，那么path参数就要写成image/blog_img/而不是/image/blog_img或者image/blog_img
比如把参数写成这样image/blog_img：前面不加/是阿里云默认会给它前面加上/，后面不加/就不会自动加，比如下面这个图片链接，image前面自动加了/，而后面的blog_img确与图片的名称拼接成了一个整体，当作图片的新名称，所以它并没有上传到blog_img目录下，所以要写成image/blog_img/才正确
https://ming-blog.oss-cn-shenzhen.aliyuncs.com/image/blog_img2022-05-07_23-32.png


</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/11/ArchLinux%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="ArchLinux开发环境配置">ArchLinux开发环境配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-11T08:28:58.000Z" title="发表于 2022-01-11 16:28:58">2022-01-11</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.842Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
安装
vscode
1$ yay -S visual-studio-code-bin
程序主体文件在/opt/visual-studio-code/
如果要登录Github等帐号同步时，发现不能登录成功，请安装qtkeychain和gnome-keyring，然后就可以正常登录了
1$ sudo pacman -S qtkeychain gnome-keyring
IDEA下面两种都行，安装的是最新版本的（我此时是 2021.3-1）
12$ sudo pacman -S intellij-idea-ultimate-edition$ yay -S intellij-idea-ultimate-edition
程序主体文件在/opt/intellij-idea-ultimate-edition/

安装好了之后还要破解：参考教程：https://www.cnblogs.com/LzsCxb/p/15691203.html

下载:https://wwe.lanzout.com/iQGkbyz13ha 密码:9999
然后解压，将里面的ja-netfilter文件夹放到自己喜欢的位置，我放到了和 IDEA 程序一个目录下
来到 IDEA 点击help -&gt; Edit Custom VM Options...写入下面文件，路径替换成自己的
1-javaagent:/opt/intellij-idea-ultimate-edition/ja-netfilter/ja-netfilter.jar
然后重启 IDEA 即可

JDK

可以共存多个 JDK


JDK8
1$ sudo pacman -S jdk8-openjdk
JDK11
1$ sudo pacman -S jdk11-openjdk
安装位置/usr/lib/jvm/



查看现在所使用的 jdk 版本

1234$ archlinux-java statusAvailable Java environments:  java-11-openjdk (default)  java-8-openjdk

更改默认 JDK，比如切换为 JDK8

1$ sudo archlinux-java set java-8-openjdk
nodejs

npm

tomcat
123$ sudo pacman -S tomcat8$ sudo pacman -S tomcat9$ sudo pacman -S tomcat10
各个文件位置

在 IDEA 里面设置找到 tomcat 的主文件夹




</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/10/ArchLinux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/" title="ArchLinux安装中文输入法及软件">ArchLinux安装中文输入法及软件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-10T08:28:58.000Z" title="发表于 2022-01-10 16:28:58">2022-01-10</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.850Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
中文输入法-rime
安装好 ArchLinux 后是没有中文输入法，需要自己安装


fcitx：输入法引擎

fcitx-qt5：输入法模块

fcitx-configtool：用于配置 Fcitx 输入法的 GUI 工具

fcitx-rime

安装上面四个
1sudo pacman -S fcitx fcitx-qt5 fcitx-configtool fcitx-rime
写入下面内容到~/.xprofile文件，似乎原来是没有的，创建一个就行了
123export GTK_IM_MODULE=fcitxexport QT_IM_MODULE=fcitxexport XMODIFIERS=&quot;@im=fcitx&quot;
然后打开fcitx


看到已经有了rime输入法，不过这里显示的是繁体



终端 zsh
安装zsh
1sudo pacman -S zsh
安装oh-my-zsh
1$ sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;

如果安装不了，到 oh-my-zsh 的仓库找到install.sh文件，并复制里面的内容，在你喜欢的位置新建文件install.sh并粘贴复制内容，然后给予执行权限并执行该脚本
sudo chmod +x install.sh
./install.sh


后面就是插件的安装了

插件集合：https://github.com/zsh-users


zsh-autosuggestions：记录命令，提示命令
1$ git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zh/custom&#125;/plugins/zsh-autosuggestions
下好之后在~/.zshrc文件导入插件即可

zsh-syntax-highlighting：语法高亮
1$ git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting
下好之后在~/.zshrc文件导入插件即可

colorls：详情：https://github.com/athityakumar/colorls，安装它需要ruby version &gt;= 2.5和Nerd font字体

没有ruby先安装
123$ sudo pacman ruby# 查看版本$ ruby --version
没有字体先安装：链接

然后安装本体colorls
1$ gem install colorls


这里要把上面的路径添加到 zsh 的 PATH（环境变量）中，不导入 zsh 识别不到，如下图


添加环境变量：编辑~/.zshrc文件（我把编辑内容放到了文件最后），PATH 替换成自己的，然后 source 重新导入配置文件


最后，不想每次都输入colorls查看，需要在~/.zshrc文件中绑定命令，然后记得 source 一下








工具
下面这些均可从aur库搜索到，可用pacman或者yay命令下载


vim/neovim：vim 编辑器
google-chrome：谷歌浏览器
firefox：火狐浏览器
ranger：终端文件浏览器，像用 vim 一样
zy-player：在线视频播放器，可观看在线电影等
vlc：强大的视频播放器
yesplaymusic：音乐播放器，用网易云账户登录
utools：神器
neofetch：装逼神器
flameshot：截图工具
telegram：电报

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/01/08/ArchLinux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/" title="ArchLinux系统安装">ArchLinux系统安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-08T08:28:58.000Z" title="发表于 2022-01-08 16:28:58">2022-01-08</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-02T14:15:34.847Z" title="更新于 2022-04-02 22:15:34">2022-04-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span></div><div class="content">
ArchLinux安装步骤连接网络
由于我使用的是WIFI，所以需要手动连接，如果你连接的是路由器LAN口的网线，那么插上就行了！


输入iwctl，会进入这个工具的使用模式

输入device list查看网卡设备，我是有一个 wlan0 的网卡设备

输入station wlan0 scan，扫描 WIFI

输入station wlan0 get-networks，查看可用 WIFI 列表

下面连接WIFI，输入station wlan0 connect 要连接的WIFI名称，回车后输入密码

然后更新一下系统时间
1$ timedatectl set-ntp true
注意看我下面WIFI名称显示方块， 其实就是中文字符显示不出来，建议将WIFI名称改为非中文！



分区并挂载
查看当前磁盘分区fdisk -l详情


分区可以使用两个工具，cfdisk和gdisk，前者是有DOS界面的，后者命令行，下面我用的是 gdisk



然后就是分区了，最少建立两个分区（有boot分区的情况下），即根分区和swap分区

swap分区大小可以分内存一半，或者与内存等大
根分区为其他未分配空间


如果是硬盘里面只装这一个系统就还需要建立boot分区，用来引导系统。因为我原本是还有一个Windows系统，Windows已经创建了boot分区，我就可以不用创建了。

这里分区分好之后，假设分区情况如下

boot分区：/dev/nvme0n1p1
根分区：/dev/nvme0n1p5
swap分区：/dev/nvme0n1p6

下面将分区格式化，执行如下命令
123$ mkfs.ext4 -L ArchFSBoot /dev/nvme0n1p5	# -L 指定卷标名$ mkswap /dev/nvme0n1p6$ swapon /dev/nvme0n1p6	# 打开交换分区


分区完成后，进行挂载
挂载的目的就是写文件到刚刚所建分区上（刚刚已经格式化了，什么东西都没有），因为我们现在所处的是光盘镜像（可以看到是红色的root），还未安装系统到新建分区上，因此需要通过挂载刚刚新建分区到光盘镜像的某个目录下，与此同时，Linux挂载目录通常是/mnt下
下面把根分区（/dev/nvme0n1p5）挂载到/nmt下
swap分区（/dev/nvme0n1p6）挂载到/mnt/boot下，在挂载前，需要创建/mnt/boot目录
下面开始挂载，注意挂载顺序，先挂载外面的/mnt，然后挂载/mnt下的boot，当然，挂载前需要创建该/mnt/boot目录
下面假设先创建/mnt/boot目录并将此目录作为硬盘/dev/nvme0n1p6的挂载点，直到这里没有任何问题，然后挂载硬盘/dev/nvme0n1p5到/mnt，然后你查看/mnt下的文件ls /mnt，会发现刚刚挂载的/mnt/boot没有了。这里我是认为是先挂载的/mnt/boot这个目录被后面挂载的/mnt所掩盖了，即挂载一个目录后，该目录原始的文件会看不到了，具体原因还未知！类比刚刚，先挂载的/mnt/boot被后面挂载的/mnt掩盖掉了。
123$ mount /dev/nvme0n1p5 /mnt$ mkdir /mnt/boot$ mount /dev/nvme0n1p1 /mnt/boot



设置镜像源编辑/etc/pacman.d/mirrorlist文件，查找 China ，把国内源复制到最前面，最上面的源优先级最高


补充一个生成镜像源的网站：https://archlinux.org/mirrorlist/

开始装系统书接上文，我们把上面的所做的工作用一个图表示
这里很好理解，/mnt等价于需装系统(ArchLinux)的/
而/mnt/boot等价于/boot

知道了/mnt就是待装系统的/那么现在在/mnt下装系统，官方提供了一条命令pacstrap，下面是我安装的一些东西，按个人需求安装
1$ pacstrap /mnt base base-devel linux linux-firmware networkmanager vim intel-ucode git
等待即可！！！
安装好了之后生成文件表
1$ genfstab -U /mnt &gt;&gt; /mnt/etc/fstab

/etc/fstab是Linux系统下的n硬盘挂载点文件

新系统配置刚刚已经将系统安装好了，并且生成了文件表，下面切换到新安装的ArchLinux系统
1$ arch-chroot /mnt

语言
1$ vim /ect/local.gen
找到zh_CN.UTF-8 UTF-8和en_US.UTF-8 UTF-8前面#删除
生成语言文件
1$ locale-gen
设置系统缺省语言文件
1$ echo LANG=en_US.UTF-8 &gt; /etc/locale.conf


设置时区
12$ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime$ timedatectl set-ntp true
硬件时钟
1$ hwclock --systohc


主机名，我这里设置为 Mingarch
1$ echo Mingarch &gt; /etc/hostname


域名解析文件（hosts）
1$ vim /etc/hosts
我的内容如下
123456# Static table lookup for hostnames.# See hosts(5) for details.127.0.0.1       localhost::1             localhost127.0.1.1       Mingarch.localdomain    Mingarch

这里面的 Mingarch 是主机名，不要搞错了


给普通用户执行sudo命令权限
1$ visudo
找到%wheel ALL=(ALL) ALL，前面#删除

给 root 用户重新设密码
1$ passwd
新建用户并加入组
123$ useradd -m minghui$ usermod -aG wheel,audio,video,optical,storage minghui$ passwd minghui
重要一部，安装引导，使用 systemd-boot 安装
systemd-boot系统自带：这是一个教程
1$ bootctl install
安装好了之后，进行简单配置

需要配置/boot/loader/loader.conf和/boot/loader/entries/

首先到/boot/loader/entries/新建一个.conf文件，我这里建为Arch.conf，然后编辑它，我的内容如下
12345title Arch Linuxlinux   /vmlinuz-linuxinitrd  /intel-ucode.imginitrd  /initramfs-linux.imgoptions root=&quot;PARTUUID=87898fba-ac8a-4703-b317-a858ca9a7ffd&quot; rw

vmlinuz-linux：内核文件

上面的options root=指点根文件系统在哪里，我这里使用了PARTUUID，具体查看方法，如果是在 vim 编辑器下，直接输入:r!blkid会写在当前打开文件，然后找到根分区的PARTUUID复制过去，最后别忘记删除无关内容

编辑/boot/loader/loader.conf文件
我的内容如下
12default Archtimeout 5

default Arch：表示的是默认读取名为Arch的配置文件，该文件即为刚刚创建的，/boot/loader/entries/Arch.conf





新系统重启
先回到光盘镜像文件exit或者Ctrl+D

卸载开始挂载的分区
1$ umount -R /mntr
终于可以reboot了，完成


</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">xiaofan</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">82</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/755400668"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/755400668" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:755400668@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到灰灰爱吃小云朵的博客！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/09/28/%E8%80%83%E7%A0%94%E6%94%BF%E6%B2%BB%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" title="考研政治知识点总结">考研政治知识点总结</a><time datetime="2022-09-28T02:28:58.000Z" title="发表于 2022-09-28 10:28:58">2022-09-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/10/nvim%E9%94%AE%E4%BD%8D/" title="nvim键位">nvim键位</a><time datetime="2022-07-10T02:28:58.000Z" title="发表于 2022-07-10 10:28:58">2022-07-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/06/18/Git%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8/" title="Git在项目中的使用">Git在项目中的使用</a><time datetime="2022-06-18T01:19:37.000Z" title="发表于 2022-06-18 09:19:37">2022-06-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/06/10/ArchLinux%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8/" title="ArchLinux外接显示器">ArchLinux外接显示器</a><time datetime="2022-06-10T02:28:58.000Z" title="发表于 2022-06-10 10:28:58">2022-06-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/06/10/nvm%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" title="nvm的安装与使用">nvm的安装与使用</a><time datetime="2022-06-10T02:28:58.000Z" title="发表于 2022-06-10 10:28:58">2022-06-10</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C</span><span class="card-category-list-count">1</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Oracle11g%E5%AE%9E%E9%AA%8C/"><span class="card-category-list-name">Oracle11g实验</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windows/"><span class="card-category-list-name">Windows</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/javaSE/"><span class="card-category-list-name">javaSE</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/tools/"><span class="card-category-list-name">tools</span><span class="card-category-list-count">4</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Linux/" style="font-size: 1.45em; color: rgb(61, 53, 163)">Linux</a><a href="/tags/CSS/" style="font-size: 1.15em; color: rgb(144, 197, 147)">-CSS</a><a href="/tags/Linux/" style="font-size: 1.15em; color: rgb(138, 77, 44)">-Linux</a><a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 1.4em; color: rgb(147, 155, 175)">记录</a><a href="/tags/C/" style="font-size: 1.15em; color: rgb(114, 191, 88)">C</a><a href="/tags/Windows/" style="font-size: 1.25em; color: rgb(193, 154, 5)">-Windows</a><a href="/tags/java/" style="font-size: 1.3em; color: rgb(58, 141, 28)">java</a><a href="/tags/Git/" style="font-size: 1.2em; color: rgb(62, 15, 64)">Git</a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.15em; color: rgb(21, 96, 112)">服务器</a><a href="/tags/HTML/" style="font-size: 1.15em; color: rgb(97, 157, 189)">-HTML</a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 1.15em; color: rgb(55, 161, 160)">软件</a><a href="/tags/JavaScript/" style="font-size: 1.15em; color: rgb(60, 129, 156)">JavaScript</a><a href="/tags/Maven/" style="font-size: 1.15em; color: rgb(147, 135, 138)">Maven</a><a href="/tags/Oracle/" style="font-size: 1.35em; color: rgb(12, 80, 78)">Oracle</a><a href="/tags/MySQL/" style="font-size: 1.25em; color: rgb(144, 51, 185)">MySQL</a><a href="/tags/ArchLinux/" style="font-size: 1.15em; color: rgb(165, 119, 195)">ArchLinux</a><a href="/tags/C/" style="font-size: 1.25em; color: rgb(9, 194, 146)">C++</a><a href="/tags/tree-java/" style="font-size: 1.15em; color: rgb(189, 145, 195)">tree - java</a><a href="/tags/Vue/" style="font-size: 1.15em; color: rgb(43, 113, 2)">Vue</a><a href="/tags/wxy/" style="font-size: 1.15em; color: rgb(64, 33, 15)">wxy</a><a href="/tags/%E5%A3%81%E7%BA%B8/" style="font-size: 1.15em; color: rgb(109, 165, 182)">壁纸</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.25em; color: rgb(102, 154, 187)">算法</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.25em; color: rgb(136, 155, 13)">数据结构</a><a href="/tags/C-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.2em; color: rgb(176, 129, 153)">C++ - 数据结构</a><a href="/tags/vim/" style="font-size: 1.15em; color: rgb(9, 111, 200)">vim</a><a href="/tags/vlan/" style="font-size: 1.15em; color: rgb(122, 59, 106)">vlan</a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 1.15em; color: rgb(173, 121, 43)">汇编</a><a href="/tags/%E5%BA%95%E5%B1%82/" style="font-size: 1.2em; color: rgb(128, 26, 89)">底层</a><a href="/tags/%E4%B8%AA%E4%BA%BA/" style="font-size: 1.15em; color: rgb(93, 186, 64)">个人</a><a href="/tags/route/" style="font-size: 1.2em; color: rgb(192, 34, 189)">route</a><a href="/tags/Burp-Suite/" style="font-size: 1.15em; color: rgb(37, 109, 184)">Burp Suite</a><a href="/tags/%E6%96%87%E4%BB%B6/" style="font-size: 1.15em; color: rgb(30, 6, 27)">文件</a><a href="/tags/%E9%80%9A%E4%BF%A1/" style="font-size: 1.15em; color: rgb(132, 115, 10)">通信</a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.15em; color: rgb(76, 168, 2)">博客</a><a href="/tags/Wireshark/" style="font-size: 1.15em; color: rgb(23, 132, 12)">Wireshark</a><a href="/tags/%E4%B9%A6%E7%B1%8D/" style="font-size: 1.15em; color: rgb(164, 26, 84)">书籍</a><a href="/tags/%E6%94%BF%E6%B2%BB/" style="font-size: 1.15em; color: rgb(6, 15, 166)">政治</a><a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 1.15em; color: rgb(81, 167, 97)">链表</a><a href="/tags/LeetCode/" style="font-size: 1.15em; color: rgb(93, 79, 37)">LeetCode</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">82</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-02-17T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">112.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-10-11T07:16:03.459Z"></div></div></div></div><div class="card-widget"><div class="item-headline"><i></i><span>访客</span></div><div class="item-content"><script type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=Ti7plTQaKk8zjpyoUXfK29uCDrIzNldAuvoLvSLy1bU"></script></div></div></div></div></main><footer id="footer" style="background: flse"><div id="footer-wrap"><div class="copyright">&copy;undefined - 2022  <i id="heartbeat" class="fa fas fa-heartbeat"></i> xiaofan</div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn"><span>湘ICP备2021007749号</span></a><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2021,01,18,0,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);
</script></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(function (result) {
      if (true) {
        var sub = "".length == 0 ? new Array() : "".split(',')
        var content = result.data.content
        var both = sub.unshift(content)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'dark',
      })
      true && mermaid.init()
    })
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>'use strict';'serviceWorker'in navigator&&navigator.serviceWorker.register('service-worker.js').then(function(a){a.onupdatefound=function(){var b=a.installing;b.onstatechange=function(){switch(b.state){case'installed':navigator.serviceWorker.controller?console.log('New or updated content is available.'):console.log('Content is now available offline!');break;case'redundant':console.error('The installing service worker became redundant.');}}}}).catch(function(a){console.error('Error during service worker registration:',a)});
</script></body></html>